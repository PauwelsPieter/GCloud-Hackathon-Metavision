(self.webpackChunkpwa_metavision=self.webpackChunkpwa_metavision||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},5614:(e,t,n)=>{"use strict";n.d(t,{deG:()=>kn,tb:()=>Ff,AFp:()=>Df,ip1:()=>Nf,CZH:()=>Of,hGG:()=>Np,z2F:()=>bp,n4l:()=>F,sBO:()=>Dh,Sil:()=>Kf,wA2:()=>Tf,_Vd:()=>nh,EJc:()=>jf,Xek:()=>If,SBq:()=>oh,qLn:()=>Si,vpe:()=>Od,gxx:()=>No,tBr:()=>sr,XFs:()=>D,GSi:()=>Ua,OlP:()=>Cn,zs3:()=>zo,IIB:()=>Ef,ZZ4:()=>Sh,aQg:()=>kh,soG:()=>Vf,LVF:()=>Af,YKP:()=>Bh,v3s:()=>Ip,h0i:()=>qh,PXZ:()=>gp,R0b:()=>Qf,FiY:()=>or,r_U:()=>Sf,Lbi:()=>Mf,g9A:()=>Lf,Qsj:()=>ch,FYo:()=>uh,JOm:()=>Ri,Tiy:()=>hh,q3G:()=>li,PiD:()=>ar,tp0:()=>ur,EAV:()=>Sp,Rgc:()=>Fh,dDg:()=>ip,DyG:()=>On,q4F:()=>fh,GfV:()=>dh,i9L:()=>xn,s_b:()=>Zh,ifc:()=>U,eFA:()=>mp,G48:()=>fp,X6Q:()=>dp,_c5:()=>Ap,VLi:()=>ap,c2e:()=>Uf,zSh:()=>Do,wAp:()=>Vc,vHH:()=>v,EiD:()=>ui,mCW:()=>Zr,qzn:()=>Dr,JVY:()=>Pr,pB0:()=>Ur,eBb:()=>Mr,L6k:()=>Lr,LAX:()=>Fr,cg1:()=>Mc,Tjo:()=>kp,kL8:()=>Fc,yhl:()=>Rr,dqk:()=>$,sIi:()=>sa,CqO:()=>Xa,QGY:()=>Qa,F4k:()=>Ja,zlt:()=>nd,RDi:()=>De,AaK:()=>d,z3N:()=>Or,qOj:()=>Ko,TTD:()=>Ee,xp6:()=>xs,uIk:()=>fa,Suo:()=>zd,Xpm:()=>ee,lG2:()=>ue,Yz7:()=>T,cJS:()=>E,oAB:()=>se,Yjl:()=>ce,Y36:()=>ja,_UZ:()=>Ha,qZA:()=>za,TgZ:()=>Za,EpF:()=>Ya,n5z:()=>gn,Ikx:()=>Oc,LFG:()=>tr,$8M:()=>yn,NdJ:()=>eu,CRH:()=>Hd,oxw:()=>su,ALo:()=>Id,lcZ:()=>Td,Q6J:()=>Ba,iGM:()=>$d,CHM:()=>Xe,LSH:()=>fi,kYT:()=>oe,Udp:()=>Nu,YNc:()=>Da,_uU:()=>Gu,Oqu:()=>Ku,Gf:()=>Zd});var r=n(5959),i=n(7570),s=n(8318),o=n(1906),a=n(6598),u=n(1564);function c(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=l({__forward_ref__:l});function g(e){return e.__forward_ref__=g,e.toString=function(){return d(this())},e}function m(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===g}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function w(e){return"string"==typeof e?e:null==e?"":String(e)}function b(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():w(e)}function _(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${b(e)} found${n}`)}function I(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function E(e){return{providers:e.providers||[],imports:e.imports||[]}}function S(e){return C(e,A)||C(e,N)}function C(e,t){return e.hasOwnProperty(t)?e[t]:null}function k(e){return e&&(e.hasOwnProperty(x)||e.hasOwnProperty(O))?e[x]:null}const A=l({"\u0275prov":l}),x=l({"\u0275inj":l}),N=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var D=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let R;function P(e){const t=R;return R=e,t}function L(e,t,n){const r=S(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&D.Optional?null:void 0!==t?t:void _(d(e),"Injector")}function M(e){return{toString:e}.toString()}var F=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),U=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const V="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,$=V||B||j||q,Z={},z=[],H=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),K=l({"\u0275pipe":l}),W=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),Q=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let X=0;function ee(e){return M(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||z,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||U.Emulated,id:"c",styles:e.styles||z,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=X++,n.inputs=ae(e.inputs,t),n.outputs=ae(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ne):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(re):null,n})}function te(e,t,n){const r=e.\u0275cmp;r.directiveDefs=()=>t.map(ne),r.pipeDefs=()=>n.map(re)}function ne(e){return le(e)||he(e)}function re(e){return de(e)}const ie={};function se(e){return M(()=>{const t={type:e.type,bootstrap:e.bootstrap||z,declarations:e.declarations||z,imports:e.imports||z,exports:e.exports||z,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ie[e.id]=e.type),t})}function oe(e,t){return M(()=>{const n=fe(e,!0);n.declarations=t.declarations||z,n.imports=t.imports||z,n.exports=t.exports||z})}function ae(e,t){if(null==e)return Z;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const ue=ee;function ce(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function le(e){return e[H]||null}function he(e){return e[G]||null}function de(e){return e[K]||null}function fe(e,t){const n=e[W]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}const pe=20,ge=10;function me(e){return Array.isArray(e)&&"object"==typeof e[1]}function ye(e){return Array.isArray(e)&&!0===e[1]}function ve(e){return 0!=(8&e.flags)}function we(e){return 2==(2&e.flags)}function be(e){return 1==(1&e.flags)}function _e(e){return null!==e.template}function Ie(e,t){return e.hasOwnProperty(Q)?e[Q]:null}class Te{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ee(){return Se}function Se(e){return e.type.prototype.ngOnChanges&&(e.setInput=ke),Ce}function Ce(){const e=Ae(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Z)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function ke(e,t,n,r){const i=Ae(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Z,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new Te(u&&u.currentValue,t,o===Z),e[r]=t}function Ae(e){return e.__ngSimpleChanges__||null}Ee.ngInherit=!0;const xe="http://www.w3.org/2000/svg",Ne="http://www.w3.org/1998/MathML/";let Oe;function De(e){Oe=e}function Re(){return void 0!==Oe?Oe:"undefined"!=typeof document?document:void 0}function Pe(e){return!!e.listen}const Le={createRenderer:(e,t)=>Re()};function Me(e){for(;Array.isArray(e);)e=e[0];return e}function Fe(e,t){return Me(t[e])}function Ue(e,t){return Me(t[e.index])}function Ve(e,t){return e.data[t]}function je(e,t){return e[t]}function qe(e,t){const n=t[e];return me(n)?n:n[0]}function Be(e){return 4==(4&e[2])}function $e(e){return 128==(128&e[2])}function Ze(e,t){return null==t?null:e[t]}function ze(e){e[18]=0}function He(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ge={lFrame:Tt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ke(){return Ge.bindingsEnabled}function We(){Ge.bindingsEnabled=!0}function Ye(){Ge.bindingsEnabled=!1}function Qe(){return Ge.lFrame.lView}function Je(){return Ge.lFrame.tView}function Xe(e){return Ge.lFrame.contextLView=e,e[8]}function et(){let e=tt();for(;null!==e&&64===e.type;)e=e.parent;return e}function tt(){return Ge.lFrame.currentTNode}function nt(){const e=Ge.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function rt(e,t){const n=Ge.lFrame;n.currentTNode=e,n.isParent=t}function it(){return Ge.lFrame.isParent}function st(){Ge.lFrame.isParent=!1}function ot(){return Ge.isInCheckNoChangesMode}function at(e){Ge.isInCheckNoChangesMode=e}function ut(){const e=Ge.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ct(){return Ge.lFrame.bindingIndex}function lt(e){return Ge.lFrame.bindingIndex=e}function ht(){return Ge.lFrame.bindingIndex++}function dt(e){const t=Ge.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ft(e){Ge.lFrame.inI18n=e}function pt(e,t){const n=Ge.lFrame;n.bindingIndex=n.bindingRootIndex=e,gt(t)}function gt(e){Ge.lFrame.currentDirectiveIndex=e}function mt(e){const t=Ge.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function yt(){return Ge.lFrame.currentQueryIndex}function vt(e){Ge.lFrame.currentQueryIndex=e}function wt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function bt(e,t,n){if(n&D.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&D.Host||(r=wt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=Ge.lFrame=It();return r.currentTNode=t,r.lView=e,!0}function _t(e){const t=It(),n=e[1];Ge.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function It(){const e=Ge.lFrame,t=null===e?null:e.child;return null===t?Tt(e):t}function Tt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Et(){const e=Ge.lFrame;return Ge.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const St=Et;function Ct(){const e=Et();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function kt(){return Ge.lFrame.selectedIndex}function At(e){Ge.lFrame.selectedIndex=e}function xt(){const e=Ge.lFrame;return Ve(e.tView,e.selectedIndex)}function Nt(){Ge.lFrame.currentNamespace=xe}function Ot(){Ge.lFrame.currentNamespace=Ne}function Dt(){Ge.lFrame.currentNamespace=null}function Rt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Pt(e,t,n){Ft(e,t,3,n)}function Lt(e,t,n,r){(3&e[2])===n&&Ft(e,t,n,r)}function Mt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ft(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(Ut(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Ut(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Vt=-1;class jt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function qt(e,t,n){const r=Pe(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];$t(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function Bt(e){return 3===e||4===e||6===e}function $t(e){return 64===e.charCodeAt(0)}function Zt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||zt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function zt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Ht(e){return e!==Vt}function Gt(e){return 32767&e}function Kt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Wt=!0;function Yt(e){const t=Wt;return Wt=e,t}let Qt=0;function Jt(e,t){const n=en(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Xt(r.data,e),Xt(t,null),Xt(r.blueprint,null));const i=tn(e,t),s=e.injectorIndex;if(Ht(i)){const e=Gt(i),n=Kt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Xt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function en(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function tn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Vt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Vt}function nn(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Qt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function rn(e,t,n){if(n&D.Optional)return e;_(t,"NodeInjector")}function sn(e,t,n,r){if(n&D.Optional&&void 0===r&&(r=null),0==(n&(D.Self|D.Host))){const i=e[9],s=P(void 0);try{return i?i.get(t,r,n&D.Optional):L(t,r,n&D.Optional)}finally{P(s)}}return rn(r,t,n)}function on(e,t,n,r=D.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(J)?e[J]:void 0;return"number"==typeof t?t>=0?255&t:un:t}(n);if("function"==typeof s){if(!bt(t,e,r))return r&D.Host?rn(i,n,r):sn(t,n,r,i);try{const e=s(r);if(null!=e||r&D.Optional)return e;_(n)}finally{St()}}else if("number"==typeof s){let i=null,o=en(e,t),a=Vt,u=r&D.Host?t[16][6]:null;for((-1===o||r&D.SkipSelf)&&(a=-1===o?tn(e,t):t[o+8],a!==Vt&&fn(r,!1)?(i=t[1],o=Gt(a),t=Kt(a,t)):o=-1);-1!==o;){const e=t[1];if(dn(s,o,e.data)){const e=cn(o,t,n,i,r,u);if(e!==an)return e}a=t[o+8],a!==Vt&&fn(r,t[1].data[o+8]===u)&&dn(s,o,t)?(i=e,o=Gt(a),t=Kt(a,t)):o=-1}}}return sn(t,n,r,i)}const an={};function un(){return new pn(et(),Qe())}function cn(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=ln(a,o,n,null==r?we(a)&&Wt:r!=o&&0!=(3&a.type),i&D.Host&&s===a);return null!==u?hn(t,o,u,a):an}function ln(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,c=s>>20,l=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<l;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=o[u];if(e&&_e(e)&&e.type===n)return u}return null}function hn(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof jt){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(b(s[n]));const a=Yt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;bt(e,r,D.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=Se(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&P(u),Yt(a),o.resolving=!1,St()}}return i}function dn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function fn(e,t){return!(e&D.Self||e&D.Host&&t)}class pn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return on(this._tNode,this._lView,e,void 0,t)}}function gn(e){return M(()=>{const t=e.prototype.constructor,n=t[Q]||mn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Q]||mn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function mn(e){return y(e)?()=>{const t=mn(m(e));return t&&t()}:Ie(e)}function yn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Bt(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(et(),e)}const vn="__annotations__",wn="__parameters__",bn="__prop__metadata__";function _n(e,t,n,r,i){return M(()=>{const s=In(t);function o(...e){if(this instanceof o)return s.call(this,...e),this;const t=new o(...e);return function(n){return i&&i(n,...e),(n.hasOwnProperty(vn)?n[vn]:Object.defineProperty(n,vn,{value:[]})[vn]).push(t),r&&r(n),n}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function In(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}function Tn(e,t,n){return M(()=>{const r=In(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(wn)?e[wn]:Object.defineProperty(e,wn,{value:[]})[wn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function En(e,t,n,r){return M(()=>{const i=In(t);function s(...e){if(this instanceof s)return i.apply(this,e),this;const t=new s(...e);return function(n,i){const s=n.constructor,o=s.hasOwnProperty(bn)?s[bn]:Object.defineProperty(s,bn,{value:{}})[bn];o[i]=o.hasOwnProperty(i)&&o[i]||[],o[i].unshift(t),r&&r(n,i,...e)}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}const Sn=function(){return Tn("Attribute",e=>({attributeName:e,__NG_ELEMENT_ID__:()=>yn(e)}))}();class Cn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=T({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const kn=new Cn("AnalyzeForEntryComponents");class An{}const xn=En("ViewChild",(e,t)=>Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t),An);function Nn(){const e=$.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}const On=Function;function Dn(e){return"function"==typeof e}function Rn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Rn(r,t)):t!==e&&t.push(r)}return t}function Pn(e,t){e.forEach(e=>Array.isArray(e)?Pn(e,t):t(e))}function Ln(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Mn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Fn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function Un(e,t,n){let r=jn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Vn(e,t){const n=jn(e,t);if(n>=0)return e[1|n]}function jn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const qn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,Bn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,$n=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Zn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class zn{constructor(e){this._reflect=e||$.Reflect}isReflectionEnabled(){return!0}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let n;n=Fn(void 0===e?t.length:e.length);for(let r=0;r<n.length;r++)n[r]=void 0===e?[]:e[r]&&e[r]!=Object?[e[r]]:[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}_ownParameters(e,t){if(n=e.toString(),qn.test(n)||Zn.test(n)||Bn.test(n)&&!$n.test(n))return null;var n;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;const r=e.ctorParameters;if(r&&r!==t.ctorParameters){const e="function"==typeof r?r():r,t=e.map(e=>e&&e.type),n=e.map(e=>e&&Hn(e.decorators));return this._zipTypesAndAnnotations(t,n)}const i=e.hasOwnProperty(wn)&&e[wn],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||i?this._zipTypesAndAnnotations(s,i):Fn(e.length)}parameters(e){if(!Dn(e))return[];const t=Gn(e);let n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let t=e.annotations;return"function"==typeof t&&t.annotations&&(t=t.annotations),t}return e.decorators&&e.decorators!==t.decorators?Hn(e.decorators):e.hasOwnProperty(vn)?e[vn]:null}annotations(e){if(!Dn(e))return[];const t=Gn(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let t=e.propMetadata;return"function"==typeof t&&t.propMetadata&&(t=t.propMetadata),t}if(e.propDecorators&&e.propDecorators!==t.propDecorators){const t=e.propDecorators,n={};return Object.keys(t).forEach(e=>{n[e]=Hn(t[e])}),n}return e.hasOwnProperty(bn)?e[bn]:null}propMetadata(e){if(!Dn(e))return{};const t=Gn(e),n={};if(t!==Object){const e=this.propMetadata(t);Object.keys(e).forEach(t=>{n[t]=e[t]})}const r=this._ownPropMetadata(e,t);return r&&Object.keys(r).forEach(e=>{const t=[];n.hasOwnProperty(e)&&t.push(...n[e]),t.push(...r[e]),n[e]=t}),n}ownPropMetadata(e){return Dn(e)&&this._ownPropMetadata(e,Gn(e))||{}}hasLifecycleHook(e,t){return e instanceof On&&t in e.prototype}guards(e){return{}}getter(e){return new Function("o","return o."+e+";")}setter(e){return new Function("o","v","return o."+e+" = v;")}method(e){return new Function("o","args",`if (!o.${e}) throw new Error('"${e}" is undefined');\n        return o.${e}.apply(o, args);`)}importUri(e){return"object"==typeof e&&e.filePath?e.filePath:`./${d(e)}`}resourceUri(e){return`./${d(e)}`}resolveIdentifier(e,t,n,r){return r}resolveEnum(e,t){return e[t]}}function Hn(e){return e?e.map(e=>new(0,e.type.annotationCls)(...e.args?e.args:[])):[]}function Gn(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const Kn={},Wn=/\n/gm,Yn="__source",Qn=l({provide:String,useValue:l});let Jn;function Xn(e){const t=Jn;return Jn=e,t}function er(e,t=D.Default){if(void 0===Jn)throw new Error("inject() must be called from an injection context");return null===Jn?L(e,void 0,t):Jn.get(e,t&D.Optional?null:void 0,t)}function tr(e,t=D.Default){return(R||er)(m(e),t)}function nr(e){throw new Error("invalid")}function rr(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=D.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(tr(e,n))}else t.push(tr(r))}return t}function ir(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const sr=ir(Tn("Inject",e=>({token:e})),-1),or=ir(Tn("Optional"),8),ar=ir(Tn("Self"),2),ur=ir(Tn("SkipSelf"),4),cr=ir(Tn("Host"),1);let lr=null;function hr(){return lr=lr||new zn}function dr(e){return fr(hr().parameters(e))}function fr(e){return e.map(e=>function(e){const t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const r=e[n];if(void 0===r)continue;const i=Object.getPrototypeOf(r);if(r instanceof or||"Optional"===i.ngMetadataName)t.optional=!0;else if(r instanceof ur||"SkipSelf"===i.ngMetadataName)t.skipSelf=!0;else if(r instanceof ar||"Self"===i.ngMetadataName)t.self=!0;else if(r instanceof cr||"Host"===i.ngMetadataName)t.host=!0;else if(r instanceof sr)t.token=r.token;else if(r instanceof Sn){if(void 0===r.attributeName)throw new Error("Attribute name must be defined.");t.attribute=r.attributeName}else t.token=r}else t.token=void 0===e||Array.isArray(e)&&0===e.length?null:e;return t}(e))}let pr=new Map;const gr=new Set;function mr(e){return!!(e.templateUrl&&!e.hasOwnProperty("template")||e.styleUrls&&e.styleUrls.length)}let yr,vr;function wr(){if(void 0===yr&&(yr=null,$.trustedTypes))try{yr=$.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return yr}function br(e){var t;return(null===(t=wr())||void 0===t?void 0:t.createHTML(e))||e}function _r(){if(void 0===vr&&(vr=null,$.trustedTypes))try{vr=$.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return vr}function Ir(e){var t;return(null===(t=_r())||void 0===t?void 0:t.createHTML(e))||e}function Tr(e){var t;return(null===(t=_r())||void 0===t?void 0:t.createScript(e))||e}function Er(e){var t;return(null===(t=_r())||void 0===t?void 0:t.createScriptURL(e))||e}class Sr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Cr extends Sr{getTypeName(){return"HTML"}}class kr extends Sr{getTypeName(){return"Style"}}class Ar extends Sr{getTypeName(){return"Script"}}class xr extends Sr{getTypeName(){return"URL"}}class Nr extends Sr{getTypeName(){return"ResourceURL"}}function Or(e){return e instanceof Sr?e.changingThisBreaksApplicationSecurity:e}function Dr(e,t){const n=Rr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Rr(e){return e instanceof Sr&&e.getTypeName()||null}function Pr(e){return new Cr(e)}function Lr(e){return new kr(e)}function Mr(e){return new Ar(e)}function Fr(e){return new xr(e)}function Ur(e){return new Nr(e)}function Vr(e){const t=new qr(e);return function(){try{return!!(new window.DOMParser).parseFromString(br(""),"text/html")}catch(e){return!1}}()?new jr(t):t}class jr{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(br(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class qr{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=br(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=br(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Br=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zr(e){return(e=String(e)).match(Br)||e.match($r)?e:"unsafe:"+e}function zr(e){return(e=String(e)).split(",").map(e=>Zr(e.trim())).join(", ")}function Hr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Gr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Kr=Hr("area,br,col,hr,img,wbr"),Wr=Hr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yr=Hr("rp,rt"),Qr=Gr(Yr,Wr),Jr=Gr(Kr,Gr(Wr,Hr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gr(Yr,Hr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qr),Xr=Hr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ei=Hr("srcset"),ti=Gr(Xr,ei,Hr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ni=Hr("script,style,template");class ri{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Jr.hasOwnProperty(t))return this.sanitizedSomething=!0,!ni.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,i=t.toLowerCase();if(!ti.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=e.value;Xr[i]&&(s=Zr(s)),ei[i]&&(s=zr(s)),this.buf.push(" ",t,'="',oi(s),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Jr.hasOwnProperty(t)&&!Kr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oi(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const ii=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,si=/([^\#-~ |!])/g;function oi(e){return e.replace(/&/g,"&amp;").replace(ii,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(si,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ai;function ui(e,t){let n=null;try{ai=ai||Vr(e);let r=t?String(t):"";n=ai.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ai.getInertBodyElement(r)}while(r!==s);return br((new ri).sanitizeChildren(ci(n)||n))}finally{if(n){const e=ci(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function ci(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var li=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function hi(e){const t=wi();return t?Ir(t.sanitize(li.HTML,e)||""):Dr(e,"HTML")?Ir(Or(e)):ui(Re(),w(e))}function di(e){const t=wi();return t?t.sanitize(li.STYLE,e)||"":Dr(e,"Style")?Or(e):w(e)}function fi(e){const t=wi();return t?t.sanitize(li.URL,e)||"":Dr(e,"URL")?Or(e):Zr(w(e))}function pi(e){const t=wi();if(t)return Er(t.sanitize(li.RESOURCE_URL,e)||"");if(Dr(e,"ResourceURL"))return Er(Or(e));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function gi(e){const t=wi();if(t)return Tr(t.sanitize(li.SCRIPT,e)||"");if(Dr(e,"Script"))return Tr(Or(e));throw new Error("unsafe value used in a script context")}function mi(e){return br(e[0])}function yi(e){return function(e){var t;return(null===(t=wr())||void 0===t?void 0:t.createScriptURL(e))||e}(e[0])}function vi(e,t,n){return function(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?pi:fi}(t,n)(e)}function wi(){const e=Qe();return e&&e[12]}function bi(e,t){e.__ngContext__=t}function _i(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ii(e){return e.ngDebugContext}function Ti(e){return e.ngOriginalError}function Ei(e,...t){e.error(...t)}class Si{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Ei}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Ii(e)?Ii(e):this._findContext(Ti(e)):null}_findOriginalError(e){let t=Ti(e);for(;t&&Ti(t);)t=Ti(t);return t}}const Ci=/^>|^->|<!--|-->|--!>|<!-$/g,ki=/(<|>)/,Ai=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($))();function xi(e){return e.ownerDocument.defaultView}function Ni(e){return e.ownerDocument}function Oi(e){return e.ownerDocument.body}function Di(e){return e instanceof Function?e():e}var Ri=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Pi;function Li(e,t){return Pi(e,t)}function Mi(e){const t=e[3];return ye(t)?t[3]:t}function Fi(e){return Vi(e[13])}function Ui(e){return Vi(e[4])}function Vi(e){for(;null!==e&&!ye(e);)e=e[4];return e}function ji(e,t,n,r,i){if(null!=r){let s,o=!1;ye(r)?s=r:me(r)&&(o=!0,r=r[0]);const a=Me(r);0===e&&null!==n?null==i?Ji(t,n,a):Qi(t,n,a,i||null,!0):1===e&&null!==n?Qi(t,n,a,i||null,!0):2===e?ls(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Me(n)&&ji(t,e,r,s,i);for(let o=ge;o<n.length;o++){const i=n[o];ds(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function qi(e,t){return Pe(e)?e.createText(t):e.createTextNode(t)}function Bi(e,t,n){Pe(e)?e.setValue(t,n):t.textContent=n}function $i(e,t){return e.createComment(function(e){return e.replace(Ci,e=>e.replace(ki,"\u200b$1\u200b"))}(t))}function Zi(e,t,n){return Pe(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function zi(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,He(i,-1)),n.splice(r,1)}function Hi(e,t){if(e.length<=ge)return;const n=ge+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&zi(s,r),t>0&&(e[n-1][4]=r[4]);const o=Mn(e,ge+t);ds(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Gi(e,t){if(!(256&t[2])){const n=t[11];Pe(n)&&n.destroyNode&&ds(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Ki(e[1],e);for(;t;){let n=null;if(me(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)me(t)&&Ki(t[1],t),t=t[3];null===t&&(t=e),me(t)&&Ki(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ki(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof jt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Me(t[e]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Pe(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&ye(t[3])){n!==t[3]&&zi(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Wi(e,t,n){return Yi(e,t.parent,n)}function Yi(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===U.None||t===U.Emulated)return null}return Ue(r,n)}function Qi(e,t,n,r,i){Pe(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Ji(e,t,n){Pe(e)?e.appendChild(t,n):t.appendChild(n)}function Xi(e,t,n,r,i){null!==r?Qi(e,t,n,r,i):Ji(e,t,n)}function es(e,t){return Pe(e)?e.parentNode(t):t.parentNode}function ts(e,t,n){return is(e,t,n)}function ns(e,t,n){return 40&e.type?Ue(e,n):null}let rs,is=ns;function ss(e,t){is=e,rs=t}function os(e,t,n,r){const i=Wi(e,r,t),s=t[11],o=ts(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Xi(s,i,n[a],o,!1);else Xi(s,i,n,o,!1);void 0!==rs&&rs(s,r,t,n,i)}function as(e,t){if(null!==t){const n=t.type;if(3&n)return Ue(t,e);if(4&n)return cs(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return as(e,n);{const n=e[t.index];return ye(n)?cs(-1,n):Me(n)}}if(32&n)return Li(t,e)()||Me(e[t.index]);{const n=us(e,t);return null!==n?Array.isArray(n)?n[0]:as(Mi(e[16]),n):as(e,t.next)}}return null}function us(e,t){return null!==t?e[16][6].projection[t.projection]:null}function cs(e,t){const n=ge+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return as(e,r)}return t[7]}function ls(e,t,n){const r=es(e,t);r&&function(e,t,n,r){Pe(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function hs(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&bi(Me(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)hs(e,t,n.child,r,i,s,!1),ji(t,e,i,a,s);else if(32&u){const o=Li(n,r);let u;for(;u=o();)ji(t,e,i,u,s);ji(t,e,i,a,s)}else 16&u?fs(e,t,r,n,i,s):ji(t,e,i,a,s);n=o?n.projectionNext:n.next}}function ds(e,t,n,r,i,s){hs(n,r,e.firstChild,t,i,s,!1)}function fs(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ji(t,e,i,a[u],s);else hs(e,t,a,o[3],i,s,!0)}function ps(e,t,n){Pe(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function gs(e,t,n){Pe(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ms(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const ys="ng-template";function vs(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==ms(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ws(e){return 4===e.type&&e.value!==ys}function bs(e,t,n){return t===(4!==e.type||n?e.value:ys)}function _s(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(Bt(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!bs(e,u,n)||""===u&&1===t.length){if(Is(r))return!1;o=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!vs(e.attrs,c,n)){if(Is(r))return!1;o=!0}continue}const l=Ts(8&r?"class":u,i,ws(e),n);if(-1===l){if(Is(r))return!1;o=!0;continue}if(""!==c){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==ms(t,c,0)||2&r&&c!==e){if(Is(r))return!1;o=!0}}}}else{if(!o&&!Is(r)&&!Is(u))return!1;if(o&&Is(u))continue;o=!1,r=u|1&r}}return Is(r)||o}function Is(e){return 0==(1&e)}function Ts(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Es(e,t,n=!1){for(let r=0;r<t.length;r++)if(_s(e,t[r],n))return!0;return!1}function Ss(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function Cs(e,t){return e?":not("+t.trim()+")":t}function ks(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Is(o)||(t+=Cs(s,i),i=""),r=o,s=s||!Is(r);n++}return""!==i&&(t+=Cs(s,i)),t}const As={};function xs(e){Ns(Je(),Qe(),kt()+e,ot())}function Ns(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&Pt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Lt(t,r,0,n)}At(n)}function Os(e,t){return e<<17|t<<2}function Ds(e){return e>>17&32767}function Rs(e){return 2|e}function Ps(e){return(131068&e)>>2}function Ls(e,t){return-131069&e|t<<2}function Ms(e){return 1|e}function Fs(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];vt(i),n.contentQueries(2,t[s],s)}}}function Us(e,t,n,r,i,s,o,a,u,c){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,ze(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function Vs(e,t,n,r,i){let s=e.data[t];if(null===s)s=js(e,t,n,r,i),Ge.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=nt();s.injectorIndex=null===e?-1:e.injectorIndex}return rt(s,!0),s}function js(e,t,n,r,i){const s=tt(),o=it(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function qs(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Bs(e,t,n){_t(t);try{const r=e.viewQuery;null!==r&&_o(1,r,n);const i=e.template;null!==i&&zs(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Fs(e,t),e.staticViewQueries&&_o(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)mo(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Ct()}}function $s(e,t,n,r){const i=t[2];if(256==(256&i))return;_t(t);const s=ot();try{ze(t),lt(e.bindingStartIndex),null!==n&&zs(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&Pt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Lt(t,n,0,null),Mt(t,0)}if(function(e){for(let t=Fi(e);null!==t;t=Ui(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&He(r,1),n[2]|=1024}}}(t),function(e){for(let t=Fi(e);null!==t;t=Ui(t))for(let e=ge;e<t.length;e++){const n=t[e],r=n[1];$e(n)&&$s(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Fs(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&Pt(t,n)}else{const n=e.contentHooks;null!==n&&Lt(t,n,1),Mt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)At(~r);else{const i=r,s=n[++e],o=n[++e];pt(s,i),o(2,t[i])}}}finally{At(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)po(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&_o(2,u,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&Pt(t,n)}else{const n=e.viewHooks;null!==n&&Lt(t,n,2),Mt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,He(t[3],-1))}finally{Ct()}}function Zs(e,t,n,r){const i=t[10],s=!ot(),o=Be(t);try{s&&!o&&i.begin&&i.begin(),o&&Bs(e,t,r),$s(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function zs(e,t,n,r,i){const s=kt(),o=2&r;try{At(-1),o&&t.length>pe&&Ns(e,t,pe,ot()),n(r,i)}finally{At(s)}}function Hs(e,t,n){if(ve(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Gs(e,t,n){Ke()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Jt(n,t),bi(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=_e(r);s&&ao(t,n,r);const u=hn(t,e,a,n);bi(u,t),null!==o&&lo(0,a-i,u,r,0,o),s&&(qe(n.index,t)[8]=u)}}(e,t,n,Ue(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ge.lFrame.currentDirectiveIndex;try{At(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];gt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||no(r,i)}}finally{At(-1),gt(o)}}(e,t,n))}function Ks(e,t,n=Ue){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Ws(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ys(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ys(e,t,n,r,i,s,o,a,u,c){const l=pe+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:As);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Qs(e,t,n,r){const i=To(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Eo(e).push(r,i.length-1))}function Js(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Xs(e,t,n,r,i,s,o,a){const u=Ue(t,n);let c,l=t.inputs;var h;!a&&null!=l&&(c=l[r])?(ko(e,n,c,r,i),we(t)&&function(e,t){const n=qe(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Pe(s)?s.setProperty(u,r,i):$t(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function eo(e,t,n,r){let i=!1;if(Ke()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Es(n,o.selectors,!1)&&(i||(i=[]),nn(Jt(n,t),e,o.type),_e(o)?(ro(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,so(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=qs(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Zt(n.mergedAttrs,c.hostAttrs),oo(e,n,t,u,c),io(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,c=null===i||ws(t)?null:ho(n,i);s.push(c),o=Js(n,u,o),a=Js(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=Zt(n.mergedAttrs,n.attrs),i}function to(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function no(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ro(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function io(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;_e(t)&&(n[""]=e)}}function so(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function oo(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=Ie(i.type)),o=new jt(s,_e(i),null);e.blueprint[r]=o,n[r]=o,to(e,t,0,r,qs(e,n,i.hostVars,As),i)}function ao(e,t,n){const r=Ue(t,e),i=Ws(n),s=e[10],o=yo(e,Us(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function uo(e,t,n,r,i,s){const o=Ue(e,t);co(t[11],o,s,e.value,n,r,i)}function co(e,t,n,r,i,s,o){if(null==s)Pe(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?w(s):o(s,r||"",i);Pe(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}function lo(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function ho(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function fo(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function po(e,t){const n=qe(t,e);if($e(n)){const e=n[1];80&n[2]?$s(e,n,e.template,n[8]):n[5]>0&&go(n)}}function go(e){for(let n=Fi(e);null!==n;n=Ui(n))for(let e=ge;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];$s(e,t,e.template,t[8])}else t[5]>0&&go(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=qe(t[n],e);$e(r)&&r[5]>0&&go(r)}}function mo(e,t){const n=qe(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Bs(r,n,n[8])}function yo(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function vo(e){for(;e;){e[2]|=64;const t=Mi(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function wo(e,t,n){const r=t[10];r.begin&&r.begin();try{$s(e,t,e.template,n)}catch(i){throw Co(t,i),i}finally{r.end&&r.end()}}function bo(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=_i(n),i=r[1];Zs(i,r,i.template,n)}}(e[8])}function _o(e,t,n){vt(0),t(e,n)}const Io=(()=>Promise.resolve(null))();function To(e){return e[7]||(e[7]=[])}function Eo(e){return e.cleanup||(e.cleanup=[])}function So(e,t,n){return(null===e||_e(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function Co(e,t){const n=e[9],r=n?n.get(Si,null):null;r&&r.handleError(t)}function ko(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ao(e,t,n){const r=Fe(t,e);Bi(e[11],r,n)}function xo(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=f(i,e):2==s&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const No=new Cn("INJECTOR",-1);class Oo{get(e,t=Kn){if(t===Kn){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const Do=new Cn("Set Injector scope."),Ro={},Po={};let Lo;function Mo(){return void 0===Lo&&(Lo=new Oo),Lo}function Fo(e,t=null,n=null,r){return new Uo(e,n,t||Mo(),r)}class Uo{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Pn(t,n=>this.processProvider(n,e,t)),Pn([e],e=>this.processInjectorType(e,[],i)),this.records.set(No,qo(void 0,this));const s=this.records.get(Do);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Kn,n=D.Default){this.assertNotDestroyed();const r=Xn(this);try{if(!(n&D.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Cn)&&S(e);t=n&&this.injectableDefInScope(n)?qo(Vo(e),Ro):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&D.Self?Mo():this.parent).get(e,t=n&D.Optional&&t===Kn?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(d(e)),r)throw s;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[Yn]&&i.unshift(t[Yn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Wn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{Xn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=k(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=k(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{Pn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Pn(r,e=>this.processProvider(e,n,r||z))}}this.injectorDefTypes.add(s);const a=Ie(s)||(()=>new s);this.records.set(s,qo(a,Ro));const u=r.providers;if(null!=u&&!o){const t=e;Pn(u,e=>this.processProvider(e,t,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=$o(e=m(e))?e:m(e&&e.provide);const i=function(e,t,n){return Bo(e)?qo(void 0,e.useValue):qo(jo(e),Ro)}(e);if($o(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=qo(void 0,Ro,!0),t.factory=()=>rr(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Ro&&(t.value=Po,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Vo(e){const t=S(e),n=null!==t?t.factory:Ie(e);if(null!==n)return n;if(e instanceof Cn)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=Fn(t,"?");throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[A]||e[N]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function jo(e,t,n){let r;if($o(e)){const t=m(e);return Ie(t)||Vo(t)}if(Bo(e))r=()=>m(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...rr(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>tr(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ie(t)||Vo(t);r=()=>new t(...rr(e.deps))}var i;return r}function qo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Bo(e){return null!==e&&"object"==typeof e&&Qn in e}function $o(e){return"function"==typeof e}const Zo=function(e,t,n){return function(e,t=null,n=null,r){const i=Fo(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let zo=(()=>{class e{static create(e,t){return Array.isArray(e)?Zo(e,t,""):Zo(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Kn,e.NULL=new Oo,e.\u0275prov=T({token:e,providedIn:"any",factory:()=>tr(No)}),e.__NG_ELEMENT_ID__=-1,e})();function Ho(e,t){Rt(_i(e)[1],et())}function Go(e){return Object.getPrototypeOf(e.prototype).constructor}function Ko(e){let t=Go(e.type),n=!0;const r=[e];for(;t;){let i;if(_e(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=Wo(e.inputs),t.declaredInputs=Wo(e.declaredInputs),t.outputs=Wo(e.outputs);const n=i.hostBindings;n&&Jo(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Yo(e,s),o&&Qo(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),_e(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===Ko&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Zt(i.hostAttrs,n=Zt(n,i.hostAttrs))}}(r)}function Wo(e){return e===Z?{}:e===z?[]:e}function Yo(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Qo(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Jo(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}const Xo=["providersResolver"],ea=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function ta(e){let t,n=Go(e.type);t=_e(e)?n.\u0275cmp:n.\u0275dir;const r=e;for(const i of Xo)r[i]=t[i];if(_e(t))for(const i of ea)r[i]=t[i]}let na=null;function ra(){if(!na){const e=$.Symbol;if(e&&e.iterator)na=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(na=n)}}}return na}class ia{constructor(e){this.wrapped=e}static wrap(e){return new ia(e)}static unwrap(e){return ia.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof ia}}function sa(e){return!!oa(e)&&(Array.isArray(e)||!(e instanceof Map)&&ra()in e)}function oa(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function aa(e,t,n){return e[t]=n}function ua(e,t){return e[t]}function ca(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function la(e,t,n,r){const i=ca(e,t,n);return ca(e,t+1,r)||i}function ha(e,t,n,r,i){const s=la(e,t,n,r);return ca(e,t+2,i)||s}function da(e,t,n,r,i,s){const o=la(e,t,n,r);return la(e,t+2,i,s)||o}function fa(e,t,n,r){const i=Qe();return ca(i,ht(),t)&&(Je(),uo(xt(),i,e,t,n,r)),fa}function pa(e,t){let n=!1,r=ct();for(let s=1;s<t.length;s+=2)n=ca(e,r++,t[s])||n;if(lt(r),!n)return As;let i=t[0];for(let s=1;s<t.length;s+=2)i+=w(t[s])+t[s+1];return i}function ga(e,t,n,r){return ca(e,ht(),n)?t+w(n)+r:As}function ma(e,t,n,r,i,s){const o=la(e,ct(),n,i);return dt(2),o?t+w(n)+r+w(i)+s:As}function ya(e,t,n,r,i,s,o,a){const u=ha(e,ct(),n,i,o);return dt(3),u?t+w(n)+r+w(i)+s+w(o)+a:As}function va(e,t,n,r,i,s,o,a,u,c){const l=da(e,ct(),n,i,o,u);return dt(4),l?t+w(n)+r+w(i)+s+w(o)+a+w(u)+c:As}function wa(e,t,n,r,i,s,o,a,u,c,l,h){const d=ct();let f=da(e,d,n,i,o,u);return f=ca(e,d+4,l)||f,dt(5),f?t+w(n)+r+w(i)+s+w(o)+a+w(u)+c+w(l)+h:As}function ba(e,t,n,r,i,s,o,a,u,c,l,h,d,f){const p=ct();let g=da(e,p,n,i,o,u);return g=la(e,p+4,l,d)||g,dt(6),g?t+w(n)+r+w(i)+s+w(o)+a+w(u)+c+w(l)+h+w(d)+f:As}function _a(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g){const m=ct();let y=da(e,m,n,i,o,u);return y=ha(e,m+4,l,d,p)||y,dt(7),y?t+w(n)+r+w(i)+s+w(o)+a+w(u)+c+w(l)+h+w(d)+f+w(p)+g:As}function Ia(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y){const v=ct();let b=da(e,v,n,i,o,u);return b=da(e,v+4,l,d,p,m)||b,dt(8),b?t+w(n)+r+w(i)+s+w(o)+a+w(u)+c+w(l)+h+w(d)+f+w(p)+g+w(m)+y:As}function Ta(e,t,n,r,i,s){const o=Qe(),a=ga(o,t,n,r);return a!==As&&uo(xt(),o,e,a,i,s),Ta}function Ea(e,t,n,r,i,s,o,a){const u=Qe(),c=ma(u,t,n,r,i,s);return c!==As&&uo(xt(),u,e,c,o,a),Ea}function Sa(e,t,n,r,i,s,o,a,u,c){const l=Qe(),h=ya(l,t,n,r,i,s,o,a);return h!==As&&uo(xt(),l,e,h,u,c),Sa}function Ca(e,t,n,r,i,s,o,a,u,c,l,h){const d=Qe(),f=va(d,t,n,r,i,s,o,a,u,c);return f!==As&&uo(xt(),d,e,f,l,h),Ca}function ka(e,t,n,r,i,s,o,a,u,c,l,h,d,f){const p=Qe(),g=wa(p,t,n,r,i,s,o,a,u,c,l,h);return g!==As&&uo(xt(),p,e,g,d,f),ka}function Aa(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g){const m=Qe(),y=ba(m,t,n,r,i,s,o,a,u,c,l,h,d,f);return y!==As&&uo(xt(),m,e,y,p,g),Aa}function xa(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y){const v=Qe(),w=_a(v,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g);return w!==As&&uo(xt(),v,e,w,m,y),xa}function Na(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y,v,w){const b=Qe(),_=Ia(b,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y);return _!==As&&uo(xt(),b,e,_,v,w),Na}function Oa(e,t,n,r){const i=Qe(),s=pa(i,t);return s!==As&&uo(xt(),i,e,s,n,r),Oa}function Da(e,t,n,r,i,s,o,a){const u=Qe(),c=Je(),l=e+pe,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){const c=t.consts,l=Vs(t,e,4,o||null,Ze(c,a));eo(t,n,l,Ze(c,u)),Rt(t,l);const h=l.tViews=Ys(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,s,o):c.data[l];rt(h,!1);const d=u[11].createComment("");os(c,u,d,h),bi(d,u),yo(u,u[l]=fo(d,u,d,h)),be(h)&&Gs(c,u,h),null!=o&&Ks(u,h,a)}function Ra(e){return je(Ge.lFrame.contextLView,pe+e)}const Pa={"\u0275\u0275defineInjectable":T,"\u0275\u0275defineInjector":E,"\u0275\u0275inject":tr,"\u0275\u0275invalidFactoryDep":nr,resolveForwardRef:m},La=l({provide:String,useValue:l});function Ma(e){return void 0!==e.useClass}function Fa(e){return void 0!==e.useFactory}const Ua=_n("Injectable",void 0,void 0,void 0,(e,t)=>Va(e,t)),Va=function(e,t){let n=null,r=null;e.hasOwnProperty(A)||Object.defineProperty(e,A,{get:()=>(null===n&&(n=Nn().compileInjectable(Pa,`ng:///${e.name}/\u0275prov.js`,function(e,t){const n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(Ma(n)||Fa(n))&&void 0!==n.deps&&(r.deps=fr(n.deps)),Ma(n)?r.useClass=n.useClass:function(e){return La in e}(n)?r.useValue=n.useValue:Fa(n)?r.useFactory=n.useFactory:function(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))),n)}),e.hasOwnProperty(Q)||Object.defineProperty(e,Q,{get:()=>{if(null===r){const t=Nn();r=t.compileFactory(Pa,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,typeArgumentCount:0,deps:dr(e),target:t.FactoryTarget.Injectable})}return r},configurable:!0})};function ja(e,t=D.Default){const n=Qe();return null===n?tr(e,t):on(et(),n,m(e),t)}function qa(){throw new Error("invalid")}function Ba(e,t,n){const r=Qe();return ca(r,ht(),t)&&Xs(Je(),xt(),r,e,t,r[11],n,!1),Ba}function $a(e,t,n,r,i){const s=i?"class":"style";ko(e,n,t.inputs[s],s,r)}function Za(e,t,n,r){const i=Qe(),s=Je(),o=pe+e,a=i[11],u=i[o]=Zi(a,t,Ge.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,u=Vs(t,e,2,i,Ze(a,s));return eo(t,n,u,Ze(a,o)),null!==u.attrs&&xo(u,u.attrs,!1),null!==u.mergedAttrs&&xo(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,0,t,n,r):s.data[o];rt(c,!0);const l=c.mergedAttrs;null!==l&&qt(a,u,l);const h=c.classes;null!==h&&gs(a,u,h);const d=c.styles;null!==d&&ps(a,u,d),64!=(64&c.flags)&&os(s,i,u,c),0===Ge.lFrame.elementDepthCount&&bi(u,i),Ge.lFrame.elementDepthCount++,be(c)&&(Gs(s,i,c),Hs(s,c,i)),null!==r&&Ks(i,c)}function za(){let e=et();it()?st():(e=e.parent,rt(e,!1));const t=e;Ge.lFrame.elementDepthCount--;const n=Je();n.firstCreatePass&&(Rt(n,e),ve(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&$a(n,t,Qe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&$a(n,t,Qe(),t.stylesWithoutHost,!1)}function Ha(e,t,n,r){Za(e,t,n,r),za()}function Ga(e,t,n){const r=Qe(),i=Je(),s=e+pe,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Ze(s,r),a=Vs(t,e,8,"ng-container",o);return null!==o&&xo(a,o,!0),eo(t,n,a,Ze(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];rt(o,!0);const a=r[s]=r[11].createComment("");os(i,r,a,o),bi(a,r),be(o)&&(Gs(i,r,o),Hs(i,o,r)),null!=n&&Ks(r,o)}function Ka(){let e=et();const t=Je();it()?st():(e=e.parent,rt(e,!1)),t.firstCreatePass&&(Rt(t,e),ve(e)&&t.queries.elementEnd(e))}function Wa(e,t,n){Ga(e,t,n),Ka()}function Ya(){return Qe()}function Qa(e){return!!e&&"function"==typeof e.then}function Ja(e){return!!e&&"function"==typeof e.subscribe}const Xa=Ja;function eu(e,t,n,r){const i=Qe(),s=Je(),o=et();return nu(s,i,i[11],o,e,t,!!n,r),eu}function tu(e,t){const n=et(),r=Qe(),i=Je();return nu(i,r,So(mt(i.data),n,r),n,e,t,!1),tu}function nu(e,t,n,r,i,s,o,a){const u=be(r),c=e.firstCreatePass&&Eo(e),l=To(t);let h=!0;if(3&r.type||a){const d=Ue(r,t),f=a?a(d):d,p=l.length,g=a?e=>a(Me(e[r.index])):r.index;if(Pe(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=iu(r,t,0,s,!1);const e=n.listen(f,i,s);l.push(s,e),c&&c.push(i,g,p,p+1)}}else s=iu(r,t,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=iu(r,t,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}function ru(e,t,n,r){try{return!1!==n(r)}catch(i){return Co(e,i),!1}}function iu(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?qe(e.index,t):t;0==(32&t[2])&&vo(o);let a=ru(t,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=ru(t,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function su(e=1){return function(e){return(Ge.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ge.lFrame.contextLView))[8]}(e)}function ou(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?Es(e,s,!0):Ss(r,s))return i}else n=i}return n}function au(e){const t=Qe()[16][6];if(!t.projection){const n=t.projection=Fn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?ou(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function uu(e,t=0,n){const r=Qe(),i=Je(),s=Vs(i,pe+e,16,null,n||null);null===s.projection&&(s.projection=t),st(),64!=(64&s.flags)&&function(e,t,n){fs(t[11],0,t,n,Wi(e,n,t),ts(n.parent||t[6],n,t))}(i,r,s)}function cu(e,t,n){return lu(e,"",t,"",n),cu}function lu(e,t,n,r,i){const s=Qe(),o=ga(s,t,n,r);return o!==As&&Xs(Je(),xt(),s,e,o,s[11],i,!1),lu}function hu(e,t,n,r,i,s,o){const a=Qe(),u=ma(a,t,n,r,i,s);return u!==As&&Xs(Je(),xt(),a,e,u,a[11],o,!1),hu}function du(e,t,n,r,i,s,o,a,u){const c=Qe(),l=ya(c,t,n,r,i,s,o,a);return l!==As&&Xs(Je(),xt(),c,e,l,c[11],u,!1),du}function fu(e,t,n,r,i,s,o,a,u,c,l){const h=Qe(),d=va(h,t,n,r,i,s,o,a,u,c);return d!==As&&Xs(Je(),xt(),h,e,d,h[11],l,!1),fu}function pu(e,t,n,r,i,s,o,a,u,c,l,h,d){const f=Qe(),p=wa(f,t,n,r,i,s,o,a,u,c,l,h);return p!==As&&Xs(Je(),xt(),f,e,p,f[11],d,!1),pu}function gu(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){const g=Qe(),m=ba(g,t,n,r,i,s,o,a,u,c,l,h,d,f);return m!==As&&Xs(Je(),xt(),g,e,m,g[11],p,!1),gu}function mu(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){const y=Qe(),v=_a(y,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g);return v!==As&&Xs(Je(),xt(),y,e,v,y[11],m,!1),mu}function yu(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y,v){const w=Qe(),b=Ia(w,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y);return b!==As&&Xs(Je(),xt(),w,e,b,w[11],v,!1),yu}function vu(e,t,n){const r=Qe(),i=pa(r,t);return i!==As&&Xs(Je(),xt(),r,e,i,r[11],n,!1),vu}function wu(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Ds(s):Ps(s),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];bu(e[a],t)&&(u=!0,e[a+1]=r?Ms(n):Rs(n)),a=r?Ds(n):Ps(n)}u&&(e[n+1]=r?Rs(s):Ms(s))}function bu(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&jn(e,t)>=0}const _u={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Iu(e){return e.substring(_u.key,_u.keyEnd)}function Tu(e){return e.substring(_u.value,_u.valueEnd)}function Eu(e,t){const n=_u.textEnd;return n===t?-1:(t=_u.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,_u.key=t,n),ku(e,t,n))}function Su(e,t){const n=_u.textEnd;let r=_u.key=ku(e,t,n);return n===r?-1:(r=_u.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=Au(e,r,n),r=_u.value=ku(e,r,n),r=_u.valueEnd=function(e,t,n){let r=-1,i=-1,s=-1,o=t,a=o;for(;o<n;){const u=e.charCodeAt(o++);if(59===u)return a;34===u||39===u?a=o=xu(e,u,o,n):t===o-4&&85===s&&82===i&&76===r&&40===u?a=o=xu(e,41,o,n):u>32&&(a=o),s=i,i=r,r=-33&u}return a}(e,r,n),Au(e,r,n))}function Cu(e){_u.key=0,_u.keyEnd=0,_u.value=0,_u.valueEnd=0,_u.textEnd=e.length}function ku(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Au(e,t,n,r){return(t=ku(e,t,n))<n&&t++,t}function xu(e,t,n,r){let i=-1,s=n;for(;s<r;){const n=e.charCodeAt(s++);if(n==t&&92!==i)return s;i=92==n&&92===i?0:n}throw new Error}function Nu(e,t,n){return Mu(e,t,n,!1),Nu}function Ou(e,t){return Mu(e,t,null,!0),Ou}function Du(e){Fu(Bu,Ru,e,!1)}function Ru(e,t){for(let n=function(e){return Cu(e),Su(e,ku(e,0,_u.textEnd))}(t);n>=0;n=Su(t,n))Bu(e,Iu(t),Tu(t))}function Pu(e){Fu(Un,Lu,e,!0)}function Lu(e,t){for(let n=function(e){return Cu(e),Eu(e,ku(e,0,_u.textEnd))}(t);n>=0;n=Eu(t,n))Un(e,Iu(t),!0)}function Mu(e,t,n,r){const i=Qe(),s=Je(),o=dt(2);s.firstUpdatePass&&Vu(s,e,o,r),t!==As&&ca(i,o,t)&&$u(s,s.data[kt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=d(Or(e)))),e}(t,n),r,o)}function Fu(e,t,n,r){const i=Je(),s=dt(2);i.firstUpdatePass&&Vu(i,null,s,r);const o=Qe();if(n!==As&&ca(o,s,n)){const a=i.data[kt()];if(Hu(a,r)&&!Uu(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=f(e,n||"")),$a(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===As&&(i=z);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&$u(e,t,n,r,g,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return z;const r=[],i=Or(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function Uu(e,t){return t>=e.expandoStartIndex}function Vu(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[kt()],o=Uu(e,n);Hu(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=mt(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=qu(n=ju(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=ju(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ps(r))return e[Ds(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=ju(null,e,t,n[1],r),n=qu(n,t.attrs,r),function(e,t,n,r){e[Ds(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=qu(r,e[s].hostAttrs,n);return qu(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Ds(o),u=Ps(o);e[r]=n;let c,l=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||jn(e,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const t=Ds(e[a+1]);e[r+1]=Os(t,a),0!==t&&(e[t+1]=Ls(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Os(a,0),0!==a&&(e[a+1]=Ls(e[a+1],r)),a=r;else e[r+1]=Os(u,0),0===a?a=r:e[u+1]=Ls(e[u+1],r),u=r;l&&(e[r+1]=Rs(e[r+1])),wu(e,c,r,!0),wu(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&jn(s,t)>=0&&(n[r+1]=Ms(n[r+1]))}(t,c,e,r,s),o=Os(a,u),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function ju(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=qu(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function qu(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Un(e,o,!!n||t[++s]))}return void 0===e?null:e}function Bu(e,t,n){Un(e,t,Or(n))}function $u(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const u=e.data,c=u[a+1];zu(1==(1&c)?Zu(u,t,n,i,Ps(c),o):void 0)||(zu(s)||2==(2&c)&&(s=Zu(u,null,n,i,a,o)),function(e,t,n,r,i){const s=Pe(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Ri.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Ri.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Fe(kt(),n),i,s))}function Zu(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,c=null===u;let l=n[i+1];l===As&&(l=c?z:void 0);let h=c?Vn(l,r):u===r?l:void 0;if(s&&!zu(h)&&(h=Vn(t,r)),zu(h)&&(a=h,o))return a;const d=e[i+1];i=o?Ds(d):Ps(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=Vn(e,r))}return a}function zu(e){return void 0!==e}function Hu(e,t){return 0!=(e.flags&(t?16:32))}function Gu(e,t=""){const n=Qe(),r=Je(),i=e+pe,s=r.firstCreatePass?Vs(r,i,1,t,null):r.data[i],o=n[i]=qi(n[11],t);os(r,n,o,s),rt(s,!1)}function Ku(e){return Wu("",e,""),Ku}function Wu(e,t,n){const r=Qe(),i=ga(r,e,t,n);return i!==As&&Ao(r,kt(),i),Wu}function Yu(e,t,n,r,i){const s=Qe(),o=ma(s,e,t,n,r,i);return o!==As&&Ao(s,kt(),o),Yu}function Qu(e,t,n,r,i,s,o){const a=Qe(),u=ya(a,e,t,n,r,i,s,o);return u!==As&&Ao(a,kt(),u),Qu}function Ju(e,t,n,r,i,s,o,a,u){const c=Qe(),l=va(c,e,t,n,r,i,s,o,a,u);return l!==As&&Ao(c,kt(),l),Ju}function Xu(e,t,n,r,i,s,o,a,u,c,l){const h=Qe(),d=wa(h,e,t,n,r,i,s,o,a,u,c,l);return d!==As&&Ao(h,kt(),d),Xu}function ec(e,t,n,r,i,s,o,a,u,c,l,h,d){const f=Qe(),p=ba(f,e,t,n,r,i,s,o,a,u,c,l,h,d);return p!==As&&Ao(f,kt(),p),ec}function tc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){const g=Qe(),m=_a(g,e,t,n,r,i,s,o,a,u,c,l,h,d,f,p);return m!==As&&Ao(g,kt(),m),tc}function nc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){const y=Qe(),v=Ia(y,e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m);return v!==As&&Ao(y,kt(),v),nc}function rc(e){const t=Qe(),n=pa(t,e);return n!==As&&Ao(t,kt(),n),rc}function ic(e,t,n){Fu(Un,Lu,ga(Qe(),e,t,n),!0)}function sc(e,t,n,r,i){Fu(Un,Lu,ma(Qe(),e,t,n,r,i),!0)}function oc(e,t,n,r,i,s,o){Fu(Un,Lu,ya(Qe(),e,t,n,r,i,s,o),!0)}function ac(e,t,n,r,i,s,o,a,u){Fu(Un,Lu,va(Qe(),e,t,n,r,i,s,o,a,u),!0)}function uc(e,t,n,r,i,s,o,a,u,c,l){Fu(Un,Lu,wa(Qe(),e,t,n,r,i,s,o,a,u,c,l),!0)}function cc(e,t,n,r,i,s,o,a,u,c,l,h,d){Fu(Un,Lu,ba(Qe(),e,t,n,r,i,s,o,a,u,c,l,h,d),!0)}function lc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){Fu(Un,Lu,_a(Qe(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p),!0)}function hc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){Fu(Un,Lu,Ia(Qe(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m),!0)}function dc(e){Fu(Un,Lu,pa(Qe(),e),!0)}function fc(e,t,n){Du(ga(Qe(),e,t,n))}function pc(e,t,n,r,i){Du(ma(Qe(),e,t,n,r,i))}function gc(e,t,n,r,i,s,o){Du(ya(Qe(),e,t,n,r,i,s,o))}function mc(e,t,n,r,i,s,o,a,u){Du(va(Qe(),e,t,n,r,i,s,o,a,u))}function yc(e,t,n,r,i,s,o,a,u,c,l){Du(wa(Qe(),e,t,n,r,i,s,o,a,u,c,l))}function vc(e,t,n,r,i,s,o,a,u,c,l,h,d){Du(ba(Qe(),e,t,n,r,i,s,o,a,u,c,l,h,d))}function wc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){Du(_a(Qe(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p))}function bc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){Du(Ia(Qe(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m))}function _c(e){Du(pa(Qe(),e))}function Ic(e,t,n,r,i){return Mu(e,ga(Qe(),t,n,r),i,!1),Ic}function Tc(e,t,n,r,i,s,o){return Mu(e,ma(Qe(),t,n,r,i,s),o,!1),Tc}function Ec(e,t,n,r,i,s,o,a,u){return Mu(e,ya(Qe(),t,n,r,i,s,o,a),u,!1),Ec}function Sc(e,t,n,r,i,s,o,a,u,c,l){return Mu(e,va(Qe(),t,n,r,i,s,o,a,u,c),l,!1),Sc}function Cc(e,t,n,r,i,s,o,a,u,c,l,h,d){return Mu(e,wa(Qe(),t,n,r,i,s,o,a,u,c,l,h),d,!1),Cc}function kc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){return Mu(e,ba(Qe(),t,n,r,i,s,o,a,u,c,l,h,d,f),p,!1),kc}function Ac(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){return Mu(e,_a(Qe(),t,n,r,i,s,o,a,u,c,l,h,d,f,p,g),m,!1),Ac}function xc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y,v){return Mu(e,Ia(Qe(),t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m,y),v,!1),xc}function Nc(e,t,n){return Mu(e,pa(Qe(),t),n,!1),Nc}function Oc(e,t,n){const r=Qe();return ca(r,ht(),t)&&Xs(Je(),xt(),r,e,t,r[11],n,!0),Oc}function Dc(e,t,n){const r=Qe();if(ca(r,ht(),t)){const i=Je(),s=xt();Xs(i,s,r,e,t,So(mt(i.data),s,r),n,!0)}return Dc}const Rc=void 0;var Pc=["en",[["a","p"],["AM","PM"],Rc],[["AM","PM"],Rc,Rc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rc,"{1} 'at' {0}",Rc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Lc={};function Mc(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Uc(t);if(n)return n;const r=t.split("-")[0];if(n=Uc(r),n)return n;if("en"===r)return Pc;throw new Error(`Missing locale data for the locale "${e}".`)}function Fc(e){return Mc(e)[Vc.PluralCase]}function Uc(e){return e in Lc||(Lc[e]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[e]),Lc[e]}var Vc=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const jc=["zero","one","two","few","many"],qc="en-US",Bc={marker:"element"},$c={marker:"ICU"};var Zc=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({});let zc=qc;function Hc(e){var t;null==(t=e)&&I("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(zc=e.toLowerCase().replace(/_/g,"-"))}function Gc(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ns(e,0,n):Me(n[i])}function Kc(e,t,n,r,i){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&t.type||(a=o,o=i),null!==o&&0==(2&t.flags))for(let t=1;t<s.length;t++)Qi(e,o,n[s[t]],a,!1)}}function Wc(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];Yc(r)||Qc(r,t)&&null===Jc(r)&&Xc(r,t.index)}}function Yc(e){return!(64&e.type)}function Qc(e,t){return Yc(t)||e.index>t.index}function Jc(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Xc(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(ss(Gc,Kc),e.insertBeforeIndex=t)}function el(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function tl(e,t,n){const r=js(e,n,64,null,null);return Wc(t,r),r}function nl(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let rl=0,il=0;function sl(e,t,n,r){const i=n[11];let s,o=null;for(let a=0;a<t.length;a++){const u=t[a];if("string"==typeof u){const e=t[++a];null===n[e]&&(n[e]=qi(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===o&&(o=c,s=es(i,r)),c===o?(l=r,h=s):(l=null,h=Me(n[c])),null!==h){const t=(131070&u)>>>1;Qi(i,h,n[t],l,!1);const r=el(e,t);if(null!==r&&"object"==typeof r){const t=nl(r,n);null!==t&&sl(e,r.create[t],n,n[r.anchorIdx])}}break;case 1:const d=t[++a],f=t[++a];co(i,Fe(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case $c:const e=t[++a],r=t[++a];null===n[r]&&bi(n[r]=$i(i,e),n);break;case Bc:const s=t[++a],o=t[++a];null===n[o]&&bi(n[o]=Zi(i,s,null),n)}}}function ol(e,t,n,r,i){for(let s=0;s<n.length;s++){const o=n[s],a=n[++s];if(o&i){let i="";for(let o=s+1;o<=s+a;o++){const s=n[o];if("string"==typeof s)i+=s;else if("number"==typeof s)if(s<0)i+=w(t[r-s]);else{const a=s>>>2;switch(3&s){case 1:const s=n[++o],u=n[++o],c=e.data[a];"string"==typeof c?co(t[11],t[a],null,c,s,i,u):Xs(e,c,t,s,i,t[11],u,!1);break;case 0:const l=t[a];null!==l&&Bi(t[11],l,i);break;case 2:ul(e,el(e,a),t,i);break;case 3:al(e,el(e,a),r,t)}}}}else{const i=n[s+1];if(i>0&&3==(3&i)){const n=el(e,i>>>2);t[n.currentCaseLViewIndex]<0&&al(e,n,r,t)}}s+=a}}function al(e,t,n,r){let i=r[t.currentCaseLViewIndex];if(null!==i){let s=rl;i<0&&(i=r[t.currentCaseLViewIndex]=~i,s=-1),ol(e,r,t.update[i],n,s)}}function ul(e,t,n,r){const i=function(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function(e,t){const n=Fc(t)(parseInt(e,10)),r=jc[n];return void 0!==r?r:"other"}(t,zc);n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(nl(t,n)!==i&&(cl(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[t.anchorIdx];r&&sl(e,t.create[i],n,r)}}function cl(e,t,n){let r=nl(t,n);if(null!==r){const i=t.remove[r];for(let t=0;t<i.length;t++){const r=i[t];if(r>0){const e=Fe(r,n);null!==e&&ls(n[11],e)}else cl(e,el(e,~r),n)}}}const ll=/\ufffd(\d+):?\d*\ufffd/gi,hl=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,dl=/\ufffd(\d+)\ufffd/,fl=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,pl=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,gl=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ml=/\uE500/g;function yl(e,t,n,r,i,s,o){const a=qs(e,r,1,null);let u=a<<Zc.SHIFT,c=nt();t===c&&(c=null),null===c&&(u|=Zc.APPEND_EAGERLY),o&&(u|=Zc.COMMENT,void 0===Pi&&(Pi=function(){const e=[];let t,n,r=-1;function i(e,t){r=0;const i=nl(e,t);n=null!==i?e.remove[i]:z}function s(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),i(t[1].data[~o],t),s())}return 0===e.length?null:(n=e.pop(),r=e.pop(),s())}return function(n,r){for(t=r;e.length;)e.pop();return i(n.value,r),s}}())),i.push(u,null===s?"":s);const l=js(e,a,o?32:1,null===s?"":s,null);Wc(n,l);const h=l.index;return rt(l,!1),null!==c&&t!==c&&function(e,t){let n=e.insertBeforeIndex;var r;null===n?(ss(Gc,Kc),n=e.insertBeforeIndex=[null,t]):("Expecting array here",(r=Array.isArray(n))!=!0&&I("Expecting array here",r,true,"=="),n.push(t))}(c,h),l}function vl(e,t,n,r,i,s,o){const a=o.match(ll),u=yl(e,t,n,s,r,a?null:o,!1);a&&wl(i,o,u.index,null,0,null)}function wl(e,t,n,r,i,s){const o=e.length,a=o+1;e.push(null,null);const u=o+2,c=t.split(ll);let l=0;for(let h=0;h<c.length;h++){const t=c[h];if(1&h){const n=i+parseInt(t,10);e.push(-1-n),l|=_l(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,s),e[o]=l,e[a]=e.length-u,l}function bl(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r&&r<0&&t++}return t}function _l(e){return 1<<Math.min(e,31)}function Il(e){let t,n,r="",i=0,s=!1;for(;null!==(t=pl.exec(e));)s?t[0]===`\ufffd/*${n}\ufffd`&&(i=t.index,s=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],s=!0);return r+=e.substr(i),r}function Tl(e,t,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:qs(e,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(_l(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,s),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,s,a);const u=i.values;for(let c=0;c<u.length;c++){const s=u[c],l=[];for(let e=0;e<s.length;e++){const t=s[e];if("string"!=typeof t){const n=l.push(t)-1;s[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Cl(e,a,t,n,r,i.cases[c],s.join(""),l)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,s)}function El(e){const t=[],n=[];let r=1,i=0;const s=Sl(e=e.replace(fl,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""}));for(let o=0;o<s.length;){let e=s[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const i=Sl(s[o++]);t.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:t,values:n}}function Sl(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(e);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=e.substring(t,i);fl.test(n)?r.push(El(n)):r.push(n),t=i+1}}else{if(0==n.length){const n=e.substring(t,i);r.push(n),t=i+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function Cl(e,t,n,r,i,s,o,a){const u=[],c=[],l=[];t.cases.push(s),t.create.push(u),t.remove.push(c),t.update.push(l);const h=Vr(Re()).getInertBodyElement(o),d=ci(h)||h;return d?kl(e,t,n,r,u,c,l,d,i,a,0):0}function kl(e,t,n,r,i,s,o,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=qs(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(Jr.hasOwnProperty(p)){Nl(i,Bc,p,u,a),e.data[a]=p;const g=f.attributes;for(let e=0;e<g.length;e++){const t=g.item(e),n=t.name.toLowerCase();t.value.match(ll)?ti.hasOwnProperty(n)&&wl(o,t.value,a,t.name,0,Xr[n]?Zr:ei[n]?zr:null):Ol(i,a,t)}h=kl(e,t,n,r,i,s,o,d,a,c,l+1)|h,Al(s,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(ll);Nl(i,null,m?"":g,u,a),Al(s,a,l),m&&(h=wl(o,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=dl.exec(d.textContent||"");if(y){const t=c[parseInt(y[1],10)];Nl(i,$c,"",u,a),Tl(e,n,r,u,t,a),xl(s,a,l)}}d=d.nextSibling}return h}function Al(e,t,n){0===n&&e.push(t)}function xl(e,t,n){0===n&&(e.push(~t),e.push(t))}function Nl(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function Ol(e,t,n){e.push(t<<1|1,n.name,n.value)}const Dl=/\[(\ufffd.+?\ufffd?)\]/,Rl=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Pl=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Ll=/{([A-Z0-9_]+)}/g,Ml=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Fl=/\/\*/,Ul=/\d+\:(\d+)/;function Vl(e,t,n=-1){const r=Je(),i=Qe(),s=pe+e,o=Ze(r.consts,t),a=nt();r.firstCreatePass&&function(e,t,n,r,i,s){const o=nt(),a=[],u=[],c=[[]],l=(h=i=function(e,t){if(function(e){return-1===e}(t))return Il(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return Il(e.substring(n,r))}}(i,s),h.replace(ml," ")).split(gl);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const s=Sl(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const t=l;""!==t&&vl(e,o,c[0],a,u,n,t)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Tl(e,n,u,t,r,yl(e,o,c[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),pe+Number.parseInt(r.substring(t?2:1)));if(t)c.shift(),rt(nt(),!1);else{const t=tl(e,c[0],n);c.unshift([]),rt(t,!0)}}}e.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,s,o,n);const u=r.data[s],c=Yi(r,a===i[6]?null:a,i);!function(e,t,n,r){const i=e[11];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],u=(o&Zc.COMMENT)===Zc.COMMENT,c=(o&Zc.APPEND_EAGERLY)===Zc.APPEND_EAGERLY,l=o>>>Zc.SHIFT;let h=e[l];null===h&&(h=e[l]=u?i.createComment(a):qi(i,a)),c&&null!==n&&Qi(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),ft(!0)}function jl(){ft(!1)}function ql(e,t,n){Vl(e,t,n),jl()}function Bl(e,t){const n=Je(),r=Ze(n.consts,t);!function(e,t,n){const r=et().index,i=[];if(e.firstCreatePass&&null===e.data[t]){for(let e=0;e<n.length;e+=2){const t=n[e],s=n[e+1];if(""!==s){if(hl.test(s))throw new Error(`ICU expressions are not supported in attributes. Message: "${s}".`);wl(i,s,r,t,bl(i),null)}}e.data[t]=i}}(n,e+pe,r)}function $l(e){return ca(Qe(),ht(),e)&&(rl|=1<<Math.min(il,31)),il++,$l}function Zl(e){!function(e,t,n){if(il>0){const r=e.data[n];ol(e,t,Array.isArray(r)?r:r.update,ct()-il-1,rl)}rl=0,il=0}(Je(),Qe(),e+pe)}function zl(e,t={}){return function(e,t={}){let n=e;if(Dl.test(e)){const e={},t=[0];n=n.replace(Rl,(n,r,i)=>{const s=r||i,o=e[s]||[];if(o.length||(s.split("|").forEach(e=>{const t=e.match(Ul),n=t?parseInt(t[1],10):0,r=Fl.test(e);o.push([n,r,e])}),e[s]=o),!o.length)throw new Error(`i18n postprocess: unmatched placeholder - ${s}`);const a=t[t.length-1];let u=0;for(let e=0;e<o.length;e++)if(o[e][0]===a){u=e;break}const[c,l,h]=o[u];return l?t.pop():a!==c&&t.push(c),o.splice(u,1),h})}return Object.keys(t).length?(n=n.replace(Pl,(e,n,r,i,s,o)=>t.hasOwnProperty(r)?`${n}${t[r]}${o}`:e),n=n.replace(Ll,(e,n)=>t.hasOwnProperty(n)?t[n]:e),n=n.replace(Ml,(e,n)=>{if(t.hasOwnProperty(n)){const r=t[n];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${e} with key: ${n}`);return r.shift()}return e}),n):n}(e,t)}function Hl(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)Hl(e[s],t,n,r,i);else{const s=Je(),o=Qe();let a=$o(e)?e:m(e.provide),u=jo(e);const c=et(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if($o(e)||!e.multi){const r=new jt(u,i,ja),f=Wl(a,t,i?l:l+d,h);-1===f?(nn(Jt(c,o),s,a),Gl(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Wl(a,t,l+d,h),p=Wl(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){nn(Jt(c,o),s,a);const l=function(e,t,n,r,i){const s=new jt(e,n,ja);return s.multi=[],s.index=t,s.componentProviders=0,Kl(s,i,r&&!n),s}(i?Ql:Yl,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Gl(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Gl(s,e,f>-1?f:p,Kl(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Gl(e,t,n,r){const i=$o(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Kl(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Wl(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Yl(e,t,n,r){return Jl(this.multi,[])}function Ql(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=hn(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Jl(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Jl(i,s);return s}function Jl(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Xl(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Je();if(r.firstCreatePass){const i=_e(e);Hl(n,r.data,r.blueprint,i,!0),Hl(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class eh{}class th{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let nh=(()=>{class e{}return e.NULL=new th,e})();function rh(...e){}function ih(e,t){return new oh(Ue(e,t))}const sh=function(){return ih(et(),Qe())};let oh=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=sh,e})();function ah(e){return e instanceof oh?e.nativeElement:e}class uh{}let ch=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>lh(),e})();const lh=function(){const e=Qe(),t=qe(et().index,e);return function(e){return e[11]}(me(t)?t:e)};let hh=(()=>{class e{}return e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null}),e})();class dh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fh=new dh("12.0.5");class ph{constructor(){}supports(e){return sa(e)}create(e){return new mh(e)}}const gh=(e,t)=>t;class mh{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gh}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<bh(n,r,i)?t:n,o=bh(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!sa(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ra()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new yh(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new wh),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class yh{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vh{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class wh{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new vh,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bh(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class _h{constructor(){}supports(e){return e instanceof Map||oa(e)}create(){return new Ih}}class Ih{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||oa(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Th(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Th{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Eh(){return new Sh([new ph])}let Sh=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Eh()),deps:[[e,new ur,new or]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=T({token:e,providedIn:"root",factory:Eh}),e})();function Ch(){return new kh([new _h])}let kh=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ch()),deps:[[e,new ur,new or]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=T({token:e,providedIn:"root",factory:Ch}),e})();function Ah(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Me(s)),ye(s))for(let e=ge;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Ah(t[1],t,n,r)}const o=n.type;if(8&o)Ah(e,t,n.child,r);else if(32&o){const e=Li(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=us(t,n);if(Array.isArray(e))r.push(...e);else{const n=Mi(t[16]);Ah(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class xh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Ah(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ye(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Hi(e,n),Mn(t,n))}this._attachedToViewContainer=!1}Gi(this._lView[1],this._lView)}onDestroy(e){Qs(this._lView[1],this._lView,null,e)}markForCheck(){vo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){at(!0);try{wo(e,t,n)}finally{at(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,ds(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Nh extends xh{constructor(e){super(e),this._view=e}detectChanges(){bo(this._view)}checkNoChanges(){!function(e){at(!0);try{bo(e)}finally{at(!1)}}(this._view)}get context(){return null}}const Oh=function(e){return function(e,t,n){if(we(e)&&!n){const n=qe(e.index,t);return new xh(n,n)}return 47&e.type?new xh(t[16],t):null}(et(),Qe(),16==(16&e))};let Dh=(()=>{class e{}return e.__NG_ELEMENT_ID__=Oh,e})();const Rh=[new _h],Ph=new Sh([new ph]),Lh=new kh(Rh),Mh=function(){return jh(et(),Qe())};let Fh=(()=>{class e{}return e.__NG_ELEMENT_ID__=Mh,e})();const Uh=Fh,Vh=class extends Uh{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Us(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Bs(t,n,e),new xh(n)}};function jh(e,t){return 4&e.type?new Vh(t,e,ih(e,t)):null}class qh{}class Bh{}const $h=function(){return Wh(et(),Qe())};let Zh=(()=>{class e{}return e.__NG_ELEMENT_ID__=$h,e})();const zh=Zh,Hh=class extends zh{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new pn(this._hostTNode,this._hostLView)}get parentInjector(){const e=tn(this._hostTNode,this._hostLView);if(Ht(e)){const t=Kt(e,this._hostLView),n=Gt(e);return new pn(t[1].data[n+8],t)}return new pn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Gh(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ge}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(qh,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(ye(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Hh(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=ge+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-ge?(t[4]=n[i],Ln(n,ge+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=cs(i,s),a=n[11],u=es(a,s[7]);return null!==u&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,ds(e,r,n,1,i,s)}(r,s[6],a,n,u,o),e.attachToViewContainerRef(),Ln(Kh(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Gh(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Hi(this._lContainer,t);n&&(Mn(Kh(this._lContainer),t),Gi(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Hi(this._lContainer,t);return n&&null!=Mn(Kh(this._lContainer),t)?new xh(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Gh(e){return e[8]}function Kh(e){return e[8]||(e[8]=[])}function Wh(e,t){let n;const r=t[e.index];if(ye(r))n=r;else{let i;if(8&e.type)i=Me(r);else{const n=t[11];i=n.createComment("");const r=Ue(e,t);Qi(n,es(n,r),i,function(e,t){return Pe(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=fo(r,t,i,e),yo(t,n)}return new Hh(n,e,t)}const Yh={};class Qh extends nh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=le(e);return new ed(t,this.ngModule)}}function Jh(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Xh=new Cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ai});class ed extends eh{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(ks).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Jh(this.componentDef.inputs)}get outputs(){return Jh(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Yh,i);return s!==Yh||r===Yh?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(uh,Le),o=i.get(hh,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Pe(e))return e.selectRootElement(t,n===U.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Zi(s.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?xe:"math"===t?Ne:null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ai,clean:Io,playerHandler:null,flags:0},d=Ys(0,null,null,1,0,null,null,null,null,null),f=Us(null,d,h,l,null,null,s,a,o,i);let p,g;_t(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Vs(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(xo(a,u,!0),null!==e&&(qt(i,e,u),null!==a.classes&&gs(i,e,a.classes),null!==a.styles&&ps(i,e,a.styles)));const c=r.createRenderer(e,t),l=Us(n,Ws(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(nn(Jt(a,n),o,t.type),ro(o,a),so(a,n.length,1)),yo(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)qt(a,c,["ng-version",fh.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!Is(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&qt(a,c,e),t&&t.length>0&&gs(a,c,t.join(" "))}if(g=Ve(d,pe),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=et();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),oo(e,r,t,qs(e,t,1,null),n));const i=hn(t,e,r.directiveStart,r);bi(i,t);const s=Ue(r,t);return s&&bi(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=et();t.contentQueries(1,o,e.directiveStart)}const a=et();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(At(a.index),to(n[1],a,0,a.directiveStart,a.directiveEnd,t),no(t,o)),o}(e,this.componentDef,f,h,[Ho]),Bs(d,f,null)}finally{Ct()}return new td(this.componentType,p,ih(g,f),f,g)}}class td extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Nh(r),this.componentType=e}get injector(){return new pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function nd(e,t,n,r){return M(()=>{const i=e;null!==t&&(i.hasOwnProperty("decorators")&&void 0!==i.decorators?i.decorators.push(...t):i.decorators=t),null!==n&&(i.ctorParameters=n),null!==r&&(i.propDecorators=i.hasOwnProperty("propDecorators")&&void 0!==i.propDecorators?Object.assign(Object.assign({},i.propDecorators),r):r)})}const rd=new Map;class id extends qh{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qh(this);const n=fe(e),r=e[Y]||null;r&&Hc(r),this._bootstrapComponents=Di(n.bootstrap),this._r3Injector=Fo(e,t,[{provide:qh,useValue:this},{provide:nh,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=zo.THROW_IF_NOT_FOUND,n=D.Default){return e===zo||e===qh||e===No?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class sd extends Bh{constructor(e){super(),this.moduleType=e,null!==fe(e)&&function(e){const t=new Set;!function e(n){const r=fe(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,rd.get(i),n),rd.set(i,n));const s=Di(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new id(this.moduleType,e)}}function od(e,t,n){const r=ut()+e,i=Qe();return i[r]===As?aa(i,r,n?t.call(n):t()):ua(i,r)}function ad(e,t,n,r){return yd(Qe(),ut(),e,t,n,r)}function ud(e,t,n,r,i){return vd(Qe(),ut(),e,t,n,r,i)}function cd(e,t,n,r,i,s){return wd(Qe(),ut(),e,t,n,r,i,s)}function ld(e,t,n,r,i,s,o){return bd(Qe(),ut(),e,t,n,r,i,s,o)}function hd(e,t,n,r,i,s,o,a){const u=ut()+e,c=Qe(),l=da(c,u,n,r,i,s);return ca(c,u+4,o)||l?aa(c,u+5,a?t.call(a,n,r,i,s,o):t(n,r,i,s,o)):ua(c,u+5)}function dd(e,t,n,r,i,s,o,a,u){const c=ut()+e,l=Qe(),h=da(l,c,n,r,i,s);return la(l,c+4,o,a)||h?aa(l,c+6,u?t.call(u,n,r,i,s,o,a):t(n,r,i,s,o,a)):ua(l,c+6)}function fd(e,t,n,r,i,s,o,a,u,c){const l=ut()+e,h=Qe();let d=da(h,l,n,r,i,s);return ha(h,l+4,o,a,u)||d?aa(h,l+7,c?t.call(c,n,r,i,s,o,a,u):t(n,r,i,s,o,a,u)):ua(h,l+7)}function pd(e,t,n,r,i,s,o,a,u,c,l){const h=ut()+e,d=Qe(),f=da(d,h,n,r,i,s);return da(d,h+4,o,a,u,c)||f?aa(d,h+8,l?t.call(l,n,r,i,s,o,a,u,c):t(n,r,i,s,o,a,u,c)):ua(d,h+8)}function gd(e,t,n,r){return _d(Qe(),ut(),e,t,n,r)}function md(e,t){const n=e[t];return n===As?void 0:n}function yd(e,t,n,r,i,s){const o=t+n;return ca(e,o,i)?aa(e,o+1,s?r.call(s,i):r(i)):md(e,o+1)}function vd(e,t,n,r,i,s,o){const a=t+n;return la(e,a,i,s)?aa(e,a+2,o?r.call(o,i,s):r(i,s)):md(e,a+2)}function wd(e,t,n,r,i,s,o,a){const u=t+n;return ha(e,u,i,s,o)?aa(e,u+3,a?r.call(a,i,s,o):r(i,s,o)):md(e,u+3)}function bd(e,t,n,r,i,s,o,a,u){const c=t+n;return da(e,c,i,s,o,a)?aa(e,c+4,u?r.call(u,i,s,o,a):r(i,s,o,a)):md(e,c+4)}function _d(e,t,n,r,i,s){let o=t+n,a=!1;for(let u=0;u<i.length;u++)ca(e,o++,i[u])&&(a=!0);return a?aa(e,o,r.apply(s,i)):md(e,o)}function Id(e,t){const n=Je();let r;const i=e+pe;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Ie(r.type)),o=P(ja);try{const e=Yt(!1),t=s();return Yt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Qe(),i,t),t}finally{P(o)}}function Td(e,t,n){const r=e+pe,i=Qe(),s=je(i,r);return xd(i,Ad(i,r)?yd(i,ut(),t,s.transform,n,s):s.transform(n))}function Ed(e,t,n,r){const i=e+pe,s=Qe(),o=je(s,i);return xd(s,Ad(s,i)?vd(s,ut(),t,o.transform,n,r,o):o.transform(n,r))}function Sd(e,t,n,r,i){const s=e+pe,o=Qe(),a=je(o,s);return xd(o,Ad(o,s)?wd(o,ut(),t,a.transform,n,r,i,a):a.transform(n,r,i))}function Cd(e,t,n,r,i,s){const o=e+pe,a=Qe(),u=je(a,o);return xd(a,Ad(a,o)?bd(a,ut(),t,u.transform,n,r,i,s,u):u.transform(n,r,i,s))}function kd(e,t,n){const r=e+pe,i=Qe(),s=je(i,r);return xd(i,Ad(i,r)?_d(i,ut(),t,s.transform,n,s):s.transform.apply(s,n))}function Ad(e,t){return e[1].data[t].pure}function xd(e,t){return ia.isWrapped(t)&&(t=ia.unwrap(t),e[ct()]=As),t}function Nd(e){return t=>{setTimeout(e,void 0,t)}}const Od=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,u=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=Nd(u),a&&(a=Nd(a)),c&&(c=Nd(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof i.w&&e.add(l),l}};function Dd(){return this._results[ra()]()}class Rd{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ra(),n=Rd.prototype;n[t]||(n[t]=Dd)}get changes(){return this._changes||(this._changes=new Od)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Rn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Pd{constructor(e){this.queryList=e,this.matches=null}clone(){return new Pd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ld{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ld(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Wd(e,t).matches&&this.queries[t].setDirty()}}class Md{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Fd{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Fd(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ud{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ud(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,Vd(t,i)),this.matchTNodeWithReadOption(e,t,ln(t,e,i,!1,!1))}else n===Fh?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ln(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===oh||r===Zh||r===Fh&&4&t.type)this.addMatch(t.index,-2);else{const n=ln(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Vd(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function jd(e,t,n,r){return-1===n?function(e,t){return 11&e.type?ih(e,t):4&e.type?jh(e,t):null}(t,e):-2===n?function(e,t,n){return n===oh?ih(t,e):n===Fh?jh(t,e):n===Zh?Wh(t,e):void 0}(e,t,r):hn(e,e[1],n,t)}function qd(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:jd(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function Bd(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=qd(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=ge;e<o.length;e++){const t=o[e];t[17]===t[3]&&Bd(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Bd(n[1],n,i,r)}}}}}return r}function $d(e){const t=Qe(),n=Je(),r=yt();vt(r+1);const i=Wd(n,r);if(e.dirty&&Be(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Bd(n,t,r,[]):qd(n,t,i,r);e.reset(s,ah),e.notifyOnChanges()}return!0}return!1}function Zd(e,t,n){const r=Je();r.firstCreatePass&&(Kd(r,new Md(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Gd(r,Qe(),t)}function zd(e,t,n,r){const i=Je();if(i.firstCreatePass){const s=et();Kd(i,new Md(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Gd(i,Qe(),n)}function Hd(){return e=Qe(),t=yt(),e[19].queries[t].queryList;var e,t}function Gd(e,t,n){const r=new Rd(4==(4&n));Qs(e,t,r,r.destroy),null===t[19]&&(t[19]=new Ld),t[19].queries.push(new Pd(r))}function Kd(e,t,n){null===e.queries&&(e.queries=new Fd),e.queries.track(new Ud(t,n))}function Wd(e,t){return e.queries.getByIndex(t)}function Yd(e,t){return jh(e,t)}const Qd=(()=>({"\u0275\u0275attribute":fa,"\u0275\u0275attributeInterpolate1":Ta,"\u0275\u0275attributeInterpolate2":Ea,"\u0275\u0275attributeInterpolate3":Sa,"\u0275\u0275attributeInterpolate4":Ca,"\u0275\u0275attributeInterpolate5":ka,"\u0275\u0275attributeInterpolate6":Aa,"\u0275\u0275attributeInterpolate7":xa,"\u0275\u0275attributeInterpolate8":Na,"\u0275\u0275attributeInterpolateV":Oa,"\u0275\u0275defineComponent":ee,"\u0275\u0275defineDirective":ue,"\u0275\u0275defineInjectable":T,"\u0275\u0275defineInjector":E,"\u0275\u0275defineNgModule":se,"\u0275\u0275definePipe":ce,"\u0275\u0275directiveInject":ja,"\u0275\u0275getInheritedFactory":gn,"\u0275\u0275inject":tr,"\u0275\u0275injectAttribute":yn,"\u0275\u0275invalidFactory":qa,"\u0275\u0275invalidFactoryDep":nr,"\u0275\u0275templateRefExtractor":Yd,"\u0275\u0275NgOnChangesFeature":Ee,"\u0275\u0275ProvidersFeature":Xl,"\u0275\u0275CopyDefinitionFeature":ta,"\u0275\u0275InheritDefinitionFeature":Ko,"\u0275\u0275nextContext":su,"\u0275\u0275namespaceHTML":Dt,"\u0275\u0275namespaceMathML":Ot,"\u0275\u0275namespaceSVG":Nt,"\u0275\u0275enableBindings":We,"\u0275\u0275disableBindings":Ye,"\u0275\u0275elementStart":Za,"\u0275\u0275elementEnd":za,"\u0275\u0275element":Ha,"\u0275\u0275elementContainerStart":Ga,"\u0275\u0275elementContainerEnd":Ka,"\u0275\u0275elementContainer":Wa,"\u0275\u0275pureFunction0":od,"\u0275\u0275pureFunction1":ad,"\u0275\u0275pureFunction2":ud,"\u0275\u0275pureFunction3":cd,"\u0275\u0275pureFunction4":ld,"\u0275\u0275pureFunction5":hd,"\u0275\u0275pureFunction6":dd,"\u0275\u0275pureFunction7":fd,"\u0275\u0275pureFunction8":pd,"\u0275\u0275pureFunctionV":gd,"\u0275\u0275getCurrentView":Ya,"\u0275\u0275restoreView":Xe,"\u0275\u0275listener":eu,"\u0275\u0275projection":uu,"\u0275\u0275syntheticHostProperty":Dc,"\u0275\u0275syntheticHostListener":tu,"\u0275\u0275pipeBind1":Td,"\u0275\u0275pipeBind2":Ed,"\u0275\u0275pipeBind3":Sd,"\u0275\u0275pipeBind4":Cd,"\u0275\u0275pipeBindV":kd,"\u0275\u0275projectionDef":au,"\u0275\u0275hostProperty":Oc,"\u0275\u0275property":Ba,"\u0275\u0275propertyInterpolate":cu,"\u0275\u0275propertyInterpolate1":lu,"\u0275\u0275propertyInterpolate2":hu,"\u0275\u0275propertyInterpolate3":du,"\u0275\u0275propertyInterpolate4":fu,"\u0275\u0275propertyInterpolate5":pu,"\u0275\u0275propertyInterpolate6":gu,"\u0275\u0275propertyInterpolate7":mu,"\u0275\u0275propertyInterpolate8":yu,"\u0275\u0275propertyInterpolateV":vu,"\u0275\u0275pipe":Id,"\u0275\u0275queryRefresh":$d,"\u0275\u0275viewQuery":Zd,"\u0275\u0275loadQuery":Hd,"\u0275\u0275contentQuery":zd,"\u0275\u0275reference":Ra,"\u0275\u0275classMap":Pu,"\u0275\u0275classMapInterpolate1":ic,"\u0275\u0275classMapInterpolate2":sc,"\u0275\u0275classMapInterpolate3":oc,"\u0275\u0275classMapInterpolate4":ac,"\u0275\u0275classMapInterpolate5":uc,"\u0275\u0275classMapInterpolate6":cc,"\u0275\u0275classMapInterpolate7":lc,"\u0275\u0275classMapInterpolate8":hc,"\u0275\u0275classMapInterpolateV":dc,"\u0275\u0275styleMap":Du,"\u0275\u0275styleMapInterpolate1":fc,"\u0275\u0275styleMapInterpolate2":pc,"\u0275\u0275styleMapInterpolate3":gc,"\u0275\u0275styleMapInterpolate4":mc,"\u0275\u0275styleMapInterpolate5":yc,"\u0275\u0275styleMapInterpolate6":vc,"\u0275\u0275styleMapInterpolate7":wc,"\u0275\u0275styleMapInterpolate8":bc,"\u0275\u0275styleMapInterpolateV":_c,"\u0275\u0275styleProp":Nu,"\u0275\u0275stylePropInterpolate1":Ic,"\u0275\u0275stylePropInterpolate2":Tc,"\u0275\u0275stylePropInterpolate3":Ec,"\u0275\u0275stylePropInterpolate4":Sc,"\u0275\u0275stylePropInterpolate5":Cc,"\u0275\u0275stylePropInterpolate6":kc,"\u0275\u0275stylePropInterpolate7":Ac,"\u0275\u0275stylePropInterpolate8":xc,"\u0275\u0275stylePropInterpolateV":Nc,"\u0275\u0275classProp":Ou,"\u0275\u0275advance":xs,"\u0275\u0275template":Da,"\u0275\u0275text":Gu,"\u0275\u0275textInterpolate":Ku,"\u0275\u0275textInterpolate1":Wu,"\u0275\u0275textInterpolate2":Yu,"\u0275\u0275textInterpolate3":Qu,"\u0275\u0275textInterpolate4":Ju,"\u0275\u0275textInterpolate5":Xu,"\u0275\u0275textInterpolate6":ec,"\u0275\u0275textInterpolate7":tc,"\u0275\u0275textInterpolate8":nc,"\u0275\u0275textInterpolateV":rc,"\u0275\u0275i18n":ql,"\u0275\u0275i18nAttributes":Bl,"\u0275\u0275i18nExp":$l,"\u0275\u0275i18nStart":Vl,"\u0275\u0275i18nEnd":jl,"\u0275\u0275i18nApply":Zl,"\u0275\u0275i18nPostprocess":zl,"\u0275\u0275resolveWindow":xi,"\u0275\u0275resolveDocument":Ni,"\u0275\u0275resolveBody":Oi,"\u0275\u0275setComponentScope":te,"\u0275\u0275setNgModuleScope":oe,"\u0275\u0275sanitizeHtml":hi,"\u0275\u0275sanitizeStyle":di,"\u0275\u0275sanitizeResourceUrl":pi,"\u0275\u0275sanitizeScript":gi,"\u0275\u0275sanitizeUrl":fi,"\u0275\u0275sanitizeUrlOrResourceUrl":vi,"\u0275\u0275trustConstantHtml":mi,"\u0275\u0275trustConstantResourceUrl":yi,forwardRef:g,resolveForwardRef:m}))();const Jd=[];let Xd=!1;function ef(e){return Array.isArray(e)?e.every(ef):!!m(e)}function tf(e,t){const n=Rn(t.declarations||z),r=rf(e);n.forEach(t=>{t.hasOwnProperty(H)?nf(le(t),r):t.hasOwnProperty(G)||t.hasOwnProperty(K)||(t.ngSelectorScope=e)})}function nf(e,t){e.directiveDefs=()=>Array.from(t.compilation.directives).map(e=>e.hasOwnProperty(H)?le(e):he(e)).filter(e=>!!e),e.pipeDefs=()=>Array.from(t.compilation.pipes).map(e=>de(e)),e.schemas=t.schemas,e.tView=null}function rf(e){if(!of(e))throw new Error(`${e.name} does not have a module def (\u0275mod property)`);const t=fe(e);if(null!==t.transitiveCompileScopes)return t.transitiveCompileScopes;const n={schemas:t.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return Di(t.imports).forEach(e=>{const t=e;if(!of(t))throw new Error(`Importing ${t.name} which does not have a \u0275mod property`);const r=rf(t);r.exported.directives.forEach(e=>n.compilation.directives.add(e)),r.exported.pipes.forEach(e=>n.compilation.pipes.add(e))}),Di(t.declarations).forEach(e=>{de(e)?n.compilation.pipes.add(e):n.compilation.directives.add(e)}),Di(t.exports).forEach(e=>{const t=e;if(of(t)){const e=rf(t);e.exported.directives.forEach(e=>{n.compilation.directives.add(e),n.exported.directives.add(e)}),e.exported.pipes.forEach(e=>{n.compilation.pipes.add(e),n.exported.pipes.add(e)})}else de(t)?n.exported.pipes.add(t):n.exported.directives.add(t)}),t.transitiveCompileScopes=n,n}function sf(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}function of(e){return!!fe(e)}let af=0;function uf(e,t){let n=null;lf(e,t||{}),Object.defineProperty(e,G,{get:()=>{if(null===n){const r=cf(e,t||{});n=Nn().compileDirective(Qd,r.sourceMapUrl,r.metadata)}return n},configurable:!1})}function cf(e,t){const n=e&&e.name,r=`ng:///${n}/\u0275dir.js`,i=Nn(),s=df(e,t);return s.typeSourceSpan=i.createParseSourceSpan("Directive",n,r),s.usesInheritance&&ff(e),{metadata:s,sourceMapUrl:r}}function lf(e,t){let n=null;Object.defineProperty(e,Q,{get:()=>{if(null===n){const r=cf(e,t),i=Nn();n=i.compileFactory(Qd,`ng:///${e.name}/\u0275fac.js`,{name:r.metadata.name,type:r.metadata.type,typeArgumentCount:0,deps:dr(e),target:i.FactoryTarget.Directive})}return n},configurable:!1})}function hf(e){return Object.getPrototypeOf(e.prototype)===Object.prototype}function df(e,t){const n=hr(),r=n.ownPropMetadata(e);return{name:e.name,type:e,selector:void 0!==t.selector?t.selector:null,host:t.host||Z,propMetadata:r,inputs:t.inputs||z,outputs:t.outputs||z,queries:gf(e,r,mf),lifecycle:{usesOnChanges:n.hasLifecycleHook(e,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!hf(e),exportAs:(i=t.exportAs,void 0===i?null:wf(i)),providers:t.providers||null,viewQueries:gf(e,r,yf)};var i}function ff(e){const t=Object.prototype;let n=Object.getPrototypeOf(e.prototype).constructor;for(;n&&n!==t;)he(n)||le(n)||!_f(n)||uf(n,null),n=Object.getPrototypeOf(n)}function pf(e,t){return{propertyName:e,predicate:(n=t.selector,"string"==typeof n?wf(n):m(n)),descendants:t.descendants,first:t.first,read:t.read?t.read:null,static:!!t.static,emitDistinctChangesOnly:!!t.emitDistinctChangesOnly};var n}function gf(e,t,n){const r=[];for(const i in t)if(t.hasOwnProperty(i)){const s=t[i];s.forEach(t=>{if(n(t)){if(!t.selector)throw new Error(`Can't construct a query for the property "${i}" of "${b(e)}" since the query selector wasn't defined.`);if(s.some(vf))throw new Error("Cannot combine @Input decorators with query decorators");r.push(pf(i,t))}})}return r}function mf(e){const t=e.ngMetadataName;return"ContentChild"===t||"ContentChildren"===t}function yf(e){const t=e.ngMetadataName;return"ViewChild"===t||"ViewChildren"===t}function vf(e){return"Input"===e.ngMetadataName}function wf(e){return e.split(",").map(e=>e.trim())}const bf=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function _f(e){const t=hr();if(bf.some(n=>t.hasLifecycleHook(e,n)))return!0;const n=t.propMetadata(e);for(const r in n){const e=n[r];for(let t=0;t<e.length;t++){const n=e[t],r=n.ngMetadataName;if(vf(n)||mf(n)||yf(n)||"Output"===r||"HostBinding"===r||"HostListener"===r)return!0}}return!1}const If=_n("Directive",(e={})=>e,void 0,void 0,(e,t)=>kf(e,t)),Tf=_n("Component",(e={})=>Object.assign({changeDetection:F.Default},e),If,void 0,(e,t)=>Cf(e,t)),Ef=En("Input",e=>({bindingPropertyName:e})),Sf=En("Output",e=>({bindingPropertyName:e})),Cf=function(e,t){let n=null;!function(e,t){mr(t)&&(pr.set(e,t),gr.add(e))}(e,t),lf(e,t),Object.defineProperty(e,H,{get:()=>{if(null===n){const r=Nn();if(mr(t)){const n=[`Component '${e.name}' is not resolved:`];throw t.templateUrl&&n.push(` - templateUrl: ${t.templateUrl}`),t.styleUrls&&t.styleUrls.length&&n.push(` - styleUrls: ${JSON.stringify(t.styleUrls)}`),n.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(n.join("\n"))}const i=null;let s=t.preserveWhitespaces;void 0===s&&(s=null!==i&&void 0!==i.preserveWhitespaces&&i.preserveWhitespaces);let o=t.encapsulation;void 0===o&&(o=null!==i&&void 0!==i.defaultEncapsulation?i.defaultEncapsulation:U.Emulated);const a=t.templateUrl||`ng:///${e.name}/template.html`,u=Object.assign(Object.assign({},df(e,t)),{typeSourceSpan:r.createParseSourceSpan("Component",e.name,a),template:t.template||"",preserveWhitespaces:s,styles:t.styles||z,animations:t.animations,directives:[],changeDetection:t.changeDetection,pipes:new Map,encapsulation:o,interpolation:t.interpolation,viewProviders:t.viewProviders||null});af++;try{u.usesInheritance&&ff(e),n=r.compileComponent(Qd,a,u)}finally{af--}if(0===af&&function(){if(!Xd){Xd=!0;try{for(let e=Jd.length-1;e>=0;e--){const{moduleType:t,ngModule:n}=Jd[e];n.declarations&&n.declarations.every(ef)&&(Jd.splice(e,1),tf(t,n))}}finally{Xd=!1}}}(),void 0!==e.ngSelectorScope){const t=rf(e.ngSelectorScope);nf(n,t)}}return n},configurable:!1})},kf=uf,Af=_n("NgModule",e=>e,void 0,void 0,(e,t)=>xf(e,t)),xf=function(e,t={}){!function(e,t,n=!1){const r=Rn(t.declarations||z);let i=null;Object.defineProperty(e,W,{configurable:!0,get:()=>(null===i&&(i=Nn().compileNgModule(Qd,`ng:///${e.name}/\u0275mod.js`,{type:e,bootstrap:Rn(t.bootstrap||z).map(m),declarations:r.map(m),imports:Rn(t.imports||z).map(m).map(sf),exports:Rn(t.exports||z).map(m).map(sf),schemas:t.schemas?Rn(t.schemas):null,id:t.id||null}),i.schemas||(i.schemas=[])),i)});let s=null;Object.defineProperty(e,Q,{get:()=>{if(null===s){const t=Nn();s=t.compileFactory(Qd,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,deps:dr(e),target:t.FactoryTarget.NgModule,typeArgumentCount:0})}return s},configurable:!1});let o=null;Object.defineProperty(e,x,{get:()=>{if(null===o){const n={name:e.name,type:e,providers:t.providers||z,imports:[(t.imports||z).map(m),(t.exports||z).map(m)]};o=Nn().compileInjector(Qd,`ng:///${e.name}/\u0275inj.js`,n)}return o},configurable:!1})}(e,t),function(e,t){Jd.push({moduleType:e,ngModule:t})}(e,t)},Nf=new Cn("Application Initializer");let Of=(()=>{class e{constructor(e){this.appInits=e,this.resolve=rh,this.reject=rh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Qa(t))e.push(t);else if(Xa(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(tr(Nf,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Df=new Cn("AppId"),Rf={provide:Df,useFactory:function(){return`${Pf()}${Pf()}${Pf()}`},deps:[]};function Pf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Lf=new Cn("Platform Initializer"),Mf=new Cn("Platform ID"),Ff=new Cn("appBootstrapListener");let Uf=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Vf=new Cn("LocaleId"),jf=new Cn("DefaultCurrencyCode");class qf{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Bf=function(e){return new sd(e)},$f=Bf,Zf=function(e){return Promise.resolve(Bf(e))},zf=function(e){const t=Bf(e),n=Di(fe(e).declarations).reduce((e,t)=>{const n=le(t);return n&&e.push(new ed(n)),e},[]);return new qf(t,n)},Hf=zf,Gf=function(e){return Promise.resolve(zf(e))};let Kf=(()=>{class e{constructor(){this.compileModuleSync=$f,this.compileModuleAsync=Zf,this.compileModuleAndAllComponentsSync=Hf,this.compileModuleAndAllComponentsAsync=Gf}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Wf=(()=>Promise.resolve(0))();function Yf(e){"undefined"==typeof Zone?Wf.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Qf{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Od(!1),this.onMicrotaskEmpty=new Od(!1),this.onStable=new Od(!1),this.onError=new Od(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=$.requestAnimationFrame,t=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call($,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,ep(e),e.isCheckStableRunning=!0,Xf(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),ep(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return tp(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),np(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return tp(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),np(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,ep(e),Xf(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qf.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qf.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Jf,rh,rh);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Jf={};function Xf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ep(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function tp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function np(e){e._nesting--,Xf(e)}class rp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Od,this.onMicrotaskEmpty=new Od,this.onStable=new Od,this.onError=new Od}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let ip=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qf.assertNotInAngularZone(),Yf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yf(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(tr(Qf))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})(),sp=(()=>{class e{constructor(){this._applications=new Map,cp.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return cp.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();class op{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function ap(e){cp=e}let up,cp=new op,lp=!0,hp=!1;function dp(){return hp=!0,lp}function fp(){if(hp)throw new Error("Cannot enable prod mode after platform setup.");lp=!1}const pp=new Cn("AllowMultipleToken");class gp{constructor(e,t){this.name=e,this.token=t}}function mp(e,t,n=[]){const r=`Platform: ${t}`,i=new Cn(r);return(t=[])=>{let s=yp();if(!s||s.injector.get(pp,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Do,useValue:"platform"});!function(e){if(up&&!up.destroyed&&!up.injector.get(pp,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");up=e.get(vp);const t=e.get(Lf,null);t&&t.forEach(e=>e())}(zo.create({providers:e,name:r}))}return function(e){const t=yp();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function yp(){return up&&!up.destroyed?up:null}let vp=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new rp:("zone.js"===e?void 0:e)||new Qf({enableLongStackTrace:dp(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Qf,useValue:n}];return n.run(()=>{const t=zo.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Si,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{_p(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Qa(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Of);return e.runInitializers(),e.donePromise.then(()=>(Hc(i.injector.get(Vf,qc)||qc),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=wp({},t);return function(e,t,n){const r=new sd(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(bp);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(tr(zo))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function wp(e,t){return Array.isArray(t)?t.reduce(wp,e):Object.assign(Object.assign({},e),t)}let bp=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Qf.assertNotInAngularZone(),Yf(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Qf.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>(0,u.x)()((0,a.O)(c)(e))))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof eh?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(qh),i=n.create(zo.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(ip,null),a=o&&i.injector.get(sp);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),_p(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;_p(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ff,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(tr(Qf),tr(zo),tr(Si),tr(nh),tr(Of))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function _p(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ip{}class Tp{}const Ep={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Sp=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Ep}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>Cp(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Cp(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(tr(Kf),tr(Tp,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function Cp(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const kp=function(e){return null},Ap=mp(null,"core",[{provide:Mf,useValue:"unknown"},{provide:vp,deps:[zo]},{provide:sp,deps:[]},{provide:Uf,deps:[]}]),xp=[{provide:bp,useClass:bp,deps:[Qf,zo,Si,nh,Of]},{provide:Xh,deps:[Qf],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Of,useClass:Of,deps:[[new or,Nf]]},{provide:Kf,useClass:Kf,deps:[]},Rf,{provide:Sh,useFactory:function(){return Ph},deps:[]},{provide:kh,useFactory:function(){return Lh},deps:[]},{provide:Vf,useFactory:function(e){return Hc(e=e||"undefined"!=typeof $localize&&$localize.locale||qc),e},deps:[[new sr(Vf),new or,new ur]]},{provide:jf,useValue:"USD"}];let Np=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(tr(bp))},e.\u0275mod=se({type:e}),e.\u0275inj=E({providers:xp}),e})()},9748:(e,t,n)=>{"use strict";n.d(t,{hO:()=>g,xv:()=>h,Dh:()=>l,GT:()=>u,cc:()=>m,on:()=>d,pX:()=>a});var r=n(5614),i=n(9001),s=n(8934);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),u=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:c,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(v("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),v("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,v=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8934:(e,t,n)=>{"use strict";n.d(t,{q4:()=>On,iC:()=>Gn,HU:()=>$n,vb:()=>Vn,JM:()=>Un,u3:()=>Wn});var r=n(5614),i=n(1858),s=n(6304),o=n(7964),a=n(5725),u=n(1947),c=n(8678);const l="@firebase/installations",h="0.5.8",d="w:0.5.8",f="FIS_v2",p=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function g(e){return e instanceof a.ZR&&e.code.includes("request-failed")}function m({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function y(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function v(e,t){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*(e,t){const n=(yield t.json()).error;return p.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function b({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function _(e,{refreshToken:t}){const n=b(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function I(e){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function E(e,t){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=m(e),i=b(e),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:f,appId:e.appId,sdkVersion:d})},a=yield I(()=>fetch(r,o));if(a.ok){const e=yield a.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:y(e.authToken)}}throw yield v("Create Installation",a)})).apply(this,arguments)}function C(e){return new Promise(t=>{setTimeout(t,e)})}const k=/^[cdef][\w-]{21}$/;function A(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return k.test(t)?t:""}catch(e){return""}}function x(e){return`${e.appName}!${e.appId}`}const N=new Map;function O(e,t){const n=x(e);D(n,t),function(e,t){const n=(!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=e=>{D(e.data.key,e.data.fid)}),R);n&&n.postMessage({key:e,fid:t}),0===N.size&&R&&(R.close(),R=null)}(n,t)}function D(e,t){const n=N.get(e);if(n)for(const r of n)r(t)}let R=null;const P="firebase-installations-store";let L=null;function M(){return L||(L=(0,a.X3)("firebase-installations-database",1,(e,t)=>{switch(t){case 0:e.createObjectStore(P)}})),L}function F(e,t){return U.apply(this,arguments)}function U(){return(U=(0,s.Z)(function*(e,t){const n=x(e),r=(yield M()).transaction(P,"readwrite"),i=r.objectStore(P),s=yield i.get(n);return yield i.put(t,n),yield r.complete,s&&s.fid===t.fid||O(e,t.fid),t})).apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(function*(e){const t=x(e),n=(yield M()).transaction(P,"readwrite");yield n.objectStore(P).delete(t),yield n.complete})).apply(this,arguments)}function q(e,t){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)(function*(e,t){const n=x(e),r=(yield M()).transaction(P,"readwrite"),i=r.objectStore(P),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.complete,!o||s&&s.fid===o.fid||O(e,o.fid),o})).apply(this,arguments)}function $(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(function*(e){let t;const n=yield q(e.appConfig,n=>{const r=z(n),i=H(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function z(e){return Q(e||{fid:A(),registrationStatus:0})}function H(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(p.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return G.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:K(e)}:{installationEntry:t}}function G(){return(G=(0,s.Z)(function*(e,t){try{const n=yield E(e,t);return F(e.appConfig,n)}catch(n){throw g(n)&&409===n.customData.serverCode?yield V(e.appConfig):yield F(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function K(e){return W.apply(this,arguments)}function W(){return(W=(0,s.Z)(function*(e){let t=yield Y(e.appConfig);for(;1===t.registrationStatus;)yield C(100),t=yield Y(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield $(e);return n||t}return t})).apply(this,arguments)}function Y(e){return q(e,e=>{if(!e)throw p.create("installation-not-found");return Q(e)})}function Q(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function J(e,t){return X.apply(this,arguments)}function X(){return(X=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=ee(e,n),i=_(e,n),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:d,appId:e.appId}})},a=yield I(()=>fetch(r,o));if(a.ok)return y(yield a.json());throw yield v("Generate Auth Token",a)})).apply(this,arguments)}function ee(e,{fid:t}){return`${m(e)}/${t}/authTokens:generate`}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,s.Z)(function*(e,t=!1){let n;const r=yield q(e.appConfig,r=>{if(!ue(r))throw p.create("not-registered");const i=r.authToken;if(!t&&ce(i))return r;if(1===i.requestStatus)return n=re(e,t),r;{if(!navigator.onLine)throw p.create("app-offline");const t=le(r);return n=oe(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,s.Z)(function*(e,t){let n=yield se(e.appConfig);for(;1===n.authToken.requestStatus;)yield C(100),n=yield se(e.appConfig);const r=n.authToken;return 0===r.requestStatus?te(e,t):r})).apply(this,arguments)}function se(e){return q(e,e=>{if(!ue(e))throw p.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function oe(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,s.Z)(function*(e,t){try{const n=yield J(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield F(e.appConfig,r),n}catch(n){if(!g(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield F(e.appConfig,n)}else yield V(e.appConfig);throw n}})).apply(this,arguments)}function ue(e){return void 0!==e&&2===e.registrationStatus}function ce(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function le(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function he(){return(he=(0,s.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield $(t);return r?r.catch(console.error):te(t).catch(console.error),n.fid})).apply(this,arguments)}function de(){return(de=(0,s.Z)(function*(e,t=!1){const n=e;return yield fe(n),(yield te(n,t)).token})).apply(this,arguments)}function fe(e){return pe.apply(this,arguments)}function pe(){return(pe=(0,s.Z)(function*(e){const{registrationPromise:t}=yield $(e);t&&(yield t)})).apply(this,arguments)}function ge(e){return p.create("missing-app-config-values",{valueName:e})}const me="installations";(0,o._registerComponent)(new u.wA(me,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw ge("App Configuration");if(!e.name)throw ge("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ge(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:(0,o._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new u.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,o._getProvider)(t,me).getImmediate();return{getId:()=>function(e){return he.apply(this,arguments)}(n),getToken:e=>function(e){return de.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,o.registerVersion)(l,h),(0,o.registerVersion)(l,h,"esm2017");const ye="@firebase/remote-config",ve="0.3.7",we=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class be{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function _e(e=navigator){return e.languages&&e.languages[0]||e.language}class Ie{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:_e()},a={method:"POST",headers:s,body:JSON.stringify(o)},u=fetch(i,a),c=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{yield Promise.race([u,c]),l=yield u}catch(g){let e="fetch-client-network";throw"AbortError"===g.name&&(e="fetch-timeout"),we.create(e,{originalErrorMessage:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let e;try{e=yield l.json()}catch(g){throw we.create("fetch-client-parse",{originalErrorMessage:g.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw we.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class Te{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,s.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return(0,s.Z)(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(we.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class Ee{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Se(e,t){const n=e.target.error||void 0;return we.create(t,{originalErrorMessage:n&&n.message})}const Ce="app_namespace_store";class ke{constructor(e,t,n,r=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(Se(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Ce,{keyPath:"compositeKey"})}}}catch(n){t(we.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([Ce],"readonly").objectStore(Ce),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(Se(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(we.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,s.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([Ce],"readwrite").objectStore(Ce),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(Se(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(u){s(we.create("storage-set",{originalErrorMessage:u&&u.message}))}})})()}delete(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([Ce],"readwrite").objectStore(Ce),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(Se(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(we.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Ae{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,s.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function xe(){return(xe=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw we.create("registration-window");if(!(0,a.hl)())throw we.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:u}=n.options;if(!i)throw we.create("registration-project-id");if(!s)throw we.create("registration-api-key");if(!u)throw we.create("registration-app-id");const l=new ke(u,n.name,t=t||"firebase"),h=new Ae(l),d=new c.Yd(ye);d.logLevel=c.in.ERROR;const f=new Ie(r,o.SDK_VERSION,t,i,s,u),p=new Te(f,l),g=new be(p,l,h,d),m=new Ee(n,g,h,l,d);return function(e){const t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(ye,ve),(0,o.registerVersion)(ye,ve,"esm2017");const Ne="/firebase-messaging-sw.js",Oe="/firebase-cloud-messaging-push-scope",De="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var Re,Pe;function Le(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Me(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Re||(Re={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Pe||(Pe={}));const Fe="fcm_token_details_db",Ue="fcm_token_object_Store";function Ve(e){return je.apply(this,arguments)}function je(){return(je=(0,s.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(Fe))return null;let t=null;return(yield(0,a.X3)(Fe,5,function(){var n=(0,s.Z)(function*(n,r,i,s){var o;if(r<2)return;if(!n.objectStoreNames.contains(Ue))return;const a=s.objectStore(Ue),u=yield a.index("fcmSenderId").get(e);if(yield a.clear(),u)if(2===r){const e=u;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:Le(e.vapidKey)}}}else if(3===r){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Le(e.auth),p256dh:Le(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Le(e.vapidKey)}}}else if(4===r){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Le(e.auth),p256dh:Le(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Le(e.vapidKey)}}}});return function(e,t,r,i){return n.apply(this,arguments)}}())).close(),yield(0,a.Lj)(Fe),yield(0,a.Lj)("fcm_vapid_details_db"),yield(0,a.Lj)("undefined"),qe(t)?t:null})).apply(this,arguments)}function qe(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}const Be="firebase-messaging-store";let $e=null;function Ze(){return $e||($e=(0,a.X3)("firebase-messaging-database",1,(e,t)=>{switch(t){case 0:e.createObjectStore(Be)}})),$e}function ze(e){return He.apply(this,arguments)}function He(){return(He=(0,s.Z)(function*(e){const t=Qe(e),n=yield Ze(),r=yield n.transaction(Be).objectStore(Be).get(t);if(r)return r;{const t=yield Ve(e.appConfig.senderId);if(t)return yield Ge(e,t),t}})).apply(this,arguments)}function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,s.Z)(function*(e,t){const n=Qe(e),r=(yield Ze()).transaction(Be,"readwrite");return yield r.objectStore(Be).put(t,n),yield r.complete,t})).apply(this,arguments)}function We(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,s.Z)(function*(e){const t=Qe(e),n=(yield Ze()).transaction(Be,"readwrite");yield n.objectStore(Be).delete(t),yield n.complete})).apply(this,arguments)}function Qe({appConfig:e}){return e.appId}const Je=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xe(e,t){return et.apply(this,arguments)}function et(){return(et=(0,s.Z)(function*(e,t){const n=yield ot(e),r=ut(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=yield fetch(st(e.appConfig),i);s=yield t.json()}catch(o){throw Je.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw Je.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Je.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,s.Z)(function*(e,t){const n=yield ot(e),r=ut(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${st(e.appConfig)}/${t.token}`,i);s=yield n.json()}catch(o){throw Je.create("token-update-failed",{errorInfo:o})}if(s.error)throw Je.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Je.create("token-update-no-token");return s.token})).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=(0,s.Z)(function*(e,t){const n={method:"DELETE",headers:yield ot(e)};try{const r=yield fetch(`${st(e.appConfig)}/${t}`,n),i=yield r.json();if(i.error)throw Je.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw Je.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function st({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function ot(e){return at.apply(this,arguments)}function at(){return(at=(0,s.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function ut({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==De&&(i.web.applicationPubKey=r),i}const ct=6048e5;function lt(e){return ht.apply(this,arguments)}function ht(){return(ht=(0,s.Z)(function*(e){const t=yield vt(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Le(t.getKey("auth")),p256dh:Le(t.getKey("p256dh"))},r=yield ze(e.firebaseDependencies);if(r){if(bt(r.subscriptionOptions,n))return Date.now()>=r.createTime+ct?pt(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield rt(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return mt(e.firebaseDependencies,n)}return mt(e.firebaseDependencies,n)})).apply(this,arguments)}function dt(e){return ft.apply(this,arguments)}function ft(){return(ft=(0,s.Z)(function*(e){const t=yield ze(e.firebaseDependencies);t&&(yield rt(e.firebaseDependencies,t.token),yield We(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function pt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)(function*(e,t){try{const n=yield tt(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Ge(e.firebaseDependencies,r),n}catch(n){throw yield dt(e),n}})).apply(this,arguments)}function mt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=(0,s.Z)(function*(e,t){const n={token:yield Xe(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Ge(e,n),n.token})).apply(this,arguments)}function vt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=(0,s.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Me(t)})})).apply(this,arguments)}function bt(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function _t(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function It(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function Tt(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Et(e){return Je.create("missing-app-config-values",{valueName:e})}Tt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Tt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class St{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw Et("App Configuration Object");if(!e.name)throw Et("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Et(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function Ct(e){return kt.apply(this,arguments)}function kt(){return(kt=(0,s.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(Ne,{scope:Oe}),e.swRegistration.update().catch(()=>{})}catch(t){throw Je.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function At(e,t){return xt.apply(this,arguments)}function xt(){return(xt=(0,s.Z)(function*(e,t){if(t||e.swRegistration||(yield Ct(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Je.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function Nt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,s.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=De)})).apply(this,arguments)}function Dt(){return(Dt=(0,s.Z)(function*(e,t){if(!navigator)throw Je.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Je.create("permission-blocked");return yield Nt(e,null==t?void 0:t.vapidKey),yield At(e,null==t?void 0:t.serviceWorkerRegistration),lt(e)})).apply(this,arguments)}function Rt(e,t,n){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(e,t,n){const r=Lt(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Lt(e){switch(e){case Pe.NOTIFICATION_CLICKED:return"notification_open";case Pe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Mt(){return(Mt=(0,s.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Pe.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(_t(n)):e.onMessageHandler.next(_t(n)));const r=n.data;It(r)&&"1"===r["google.c.a.e"]&&(yield Rt(e,n.messageType,r))})).apply(this,arguments)}const Ft="@firebase/messaging",Ut="0.9.12";function Vt(){return(Vt=(0,s.Z)(function*(){try{yield(0,a.eu)()}catch(e){return!1}return"undefined"!=typeof window&&(0,a.hl)()&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("messaging",e=>{const t=new St(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return Mt.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,o._registerComponent)(new u.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return Dt.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,o.registerVersion)(Ft,Ut),(0,o.registerVersion)(Ft,Ut,"esm2017");const jt="analytics",qt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bt="https://www.googletagmanager.com/gtag/js",$t=new c.Yd("@firebase/analytics");function Zt(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function zt(e,t){const n=document.createElement("script");n.src=`${Bt}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function Ht(e,t,n,r,i,s){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,s.Z)(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Zt(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){$t.error(a)}e("config",i,s)})).apply(this,arguments)}function Kt(e,t,n,r,i){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,s.Z)(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Zt(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){$t.error(s)}})).apply(this,arguments)}function Yt(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Bt))return t;return null}const Qt=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Jt=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Xt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function en(e){return tn.apply(this,arguments)}function tn(){return(tn=(0,s.Z)(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Xt(r)},s=qt.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Qt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function nn(e){return rn.apply(this,arguments)}function rn(){return(rn=(0,s.Z)(function*(e,t=Jt,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Qt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Qt.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new cn;return setTimeout((0,s.Z)(function*(){u.abort()}),void 0!==n?n:6e4),sn({appId:r,apiKey:i,measurementId:o},a,u,t)})).apply(this,arguments)}function sn(e,t,n){return on.apply(this,arguments)}function on(){return(on=(0,s.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Jt){const{appId:s,measurementId:o}=e;try{yield an(r,t)}catch(u){if(o)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}try{const t=yield en(e);return i.deleteThrottleMetadata(s),t}catch(u){if(!un(u)){if(i.deleteThrottleMetadata(s),o)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}const t=503===Number(u.customData.httpStatus)?(0,a.$s)(n,i.intervalMillis,30):(0,a.$s)(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,c),$t.debug(`Calling attemptFetch again in ${t} millis`),sn(e,c,r,i)}})).apply(this,arguments)}function an(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Qt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function un(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class cn{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function ln(){return hn.apply(this,arguments)}function hn(){return(hn=(0,s.Z)(function*(){if(!(0,a.hl)())return $t.warn(Qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(e){return $t.warn(Qt.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function dn(){return(dn=(0,s.Z)(function*(e,t,n,r,i,s,o){var a;const u=nn(e);u.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>$t.error(e)),t.push(u);const c=ln().then(e=>e?r.getId():void 0),[l,h]=yield Promise.all([u,c]);Yt()||zt(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class fn{constructor(e){this.app=e}_delete(){return delete pn[this.app.options.appId],Promise.resolve()}}let pn={},gn=[];const mn={};let yn,vn,wn="dataLayer",bn=!1;function _n(){return(_n=(0,s.Z)(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function In(){return(In=(0,s.Z)(function*(){if((0,a.ru)())return!1;if(!(0,a.zI)())return!1;if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}const Tn="@firebase/analytics",En="0.7.8";(0,o._registerComponent)(new u.wA(jt,(e,{options:t})=>function(e,t,n){!function(){const e=[];if((0,a.ru)()&&e.push("This is a browser extension environment."),(0,a.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Qt.create("invalid-analytics-context",{errorInfo:t});$t.warn(n.message)}}();const r=e.options.appId;if(!r)throw Qt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Qt.create("no-api-key");$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pn[r])throw Qt.create("already-exists",{id:r});if(!bn){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,s.Z)(function*(i,s,o){try{"event"===i?yield Kt(e,t,n,s,o):"config"===i?yield Ht(e,t,n,r,s,o):e("set",s)}catch(a){$t.error(a)}})).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window.gtag}}(pn,gn,mn);vn=e,yn=t,bn=!0}return pn[r]=function(e,t,n,r,i,s,o){return dn.apply(this,arguments)}(e,gn,mn,t,yn,wn,n),new fn(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new u.wA("analytics-internal",function(e){try{const t=e.getProvider(jt).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=(0,a.m9)(e),function(e,t,n,r,i){return _n.apply(this,arguments)}(vn,pn[e.app.options.appId],t,n,r).catch(e=>$t.error(e))}(t,e,n,r)}}catch(t){throw Qt.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)(Tn,En),(0,o.registerVersion)(Tn,En,"esm2017");var Sn=n(8489),Cn=n(8569),kn=n(8318),An=n(4019),xn=n(2893),Nn=n(45);const On=new r.GfV("7.3.0"),Dn="__angularfire_symbol__analyticsIsSupportedValue",Rn="__angularfire_symbol__analyticsIsSupported",Pn="__angularfire_symbol__remoteConfigIsSupportedValue",Ln="__angularfire_symbol__remoteConfigIsSupported",Mn="__angularfire_symbol__messagingIsSupportedValue",Fn="__angularfire_symbol__messagingIsSupported";function Un(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[Rn]||(globalThis[Rn]=function(){return In.apply(this,arguments)}().then(e=>globalThis[Dn]=e).catch(()=>globalThis[Dn]=!1)),globalThis[Fn]||(globalThis[Fn]=function(){return Vt.apply(this,arguments)}().then(e=>globalThis[Mn]=e).catch(()=>globalThis[Mn]=!1)),globalThis[Ln]||(globalThis[Ln]=function(){return xe.apply(this,arguments)}().then(e=>globalThis[Pn]=e).catch(()=>globalThis[Pn]=!1));const Vn=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function jn(){}class qn{constructor(e,t=Sn.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class Bn{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jn,{},jn,jn)),t.pipe((0,An.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $n=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new qn(Zone.current)),this.insideAngular=e.run(()=>new qn(Zone.current,Cn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Zn(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function zn(e){return Zn().ngZone.runOutsideAngular(()=>e())}function Hn(e){return Zn().ngZone.run(()=>e())}function Gn(e){return Zn(),(t=Zn(),function(e){return(e=e.lift(new Bn(t.ngZone))).pipe((0,xn.R)(t.outsideAngular),(0,Nn.QV)(t.insideAngular))})(e);var t}const Kn=(e,t)=>{const n=void 0;return function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),Hn(()=>e.apply(n,r))}},Wn=(e,t)=>function(){let n;const r=arguments;for(let e=0;e<arguments.length;e++)"function"==typeof r[e]&&(t&&(n||(n=Hn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jn,{},jn,jn)))),r[e]=Kn(r[e],n));const i=zn(()=>e.apply(this,r));if(!t){if(i instanceof kn.y){const e=Zn();return i.pipe((0,xn.R)(e.outsideAngular),(0,Nn.QV)(e.insideAngular))}return Hn(()=>i)}return i instanceof kn.y?i.pipe(Gn):i instanceof Promise?Hn(()=>new Promise((e,t)=>i.then(t=>Hn(()=>e(t)),e=>Hn(()=>t(e))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Hn(()=>i)}},6986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(5725),i=n(1947),s=n(7964),o=n(8678);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.23",void 0)},7964:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>T,_DEFAULT_ENTRY_NAME:()=>h,_addComponent:()=>g,_addOrOverwriteComponent:()=>m,_apps:()=>f,_clearComponents:()=>b,_components:()=>p,_getProvider:()=>v,_registerComponent:()=>y,_removeServiceInstance:()=>w,deleteApp:()=>k,getApp:()=>S,getApps:()=>C,initializeApp:()=>E,onLog:()=>N,registerVersion:()=>x,setLogLevel:()=>O});var r=n(6304),i=n(1947),s=n(8678),o=n(5725);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",c="0.7.22",l=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function g(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function y(e){const t=e.name;if(p.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of f.values())g(n,e);return!0}function v(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function w(e,t,n=h){v(e,t).clearInstance(n)}function b(){p.clear()}const _=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class I{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _.create("app-deleted",{appName:this._name})}}const T="9.7.0";function E(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw _.create("bad-app-name",{appName:String(r)});const s=f.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw _.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of p.values())a.addComponent(i);const u=new I(e,n,a);return f.set(r,u),u}function S(e=h){const t=f.get(e);if(!t)throw _.create("no-app",{appName:e});return t}function C(){return Array.from(f.values())}function k(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(e){const t=e.name;f.has(t)&&(f.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function x(e,t,n){var r;let s=null!==(r=d[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}y(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function N(e,t){if(null!==e&&"function"!=typeof e)throw _.create("invalid-log-argument");(0,s.Am)(e,t)}function O(e){(0,s.Ub)(e)}const D="firebase-heartbeat-store";let R=null;function P(){return R||(R=(0,o.X3)("firebase-heartbeat-database",1,(e,t)=>{switch(t){case 0:e.createObjectStore(D)}}).catch(e=>{throw _.create("storage-open",{originalErrorMessage:e.message})})),R}function L(){return(L=(0,r.Z)(function*(e){try{return(yield P()).transaction(D).objectStore(D).get(U(e))}catch(t){throw _.create("storage-get",{originalErrorMessage:t.message})}})).apply(this,arguments)}function M(e,t){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t){try{const n=(yield P()).transaction(D,"readwrite"),r=n.objectStore(D);return yield r.put(t,U(e)),n.complete}catch(n){throw _.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function U(e){return`${e.name}!${e.options.appId}`}class V{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new q(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}triggerHeartbeat(){var e=this;return(0,r.Z)(function*(){const t=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=j();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==n&&!e._heartbeatsCache.heartbeats.some(e=>e.date===n))return e._heartbeatsCache.heartbeats.push({date:n,agent:t}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,r.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=j(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),B(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),B(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),i=(0,o.L)(JSON.stringify({version:2,heartbeats:n}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),i})()}}function j(){return(new Date).toISOString().substring(0,10)}class q{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,r.Z)(function*(){return!!(0,o.hl)()&&(0,o.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,r.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(e){return L.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,r.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return M(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,r.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return M(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function B(e){return(0,o.L)(JSON.stringify({version:2,heartbeats:e})).length}y(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),y(new i.wA("heartbeat",e=>new V(e),"PRIVATE")),x(u,c,""),x(u,c,"esm2017"),x("fire-js","")},1947:(e,t,n)=>{"use strict";n.d(t,{wA:()=>s,H0:()=>u});var r=n(6304),i=n(5725);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,r.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===o?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class u{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},8678:(e,t,n)=>{"use strict";n.d(t,{in:()=>i,Yd:()=>c,Ub:()=>l,Am:()=>h});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},5725:(e,t,n)=>{"use strict";n.d(t,{BH:()=>c,LL:()=>C,ZR:()=>S,zI:()=>T,US:()=>s,tV:()=>a,L:()=>o,$s:()=>U,r3:()=>A,Sg:()=>l,ne:()=>L,vZ:()=>N,ZB:()=>u,Lj:()=>H,pd:()=>P,Rd:()=>E,m9:()=>V,z$:()=>h,jU:()=>p,ru:()=>g,d:()=>y,xb:()=>x,w1:()=>v,hl:()=>_,uI:()=>d,UG:()=>f,b$:()=>m,G6:()=>b,Mn:()=>w,X3:()=>z,xO:()=>D,zd:()=>R,eu:()=>I});var r=n(6304);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0;let c=(15&o)<<2|u>>6,l=63&u;a||(l=64,s||(c=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[c],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function g(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return h().indexOf("Electron/")>=0}function v(){const e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return h().indexOf("MSAppHost/")>=0}function b(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){return"object"==typeof indexedDB}function I(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function T(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}function E(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C.prototype.create)}}class C{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(k,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new S(r,`${this.serviceName}: ${s} (${r}).`,n)}}const k=/\{\$([^}]+)}/g;function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function N(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(O(n)&&O(s)){if(!N(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O(e){return null!==e&&"object"==typeof e}function D(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function R(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function P(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function L(e,t){const n=new M(e,t);return n.subscribe.bind(n)}class M{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F(){}function U(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function V(e){return e&&e._delegate?e._delegate:e}function j(e,t){return new Promise((n,r)=>{e.onsuccess=e=>{n(e.target.result)},e.onerror=e=>{var n;r(`${t}: ${null===(n=e.target.error)||void 0===n?void 0:n.message}`)}})}class q{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,t="readonly"){return new B(this._db.transaction.call(this._db,e,t))}createObjectStore(e,t){return new $(this._db.createObjectStore(e,t))}close(){this._db.close()}}class B{constructor(e){this._transaction=e,this.complete=new Promise((e,t)=>{this._transaction.oncomplete=function(){e()},this._transaction.onerror=()=>{t(this._transaction.error)},this._transaction.onabort=()=>{t(this._transaction.error)}})}objectStore(e){return new $(this._transaction.objectStore(e))}}class ${constructor(e){this._store=e}index(e){return new Z(this._store.index(e))}createIndex(e,t,n){return new Z(this._store.createIndex(e,t,n))}get(e){return j(this._store.get(e),"Error reading from IndexedDB")}put(e,t){return j(this._store.put(e,t),"Error writing to IndexedDB")}delete(e){return j(this._store.delete(e),"Error deleting from IndexedDB")}clear(){return j(this._store.clear(),"Error clearing IndexedDB object store")}}class Z{constructor(e){this._index=e}get(e){return j(this._index.get(e),"Error reading from IndexedDB")}}function z(e,t,n){return new Promise((r,i)=>{try{const s=indexedDB.open(e,t);s.onsuccess=e=>{r(new q(e.target.result))},s.onerror=e=>{var t;i(`Error opening indexedDB: ${null===(t=e.target.error)||void 0===t?void 0:t.message}`)},s.onupgradeneeded=e=>{n(new q(s.result),e.oldVersion,e.newVersion,new B(s.transaction))}}catch(s){i(`Error opening indexedDB: ${s.message}`)}})}function H(e){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e){return new Promise((t,n)=>{try{const r=indexedDB.deleteDatabase(e);r.onsuccess=()=>{t()},r.onerror=t=>{var r;n(`Error deleting indexedDB database "${e}": ${null===(r=t.target.error)||void 0===r?void 0:r.message}`)}}catch(r){n(`Error deleting indexedDB database "${e}": ${r.message}`)}})})).apply(this,arguments)}},1858:(e,t,n)=>{"use strict";n.d(t,{P2:()=>r.deleteApp,Mq:()=>r.getApp,C6:()=>r.getApps,ZF:()=>r.initializeApp,TP:()=>r.onLog,KN:()=>r.registerVersion,Ub:()=>r.setLogLevel});var r=n(7964);(0,r.registerVersion)("firebase","9.7.0","app")},9001:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(6986);r.Z.registerVersion("firebase","9.7.0","app-compat")},8172:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),i=n(6986),s=n(5725),o=n(7964);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var u=n(8678),c=n(1947);const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new u.Yd("@firebase/auth");function f(e,...t){d.logLevel<=u.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function p(e,...t){throw v(e,...t)}function g(e,...t){return v(e,...t)}function m(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&p(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function w(e,t,...n){if(!e)throw v(t,...n)}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function _(e,t){e||b(t)}const I=new Map;function T(e){_(e instanceof Function,"Expected a class definition");let t=I.get(e);return t?(_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,I.set(e,t),t)}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function S(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,_(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(S()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class x{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},O=new k(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function R(e,t,n,r){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(e,t,n,i,o={}){return L(e,o,(0,r.Z)(function*(){let r={},o={};i&&("GET"===t?o=i:r={body:JSON.stringify(i)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=yield e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),x.fetch()(V(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},r))}))})).apply(this,arguments)}function L(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new j(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw q(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);p(e,a)}}catch(i){if(i instanceof s.ZR)throw i;p(e,"network-request-failed")}})).apply(this,arguments)}function F(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield R(e,t,n,r,i);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function V(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?A(e.config,i):`${e.config.apiScheme}://${i}`}class j{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g(this.auth,"network-request-failed")),O.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=g(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function $(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function z(e,t){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function G(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(){return(K=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=Y(r);w(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:G(W(i.auth_time)),issuedAtTime:G(W(i.iat)),expirationTime:G(W(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function W(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(i){return f("Caught error parsing JWT payload as JSON",i),null}}function Q(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&X(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class te{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=G(this.lastLoginAt),this.creationTime=G(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Q(e,z(n,{idToken:r}));w(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?oe(s.providerUserInfo):[],a=se(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new te(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)})).apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield ne(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function se(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oe(e){return e.map(e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ae(){return(ae=(0,r.Z)(function*(e,t){const n=yield L(e,{},(0,r.Z)(function*(){const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=V(e,r,"/v1/token",`key=${i}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",x.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(void 0!==e.idToken,"internal-error"),w(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return w(t,"internal-error"),w(void 0!==t.exp,"internal-error"),w(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return w(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ae.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ue;return n&&(w("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(w("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(w("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ue,this.toJSON())}_performRefresh(){return b("not implemented")}}function ce(e,t){w("string"==typeof e||void 0===e,"internal-error",{appName:t})}class le{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new te(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Q(t,t.stsTokenManager.getToken(t.auth,e));return w(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return K.apply(this,arguments)}(this,e)}reload(){return function(e){return ie.apply(this,arguments)}(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new le(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ne(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Q(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:I,stsTokenManager:T}=t;w(v&&T,e,"internal-error");const E=ue.fromJSON(this.name,T);w("string"==typeof v,e,"internal-error"),ce(l,e.name),ce(h,e.name),w("boolean"==typeof b,e,"internal-error"),w("boolean"==typeof _,e,"internal-error"),ce(d,e.name),ce(f,e.name),ce(p,e.name),ce(g,e.name),ce(m,e.name),ce(y,e.name);const S=new le({uid:v,auth:e,email:h,emailVerified:b,displayName:l,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(S.providerData=I.map(e=>Object.assign({},e))),g&&(S._redirectEventId=g),S}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ue;r.updateFromServerResponse(t);const i=new le({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ne(i),i})()}}const he=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function de(e,t,n){return`firebase:${e}:${t}:${n}`}class fe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=de(this.userKey,r.apiKey,i),this.fullPersistenceKey=de("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?le._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new fe(T(he),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||T(he);const o=de(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=le._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new fe(s,e,n)):new fe(s,e,n)})()}}function pe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(be(t))return"Blackberry";if(_e(t))return"Webos";if(me(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(we(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function ge(e=(0,s.z$)()){return/firefox\//i.test(e)}function me(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,s.z$)()){return/crios\//i.test(e)}function ve(e=(0,s.z$)()){return/iemobile/i.test(e)}function we(e=(0,s.z$)()){return/android/i.test(e)}function be(e=(0,s.z$)()){return/blackberry/i.test(e)}function _e(e=(0,s.z$)()){return/webos/i.test(e)}function Ie(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function Te(e=(0,s.z$)()){return Ie(e)||we(e)||_e(e)||be(e)||/windows phone/i.test(e)||ve(e)}function Ee(e,t=[]){let n;switch(e){case"Browser":n=pe((0,s.z$)());break;case"Worker":n=`${pe((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Se{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=T(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield fe.create(n,e),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(w(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ne(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&w(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&w(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(T(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&T(e)||t._popupRedirectResolver;w(n,t,"argument-error"),t.redirectPersistenceManager=yield fe.create(t,[T(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return w(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,r.Z)(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(n["X-Firebase-Client"]=r),n})()}}function Ce(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ae(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}function Oe(e,t){return De.apply(this,arguments)}function De(){return(De=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:resetPassword",D(e,t))})).apply(this,arguments)}function Re(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Le(e,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:update",D(e,t))})).apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",D(e,t))})).apply(this,arguments)}function Ue(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:sendOobCode",D(e,t))})).apply(this,arguments)}function je(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Be(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ze(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))})).apply(this,arguments)}class Ye extends Ne{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ye(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ye(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Fe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:p(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Re(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:p(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Qe(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",D(e,t))})).apply(this,arguments)}class Xe extends Ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Xe(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))})).apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){const n=yield F(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const it={USER_NOT_FOUND:"user-not-found"};function st(){return(st=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),it)})).apply(this,arguments)}class ot extends Ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return nt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return rt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return st.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ot({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class at{constructor(e){var t,n,r,i,o,a;const u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);w(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new at(t)}catch(n){return null}}}let ut=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ye._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=at.parseLink(t);return w(n,"argument-error"),Ye._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ct{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lt extends ct{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends lt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return w("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return w(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new ht(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let dt=(()=>{class e extends lt{constructor(){super("facebook.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),ft=(()=>{class e extends lt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),pt=(()=>{class e extends lt{constructor(){super("github.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class gt extends Ne{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new gt(n,i):null}static _create(e,t){return new gt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mt extends ct{constructor(e){w(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return mt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return mt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=gt.fromJSON(e);return w(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return gt._create(n,t)}catch(r){return null}}}let yt=(()=>{class e extends lt{constructor(){super("twitter.com")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function vt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signUp",D(e,t))})).apply(this,arguments)}class bt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield le._fromIdTokenResponse(e,n,i),s=_t(n);return new bt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=_t(n);return new bt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function _t(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function It(){return(It=(0,r.Z)(function*(e){var t;const n=Ce(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new bt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield vt(n,{returnSecureToken:!0}),i=yield bt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Tt extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Tt.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Tt(e,t,n,r)}}function Et(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Tt._fromErrorAndOperation(e,n,t,r);throw n})}function St(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Ct(){return(Ct=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield xt(!0,n,t);const{providerUserInfo:r}=yield $(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=St(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function kt(e,t){return At.apply(this,arguments)}function At(){return(At=(0,r.Z)(function*(e,t,n=!1){const r=yield Q(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return bt._forOperation(e,"link",r)})).apply(this,arguments)}function xt(e,t,n){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,r.Z)(function*(e,t,n){yield ne(t);const r=!1===e?"provider-already-linked":"no-such-provider";w(St(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Ot(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield Q(e,Et(r,i,t,e),n);w(s.idToken,r,"internal-error");const o=Y(s.idToken);w(o,r,"internal-error");const{sub:a}=o;return w(e.uid===a,r,"user-mismatch"),bt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&p(r,"user-mismatch"),s}})).apply(this,arguments)}function Rt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield Et(e,r,t),s=yield bt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Lt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){return Rt(Ce(e),t)})).apply(this,arguments)}function Ft(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield xt(!1,n,t.providerId),kt(n,t)})).apply(this,arguments)}function Vt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Ot((0,s.m9)(e),t)})).apply(this,arguments)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithCustomToken",D(e,t))})).apply(this,arguments)}function $t(){return($t=(0,r.Z)(function*(e,t){const n=Ce(e),r=yield qt(n,{token:t,returnSecureToken:!0}),i=yield bt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Zt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?zt._fromServerResponse(e,t):p(e,"internal-error")}}class zt extends Zt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new zt(t)}}function Ht(e,t,n){var r;w((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),w(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(w(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(w(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gt(){return(Gt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&Ht(r,i,n),yield Be(r,i)})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t,n){yield Oe((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){yield Le((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Yt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield Oe(n,{oobCode:t}),i=r.requestType;switch(w(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":w(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":w(r.mfaInfo,n,"internal-error");default:w(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Zt._fromServerResponse(Ce(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t){const{data:n}=yield Yt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=Ce(e),i=yield vt(r,{returnSecureToken:!0,email:t,password:n}),s=yield bt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};w(n.handleCodeInApp,r,"argument-error"),n&&Ht(r,i,n),yield Ze(r,i)})).apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=ut.credentialWithLink(t,n||E());return w(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lt(r,i)})).apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:createAuthUri",D(e,t))})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:S()?E():"http://localhost"},{signinMethods:r}=yield nn((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Ht(n.auth,r,t);const{email:i}=yield je(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(){return(an=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Ht(r.auth,i,n);const{email:o}=yield He(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function un(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t){return R(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Q(r,un(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Q(e,Re(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class fn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class pn extends fn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class gn extends fn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends pn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class yn extends fn{constructor(e,t){super(e,"google.com",t)}}class vn extends pn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function wn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new fn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new gn(s,i);case"github.com":return new mn(s,i);case"google.com":return new yn(s,i);case"twitter.com":return new vn(s,i,e.screenName||null);case"custom":case"anonymous":return new fn(s,null);default:return new fn(s,r,i)}}(n)}class bn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new bn("enroll",e)}static _fromMfaPendingCredential(e){return new bn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return bn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return bn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class _n{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ce(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(e=>Zt._fromServerResponse(n,e));w(i.mfaPendingCredential,n,"internal-error");const o=bn._fromMfaPendingCredential(i.mfaPendingCredential);return new _n(o,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield bt._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return w(t.user,n,"internal-error"),bt._forOperation(t.user,t.operationType,s);default:p(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function In(e,t){return R(e,"POST","/v2/accounts/mfaEnrollment:start",D(e,t))}class Tn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Zt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Tn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return bn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield Q(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Q(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},R(s,"POST","/v2/accounts/mfaEnrollment:withdraw",D(s,o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const En=new WeakMap,Sn="__sak";class Cn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sn,"1"),this.storage.removeItem(Sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kn=(()=>{class e extends Cn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return me(e)||Ie(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Te(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),An=(()=>{class e extends Cn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let xn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Nn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class On{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Nn("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Dn(){return window}function Rn(){return void 0!==Dn().WorkerGlobalScope&&"function"==typeof Dn().importScripts}function Pn(){return(Pn=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Ln="firebaseLocalStorageDb",Mn="firebaseLocalStorage",Fn="fbase_key";class Un{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vn(e,t){return e.transaction([Mn],t?"readwrite":"readonly").objectStore(Mn)}function jn(){const e=indexedDB.open(Ln,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Mn,{keyPath:Fn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Mn)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Ln);return new Un(e).toPromise()}(),t(yield jn()))}))})}function qn(e,t,n){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(e,t,n){const r=Vn(e,!0).put({[Fn]:t,value:n});return new Un(r).toPromise()})).apply(this,arguments)}function $n(){return($n=(0,r.Z)(function*(e,t){const n=Vn(e,!1).get(t),r=yield new Un(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Zn(e,t){const n=Vn(e,!0).delete(t);return new Un(n).toPromise()}const zn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield jn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return Rn()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=xn._getInstance(Rn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Pn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new On(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield jn();return yield qn(e,Sn,"1"),yield Zn(e,Sn),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>qn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return $n.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>Zn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Vn(e,!1).getAll();return new Un(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function Hn(e,t){return R(e,"POST","/v2/accounts/mfaSignIn:start",D(e,t))}function Gn(){return(Gn=(0,r.Z)(function*(e){return(yield R(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kn(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=g("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Wn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Yn=1e12;class Qn{constructor(e){this.auth=e,this.counter=Yn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Jn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Yn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Yn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Yn))||void 0===n||n.execute(),""})()}}class Jn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;w(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xn=Wn("rcb"),er=new k(3e4,6e4);class tr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Dn().grecaptcha}load(e,t=""){return w(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Dn().grecaptcha):new Promise((n,r)=>{const i=Dn().setTimeout(()=>{r(g(e,"network-request-failed"))},er.get());Dn()[Xn]=()=>{Dn().clearTimeout(i),delete Dn()[Xn];const s=Dn().grecaptcha;if(!s)return void r(g(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Kn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Xn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(g(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Dn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(e){return(0,r.Z)(function*(){return new Qn(e)})()}clearedOneInstance(){}}const rr="recaptcha",ir={theme:"light",type:"image"};class sr{constructor(e,t=Object.assign({},ir),n){this.parameters=t,this.type=rr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ce(n),this.isInvisible="invisible"===this.parameters.size,w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;w(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new tr,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){w(!this.parameters.sitekey,this.auth,"argument-error"),w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Dn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){w(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){w(S()&&!Rn(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Gn.apply(this,arguments)}(e.auth);w(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class or{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ot._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=Ce(e),i=yield lr(r,t,(0,s.m9)(n));return new or(i,e=>Lt(r,e))})).apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield xt(!1,r,"phone");const i=yield lr(r.auth,t,(0,s.m9)(n));return new or(i,e=>Ft(r,e))})).apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield lr(r.auth,t,(0,s.m9)(n));return new or(i,e=>Vt(r,e))})).apply(this,arguments)}function lr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(w("string"==typeof i,e,"argument-error"),w(n.type===rr,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return w("enroll"===t.type,e,"internal-error"),(yield In(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{w("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return w(n,e,"missing-multi-factor-info"),(yield Hn(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield et(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function dr(){return(dr=(0,r.Z)(function*(e,t){yield kt((0,s.m9)(e),t)})).apply(this,arguments)}let fr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ce(t)}verifyPhoneNumber(e,t){return lr(this.auth,e,(0,s.m9)(t))}static credential(e,t){return ot._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ot._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function pr(e,t){return t?T(t):(w(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class gr extends Ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Rt(e.auth,new gr(e),e.bypassAuthState)}function yr(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),Ot(n,new gr(e),e.bypassAuthState)}function vr(e){return wr.apply(this,arguments)}function wr(){return(wr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),kt(n,new gr(e),e.bypassAuthState)})).apply(this,arguments)}class br{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return yr;default:p(this.auth,"internal-error")}}resolve(e){_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _r=new k(2e3,1e4);function Ir(){return(Ir=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,ct);const i=pr(r,n);return new Sr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);return new Sr(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function Er(){return(Er=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);return new Sr(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Sr=(()=>{class e extends br{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return w(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){_(1===e.filter.length,"Popup operations only handle one event");const t=Nn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(g(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,_r.get())};e()}}return e.currentPopupAction=null,e})();const Cr=new Map;class kr extends br{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Cr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return Ar.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Cr.set(t.auth._key(),n)}return t.bypassAuthState||Cr.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function Ar(){return(Ar=(0,r.Z)(function*(e,t){const n=Dr(t),r=Or(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function xr(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,r.Z)(function*(e,t){return Or(e)._set(Dr(t),"true")})).apply(this,arguments)}function Or(e){return T(e._redirectPersistence)}function Dr(e){return de("pendingRedirect",e.config.apiKey,e.name)}function Rr(){return(Rr=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,ct);const i=pr(r,n);return yield xr(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);yield xr(i,r.auth);const o=yield Vr(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);yield xt(!1,r,t.providerId),yield xr(i,r.auth);const o=yield Vr(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t){return yield Ce(e)._initializationPromise,Fr(e,t,!1)})).apply(this,arguments)}function Fr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,r.Z)(function*(e,t,n=!1){const r=Ce(e),i=pr(r,t),s=new kr(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Vr(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const t=Nn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class qr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $r(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!$r(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(g(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Br(e))}saveEventToCache(e){this.cachedEventUids.add(Br(e)),this.lastProcessedEventTime=Date.now()}}function Br(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function $r({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Zr(e){return zr.apply(this,arguments)}function zr(){return(zr=(0,r.Z)(function*(e,t={}){return R(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Hr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Kr(){return(Kr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield Zr(e);for(const r of t)try{if(Wr(r))return}catch(n){}p(e,"unauthorized-domain")})).apply(this,arguments)}function Wr(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Gr.test(n))return!1;if(Hr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yr=new k(3e4,6e4);function Qr(){const e=Dn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Jr=null;function Xr(e){return Jr=Jr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(g(e,"network-request-failed"))},timeout:Yr.get()})}if(null===(i=null===(r=Dn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Dn().gapi)||void 0===s?void 0:s.load)){const t=Wn("iframefcb");return Dn()[t]=()=>{gapi.load?o():n(g(e,"network-request-failed"))},Kn(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Jr=null,e})}(e),Jr}const ei=new k(5e3,15e3),ti={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ri(e){const t=e.config;w(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=ni.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ii(){return(ii=(0,r.Z)(function*(e){const t=yield Xr(e),n=Dn().gapi;return w(n,e,"internal-error"),t.open({where:document.body,url:ri(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ti,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=g(e,"network-request-failed"),s=Dn().setTimeout(()=>{r(i)},ei.get());function o(){Dn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const si={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ai(e,t,n,r,i,a){w(e.config.authDomain,e,"auth-domain-config-required"),w(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof ct){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof lt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const ui="webStorageSupport";class ci extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return b("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ci(e)}_finalizeEnroll(e,t,n){return function(e,t){return R(e,"POST","/v2/accounts/mfaEnrollment:finalize",D(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return R(e,"POST","/v2/accounts/mfaSignIn:finalize",D(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let li=(()=>{class e{constructor(){}static assertion(e){return ci._fromCredential(e)}}return e.FACTOR_ID="phone",e})();var hi,di="@firebase/auth",fi="0.19.12";class pi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gi(){return window}function mi(){return(mi=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=gi();_(t.sessionId,"AuthEvent did not contain a session ID");const s=yield wi(t.sessionId),o={};return Ie()?o.ibi=i.packageName:we()?o.apn=i.packageName:p(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ai(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function yi(){return(yi=(0,r.Z)(function*(e){const{BuildInfo:t}=gi(),n={};Ie()?n.iosBundleId=t.packageName:we()?n.androidPackageName=t.packageName:p(e,"operation-not-supported-in-this-environment"),yield Zr(e,n)})).apply(this,arguments)}function vi(){return(vi=(0,r.Z)(function*(e,t,n){const{cordova:r}=gi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function u(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(g(e,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),we()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function wi(e){return bi.apply(this,arguments)}function bi(){return(bi=(0,r.Z)(function*(e){const t=_i(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _i(e){if(_(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}hi="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{w(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),w(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:hi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ee(hi)},o=new Se(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(T);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{return t=Ce(e.getProvider("auth").getImmediate()),new pi(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)(di,fi,void 0),(0,o.registerVersion)(di,fi,"esm2017");class Ii extends qr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function Ti(e){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,r.Z)(function*(e){const t=yield Ci()._get(ki(e));return t&&(yield Ci()._remove(ki(e))),t})).apply(this,arguments)}function Si(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ci(){return T(kn)}function ki(e){return de("authEvent",e.config.apiKey,e.name)}function Ai(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function xi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:g("no-auth-event")}}function Ni(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Oi(e=(0,s.z$)()){return!("file:"!==Ni()&&"ionic:"!==Ni()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Di(){try{const e=self.localStorage,t=Nn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(e){return Ri()&&(0,s.hl)()}return!1}function Ri(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pi(){return("http:"===Ni()||"https:"===Ni()||(0,s.ru)()||Oi())&&!((0,s.b$)()||(0,s.UG)())&&Di()&&!Ri()}function Li(){return Oi()&&"undefined"!=typeof document}function Mi(){return(Mi=(0,r.Z)(function*(){return!!Li()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},Ui=w,Vi="persistence";function ji(e){return qi.apply(this,arguments)}function qi(){return(qi=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Bi(),n=de(Vi,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())})).apply(this,arguments)}function Bi(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const $i=w;class Zi{constructor(){this.browserResolver=T(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=An,this._completeRedirectFn=Fr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;_(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=ai(e,t,n,E(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},si),{width:r.toString(),height:i.toString(),top:o,left:a}),l=(0,s.z$)().toLowerCase();n&&(u=ye(l)?"_blank":n),ge(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return Ie(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new oi(null);const d=window.open(t||"",u,h);w(d,e,"popup-blocked");try{d.focus()}catch(f){}return new oi(d)}(e,a,Nn())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=ai(e,t,n,E(),i),Dn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(_(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ii.apply(this,arguments)}(e),r=new qr(e);return n.register("authEvent",t=>(w(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ui,{type:ui},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Kr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Te()||me()||Ie()}}),this.cordovaResolver=T(class{constructor(){this._redirectPersistence=An,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new Ii(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){p(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,u,c,l;const h=gi();w("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),w(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),w("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),w("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),w("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Cr.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Si(),postBody:null,tenantId:e.tenantId,error:g(e,"no-auth-event")}}(e,n,i);yield function(e,t){return Ci()._set(ki(e),t)}(e,a);const u=yield function(e,t,n){return mi.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=gi();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);return function(e,t,n){return vi.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=gi(),o=setTimeout((0,r.Z)(function*(){yield Ti(e),t.onEvent(xi())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield Ti(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Ai(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ai(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ai(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ai(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?g(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||xi())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;gi().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=An,this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Li()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $i(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Mi.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function zi(e){return e.unwrap()}function Hi(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return fr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=ft;break;case"facebook.com":r=dt;break;case"github.com":r=pt;break;case"twitter.com":r=yt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?gt._create(n,o):Xe._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ht(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Gi(e,t){return t.catch(t=>{throw t instanceof s.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Yi(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return w(t.customData.operationType,r,"argument-error"),w(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_n._fromError(r,i)}(e,t));else if(r){const e=Hi(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:(n=e,Hi(n)),additionalUserInfo:wn(e),user:Qi.getOrCreate(t)};var n})}function Ki(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Gi(e,n.confirm(t))}})).apply(this,arguments)}class Yi{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gi(zi(this.auth),this.resolver.resolveSignIn(e))}}let Qi=(()=>{class e{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return En.has(t)||En.set(t,Tn._fromUser(t)),En.get(t)}(e)}static getOrCreate(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Ft(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Ki(n.auth,function(e,t,n){return ur.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,function(e,t,n){return Er.apply(this,arguments)}(t._delegate,e,Zi))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield ji(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Lr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Zi)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Vt(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Ki(this.auth,function(e,t,n){return cr.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Gi(this.auth,function(e,t,n){return Tr.apply(this,arguments)}(this._delegate,e,Zi))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield ji(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Zi)})()}sendEmailVerification(e){return function(e,t){return on.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return Ct.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return hn((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return hn((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return dr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return ln.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return an.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}return e.USER_MAP=new WeakMap,e})();const Ji=w;let Xi=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ji(n,"invalid-api-key",{appName:e.name}),Ji(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?Zi:void 0;this._delegate=t.initialize({options:{persistence:ts(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ce(e);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ae(t),{host:o,port:a}=function(e){const t=Ae(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:xe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:xe(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Wt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Yt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Kt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Gi(n._delegate,function(e,t,n){return Xt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=at.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Ji(Pi(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Mr.apply(this,arguments)}(e._delegate,Zi);return t?Gi(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ce(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=es(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=es(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Gt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Ui(Object.values(Fi).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Ui(t!==Fi.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Ui(t===Fi.NONE,e,"unsupported-persistence-type"):Ri()?Ui(t===Fi.NONE||t===Fi.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Ui(t===Fi.NONE||Di(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Fi.SESSION:n=An;break;case Fi.LOCAL:n=(yield T(zn)._isAvailable())?zn:kn;break;case Fi.NONE:n=he;break;default:return p("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gi(this._delegate,function(e){return It.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Gi(this._delegate,Lt(this._delegate,e))}signInWithCustomToken(e){return Gi(this._delegate,function(e,t){return $t.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gi(this._delegate,function(e,t,n){return Lt((0,s.m9)(e),ut.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Gi(this._delegate,function(e,t,n){return tn.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ki(this._delegate,function(e,t,n){return ar.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Ji(Pi(),t._delegate,"operation-not-supported-in-this-environment"),Gi(t._delegate,function(e,t,n){return Ir.apply(this,arguments)}(t._delegate,e,Zi))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Ji(Pi(),t._delegate,"operation-not-supported-in-this-environment"),yield ji(t._delegate),function(e,t,n){return function(e,t,n){return Rr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Zi)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Jt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Fi,e})();function es(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Qi.getOrCreate(e)),error:t,complete:n}}function ts(e,t){const n=function(e,t){const n=Bi();if(!n)return[];const r=de(Vi,e,t);switch(n.getItem(r)){case Fi.NONE:return[he];case Fi.LOCAL:return[zn,An];case Fi.SESSION:return[An];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(zn)||n.push(zn),"undefined"!=typeof window)for(const r of[kn,An])n.includes(r)||n.push(r);return n.includes(he)||n.push(he),n}let ns=(()=>{class e{constructor(){this.providerId="phone",this._delegate=new fr(zi(i.Z.auth()))}static credential(e,t){return fr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}return e.PHONE_SIGN_IN_METHOD=fr.PHONE_SIGN_IN_METHOD,e.PROVIDER_ID=fr.PROVIDER_ID,e})();const rs=w;var is;(is=i.Z).INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xi(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ut,FacebookAuthProvider:dt,GithubAuthProvider:pt,GoogleAuthProvider:ft,OAuthProvider:ht,SAMLAuthProvider:mt,PhoneAuthProvider:ns,PhoneMultiFactorGenerator:li,RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;rs(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:yt,Auth:Xi,AuthCredential:Ne,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),is.registerVersion("@firebase/auth-compat","0.2.12")},3103:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(653),i=n(878),s=n(1225);let o=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})()},8318:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(6673),i=n(5331),s=n(7498),o=n(6197),a=n(3392),u=n(1484);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},7498:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(1484),i=n(4294);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},5959:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),s=n(7570),o=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},9291:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(7570);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},6673:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(5024),i=n(7498),s=n(7570),o=n(5331),a=n(1484),u=n(4294);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},7570:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(8470),i=n(2056),s=n(5024);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let a=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if((0,s.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){t=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(u(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var t;return e.EMPTY=((t=new e).closed=!0,t),e})();function u(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}},1484:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),s=n(6015);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2875:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),s=n(7570),o=n(1564);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},653:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>s});var r=n(8318);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},9764:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(8318),i=n(6015),s=n(7570),o=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},9342:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(8318),i=n(625),s=n(2570);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},1906:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(8318),i=n(6163),s=n(7471),o=n(9342);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},878:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(6163),i=n(9342),s=n(2570);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},1225:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(8318);function i(e,t){return new r.y(t?n=>t.schedule(s,0,{error:e,subscriber:n}):t=>t.error(e))}function s({error:e,subscriber:t}){t.error(e)}},9996:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(6673);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},7471:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(3982),i=n(3392);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},3982:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6598:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var r=n(2875);function i(e,t){return function(n){let i;if(i="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new s(i,t));const o=Object.create(n,r.N);return o.source=n,o.subjectFactory=i,o}}class s{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i}}},45:(e,t,n)=>{"use strict";n.d(t,{QV:()=>s,ht:()=>a});var r=n(6673),i=n(3103);function s(e,t=0){return function(n){return n.lift(new o(e,t))}}class o{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))}}class a extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(e,this.destination)))}_next(e){this.scheduleMessage(i.P.createNext(e))}_error(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class u{constructor(e,t){this.notification=e,this.destination=t}}},1564:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(6673);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2893:(e,t,n)=>{"use strict";n.d(t,{R:()=>m});var r=n(8318);let i=1;const s=(()=>Promise.resolve())(),o={};function a(e){return e in o&&(delete o[e],!0)}const u={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var c=n(8277);class l extends c.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=u.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(u.clearImmediate(t),e.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const f=new d(l);var p=n(2293);class g extends r.y{constructor(e,t=0,n=f){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,p.k)(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(e,t=0,n=f){return new g(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function m(e,t=0){return function(n){return n.lift(new y(e,t))}}class y{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new g(t,this.delay,this.scheduler).subscribe(e)}}},4019:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(6673),i=n(6054),s=n(5024);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i.Z,this._tapError=i.Z,this._tapComplete=i.Z,this._tapError=n||i.Z,this._tapComplete=r||i.Z,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i.Z,this._tapError=t.error||i.Z,this._tapComplete=t.complete||i.Z)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},2570:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(8318),i=n(7570);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(7570);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},1098:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},8569:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,P:()=>s});var r=n(8277);const i=new(n(1098).v)(r.o),s=i},8489:(e,t,n)=>{"use strict";n.d(t,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}var s=n(1098);class o extends s.v{}const a=new o(i),u=a},5686:(e,t,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,{hZ:()=>i});const i=r()},6197:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4294:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},3392:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},8470:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))()},9653:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},5024:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},2293:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(8470);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},2056:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},5168:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},6163:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},6054:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},6015:(e,t,n)=>{"use strict";n.d(t,{s:()=>l});var r=n(625),i=n(4294),s=n(5686),o=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=e=>{if(e&&"function"==typeof e[o.L])return l=e,e=>{const t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,l}},625:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},6067:(e,t,n)=>{"use strict";var r=n(5614);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:u,token:e,providedIn:"platform"}),e})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function p(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let m=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new w((0,r.LFG)(a),t&&t.origin||"")}const v=new r.OlP("appBaseHref");let w=(()=>{class e extends m{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return f(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e extends m{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=f(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=p(T(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,T(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(m),r.LFG(a))},e.normalizeQueryParams=g,e.joinWithSlash=f,e.stripTrailingSlash=p,e.\u0275prov=(0,r.Yz7)({factory:I,token:e,providedIn:"root"}),e})();function I(){return new _((0,r.LFG)(m),(0,r.LFG)(a))}function T(e){return e.replace(/\/index.html$/,"")}var E=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});const S=r.kL8;class C{}let k=(()=>{class e extends C{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(S(t||this.locale)(e)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),A=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})(),x=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){O("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){O("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function O(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}let D=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})();class R{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class P{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const L=new P,M=new R;let F=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return L;if((0,r.F4k)(t))return M;throw Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:C,useClass:k}]}),e})();function V(e){return"browser"===e}function j(e){return"server"===e}let q=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new B((0,r.LFG)(o),window)}),e})();class B{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$(this.window.history)||$(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(aw){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(aw){return!1}}}function $(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Z extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new Z,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(H=H||document.querySelector("base"),H?H.getAttribute("href"):null);return null==t?null:function(e){z=z||document.createElement("a"),z.setAttribute("href",e);const t=z.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let z,H=null;const G=new r.OlP("TRANSITION_ID"),K=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[G,o,r.zs3],multi:!0}];class W{static init(){(0,r.VLi)(new W)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Y=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const Q=new r.OlP("EventManagerPlugins");let J=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Q),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class X{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let ee=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),te=(()=>{class e extends ee{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(ne),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ne))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function ne(e){s().remove(e)}const re={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ie=/%COMP%/g;function se(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?se(e,i,n):(i=i.replace(ie,e),n.push(i))}return n}function oe(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let ae=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ue(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new ce(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new le(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=se(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(J),r.LFG(te),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ue{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(re[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=re[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=re[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,oe(n)):this.eventManager.addEventListener(e,t,oe(n))}}class ce extends ue{constructor(e,t,n,r){super(e),this.component=n;const i=se(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ie,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ie,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class le extends ue{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=se(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let he=(()=>{class e extends X{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const de=["alt","control","meta","shift"],fe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ge={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let me=(()=>{class e extends X{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(de.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&pe.hasOwnProperty(t)&&(t=pe[t]))}return fe[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),de.forEach(r=>{r!=n&&(0,ge[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const ye=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){Z.makeCurrent(),W.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ve=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Q,useClass:he,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:Q,useClass:me,multi:!0,deps:[o]},[],{provide:ae,useClass:ae,deps:[J,te,r.AFp]},{provide:r.FYo,useExisting:ae},{provide:ee,useExisting:te},{provide:te,useClass:te,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:J,useClass:J,deps:[Q,r.R0b]},{provide:class{},useClass:Y,deps:[]},[]];let we=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:G,useExisting:r.AFp},K]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:ve,imports:[U,r.hGG]}),e})();"undefined"!=typeof window&&window;var be=n(9764),_e=n(878),Ie=n(5959),Te=n(3895);class Ee extends Ie.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Te.N;return this._value}next(e){super.next(this._value=e)}}var Se=n(6163),Ce=n(8470),ke=n(6673);class Ae extends ke.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class xe extends ke.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ne=n(6015),Oe=n(8318);function De(e,t,n,r,i=new xe(e,n,r)){if(!i.closed)return t instanceof Oe.y?t.subscribe(i):(0,Ne.s)(t)(i)}var Re=n(9342);const Pe={};class Le{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Me(e,this.resultSelector))}}class Me extends Ae{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Pe),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(De(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===Pe?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Fe=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var Ue=n(7471);function Ve(...e){return(0,Ue.J)(1)((0,_e.of)(...e))}var je=n(653);function qe(e){return new Oe.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,be.D)(n):(0,je.c)()).subscribe(t)})}var Be=n(2875),$e=n(9996),Ze=n(6882);function ze(e,t){return"function"==typeof t?n=>n.pipe(ze((n,r)=>(0,be.D)(e(n,r)).pipe((0,$e.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new He(e))}class He{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ge(e,this.project))}}class Ge extends Ze.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new Ze.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ze.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Ke=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function We(e){return t=>0===e?(0,je.c)():t.lift(new Ye(e))}class Ye{constructor(e){if(this.total=e,this.total<0)throw new Ke}call(e,t){return t.subscribe(new Qe(e,this.total))}}class Qe extends ke.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function Je(...e){const t=e[e.length-1];return(0,Se.K)(t)?(e.pop(),n=>Ve(e,n,t)):t=>Ve(e,t)}function Xe(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new et(e,t,n))}}class et{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new tt(e,this.accumulator,this.seed,this.hasSeed))}}class tt extends ke.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function nt(e,t){return function(n){return n.lift(new rt(e,t))}}class rt{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new it(e,this.predicate,this.thisArg))}}class it extends ke.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function st(e){return function(t){const n=new ot(e),r=t.lift(n);return n.caught=r}}class ot{constructor(e){this.selector=e}call(e,t){return t.subscribe(new at(e,this.selector,this.caught))}}class at extends Ze.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new Ze.IY(this);this.add(r);const i=(0,Ze.ft)(n,r);i!==r&&this.add(i)}}}var ut=n(3982);function ct(e,t){return(0,ut.zg)(e,t,1)}function lt(e){return function(t){return 0===e?(0,je.c)():t.lift(new ht(e))}}class ht{constructor(e){if(this.total=e,this.total<0)throw new Ke}call(e,t){return t.subscribe(new dt(e,this.total))}}class dt extends ke.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function ft(e=mt){return t=>t.lift(new pt(e))}class pt{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new gt(e,this.errorFactory))}}class gt extends ke.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function mt(){return new Fe}function yt(e=null){return t=>t.lift(new vt(e))}class vt{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new wt(e,this.defaultValue))}}class wt extends ke.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var bt=n(3392);function _t(e,t){const n=arguments.length>=2;return r=>r.pipe(e?nt((t,n)=>e(t,n,r)):bt.y,We(1),n?yt(t):ft(()=>new Fe))}var It=n(4019),Tt=n(1564),Et=n(7570);class St{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Ct(e,this.callback))}}class Ct extends ke.L{constructor(e,t){super(e),this.add(new Et.w(t))}}class kt{constructor(e,t){this.id=e,this.url=t}}class At extends kt{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xt extends kt{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nt extends kt{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ot extends kt{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dt extends kt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends kt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pt extends kt{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lt extends kt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt extends kt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ft{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ut{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vt{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jt{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qt{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bt{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $t{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zt="primary";class zt{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ht(e){return new zt(e)}function Gt(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Kt(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Wt(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Yt(e[i],t[i]))return!1;return!0}function Yt(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Qt(e){return Array.prototype.concat.apply([],e)}function Jt(e){return e.length>0?e[e.length-1]:null}function Xt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function en(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,be.D)(Promise.resolve(e)):(0,_e.of)(e)}const tn={exact:function e(t,n,r){if(!hn(t.segments,n.segments))return!1;if(!an(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:sn},nn={exact:function(e,t){return Wt(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Yt(e[n],t[n]))},ignored:()=>!0};function rn(e,t,n){return tn[n.paths](e.root,t.root,n.matrixParams)&&nn[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function sn(e,t,n){return on(e,t,t.segments,n)}function on(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!hn(i,n)&&!t.hasChildren()&&!!an(i,n,r)}if(e.segments.length===n.length){if(!hn(e.segments,n))return!1;if(!an(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!sn(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!hn(e.segments,i)&&!!an(e.segments,i,r)&&!!e.children.primary&&on(e.children.primary,t,s,r)}}function an(e,t,n){return t.every((t,r)=>nn[n](e[r].parameters,t.parameters))}class un{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ht(this.queryParams)),this._queryParamMap}toString(){return pn.serialize(this)}}class cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xt(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gn(this)}}class ln{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ht(this.parameters)),this._parameterMap}toString(){return In(this)}}function hn(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class dn{}class fn{parse(e){const t=new kn(e);return new un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${mn(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${vn(t)}=${vn(e)}`).join("&"):`${vn(t)}=${vn(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const pn=new fn;function gn(e){return e.segments.map(e=>In(e)).join("/")}function mn(e,t){if(!e.hasChildren())return gn(e);if(t){const t=e.children.primary?mn(e.children.primary,!1):"",n=[];return Xt(e.children,(e,t)=>{t!==Zt&&n.push(`${t}:${mn(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return Xt(e.children,(e,r)=>{r===Zt&&(n=n.concat(t(e,r)))}),Xt(e.children,(e,r)=>{r!==Zt&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===Zt?[mn(e.children.primary,!1)]:[`${n}:${mn(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${gn(e)}/${t[0]}`:`${gn(e)}/(${t.join("//")})`}}function yn(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vn(e){return yn(e).replace(/%3B/gi,";")}function wn(e){return yn(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bn(e){return decodeURIComponent(e)}function _n(e){return bn(e.replace(/\+/g,"%20"))}function In(e){return`${wn(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${wn(e)}=${wn(t[e])}`).join("")}`;var t}const Tn=/^[^\/()?;=#]+/;function En(e){const t=e.match(Tn);return t?t[0]:""}const Sn=/^[^=?&#]+/,Cn=/^[^?&#]+/;class kn{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new cn(e,t)),n}parseSegment(){const e=En(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ln(bn(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=En(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=En(this.remaining);e&&(n=e,this.capture(n))}e[bn(t)]=bn(n)}parseQueryParam(e){const t=function(e){const t=e.match(Sn);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Cn);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=_n(t),i=_n(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=En(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Zt);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new cn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class An{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xn(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=xn(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Nn(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Nn(e,this._root).map(e=>e.value)}}function xn(e,t){if(e===t.value)return t;for(const n of t.children){const t=xn(e,n);if(t)return t}return null}function Nn(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Nn(e,n);if(r.length)return r.unshift(t),r}return[]}class On{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dn(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Rn extends An{constructor(e,t){super(e),this.snapshot=t,Vn(this,e)}toString(){return this.snapshot.toString()}}function Pn(e,t){const n=function(e,t){const n=new Fn([],{},{},"",{},Zt,t,null,e.root,-1,{});return new Un("",new On(n,[]))}(e,t),r=new Ee([new ln("",{})]),i=new Ee({}),s=new Ee({}),o=new Ee({}),a=new Ee(""),u=new Ln(r,i,o,a,s,Zt,t,n.root);return u.snapshot=n.root,new Rn(new On(u,[]),n)}class Ln{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$e.U)(e=>Ht(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$e.U)(e=>Ht(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mn(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Fn{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ht(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ht(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Un extends An{constructor(e,t){super(t),this.url=e,Vn(this,t)}toString(){return jn(this._root)}}function Vn(e,t){t.value._routerState=e,t.children.forEach(t=>Vn(e,t))}function jn(e){const t=e.children.length>0?` { ${e.children.map(jn).join(", ")} } `:"";return`${e.value}${t}`}function qn(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Wt(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Wt(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Wt(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Wt(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Bn(e,t){return Wt(e.params,t.params)&&function(e,t){return hn(e,t)&&e.every((e,n)=>Wt(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Bn(e.parent,t.parent))}function $n(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return $n(e,t,r);return $n(e,t)})}(e,t,n);return new On(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return Zn(t,e),e}}const n=new Ln(new Ee((r=t.value).url),new Ee(r.params),new Ee(r.queryParams),new Ee(r.fragment),new Ee(r.data),r.outlet,r.component,r),i=t.children.map(t=>$n(e,t));return new On(n,i)}var r}function Zn(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)Zn(e.children[n],t.children[n])}function zn(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Hn(e){return"object"==typeof e&&null!=e&&e.outlets}function Gn(e,t,n,r,i){let s={};return r&&Xt(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new un(n.root===e?t:Kn(n.root,e,t),s,i)}function Kn(e,t,n){const r={};return Xt(e.children,(e,i)=>{r[i]=e===t?n:Kn(e,t,n)}),new cn(e.segments,r)}class Wn{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&zn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Hn);if(r&&r!==Jt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yn{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Qn(e,t,n){if(e||(e=new cn([],{})),0===e.segments.length&&e.hasChildren())return Jn(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(Hn(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!nr(a,u,t))return s;r+=2}else{if(!nr(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new cn(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new cn(e.segments.slice(r.pathIndex),e.children),Jn(t,0,i)}return r.match&&0===i.length?new cn(e.segments,{}):r.match&&!e.hasChildren()?Xn(e,t,n):r.match?Jn(e,0,i):Xn(e,t,n)}function Jn(e,t,n){if(0===n.length)return new cn(e.segments,{});{const r=function(e){return Hn(e[0])?e[0].outlets:{[Zt]:e}}(n),i={};return Xt(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Qn(e.children[r],t,n))}),Xt(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new cn(e.segments,i)}}function Xn(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(Hn(s)){const e=er(s.outlets);return new cn(r,e)}if(0===i&&zn(n[0])){r.push(new ln(e.segments[t].path,tr(n[0]))),i++;continue}const o=Hn(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&zn(a)?(r.push(new ln(o,tr(a))),i+=2):(r.push(new ln(o,{})),i++)}return new cn(r,{})}function er(e){const t={};return Xt(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Xn(new cn([],{}),0,e))}),t}function tr(e){const t={};return Xt(e,(e,n)=>t[n]=`${e}`),t}function nr(e,t,n){return e==n.path&&Wt(t,n.parameters)}class rr{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),qn(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Dn(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Xt(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Dn(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Dn(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Bt(e.value.snapshot))}),e.children.length&&this.forwardEvent(new jt(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(qn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),ir(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function ir(e){qn(e.value),e.children.forEach(ir)}class sr{constructor(e,t){this.routes=e,this.module=t}}function or(e){return"function"==typeof e}function ar(e){return e instanceof un}const ur=Symbol("INITIAL_VALUE");function cr(){return ze(e=>function(...e){let t,n;return(0,Se.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,Ce.k)(e[0])&&(e=e[0]),(0,Re.n)(e,n).lift(new Le(t))}(e.map(e=>e.pipe(We(1),Je(ur)))).pipe(Xe((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==ur)return e;if(r===ur&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||ar(r))return r}return e},e)},ur),nt(e=>e!==ur),(0,$e.U)(e=>ar(e)?e:!0===e),We(1)))}let lr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[ii]},encapsulation:2}),e})();function hr(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];dr(r,fr(t,r))}}function dr(e,t){e.children&&hr(e.children,t)}function fr(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function pr(e){const t=e.children&&e.children.map(pr),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Zt&&(n.component=lr),n}function gr(e){return e.outlet||Zt}function mr(e,t){const n=e.filter(e=>gr(e)===t);return n.push(...e.filter(e=>gr(e)!==t)),n}const yr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function vr(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},yr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||Kt)(n,e,t);if(!i)return Object.assign({},yr);const s={};Xt(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function wr(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>br(e,t,n)&&gr(n)!==Zt)}(e,n,r)){const i=new cn(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&gr(s)!==Zt){const n=new cn([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[gr(s)]=n}return i}(e,t,r,new cn(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>br(e,t,n))}(e,n,r)){const s=new cn(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(br(e,n,a)&&!i[gr(a)]){const n=new cn([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[gr(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new cn(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function br(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function _r(e,t,n,r){return!!(gr(e)===r||r!==Zt&&br(t,n,e))&&("**"===e.path||vr(t,e,n).matched)}function Ir(e,t,n){return 0===t.length&&!e.children[n]}class Tr{constructor(e){this.segmentGroup=e||null}}class Er{constructor(e){this.urlTree=e}}function Sr(e){return new Oe.y(t=>t.error(new Tr(e)))}function Cr(e){return new Oe.y(t=>t.error(new Er(e)))}function kr(e){return new Oe.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Ar{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=wr(this.urlTree.root,[],[],this.config).segmentGroup,t=new cn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Zt).pipe((0,$e.U)(e=>this.createUrlTree(xr(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(st(e=>{if(e instanceof Er)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Tr)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Zt).pipe((0,$e.U)(t=>this.createUrlTree(xr(t),e.queryParams,e.fragment))).pipe(st(e=>{if(e instanceof Tr)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new cn([],{[Zt]:e}):e;return new un(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,$e.U)(e=>new cn([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,be.D)(r).pipe(ct(r=>{const i=n.children[r],s=mr(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,$e.U)(e=>({segment:e,outlet:r})))}),Xe((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?nt((t,n)=>e(t,n,r)):bt.y,lt(1),n?yt(t):ft(()=>new Fe))}())}expandSegment(e,t,n,r,i,s){return(0,be.D)(n).pipe(ct(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(st(e=>{if(e instanceof Tr)return(0,_e.of)(null);throw e}))),_t(e=>!!e),st((e,n)=>{if(e instanceof Fe||"EmptyError"===e.name){if(Ir(t,r,i))return(0,_e.of)(new cn([],{}));throw new Tr(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return _r(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Sr(t):Sr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Cr(i):this.lineralizeSegments(n,i).pipe((0,ut.zg)(n=>{const i=new cn(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=vr(t,r,i);if(!o)return Sr(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Cr(l):this.lineralizeSegments(r,l).pipe((0,ut.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,_e.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,$e.U)(e=>(n._loadedConfig=e,new cn(r,{})))):(0,_e.of)(new cn(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=vr(t,n,r);if(!s)return Sr(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,ut.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=wr(t,o,u,s),l=new cn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,$e.U)(e=>new cn(o,e)));if(0===s.length&&0===c.length)return(0,_e.of)(new cn(o,{}));const h=gr(n)===i;return this.expandSegment(r,l,s,c,h?Zt:i,!0).pipe((0,$e.U)(e=>new cn(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,_e.of)(new sr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,_e.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,ut.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,$e.U)(e=>(t._loadedConfig=e,e))):function(e){return new Oe.y(t=>t.error(Gt(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,_e.of)(new sr([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,_e.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&or(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!or(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return en(s)});return(0,_e.of)(i).pipe(cr(),(0,It.b)(e=>{if(!ar(e))return;const t=Gt(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,$e.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,_e.of)(n);if(r.numberOfChildren>1||!r.children.primary)return kr(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new un(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Xt(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return Xt(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new cn(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function xr(e){const t={};for(const n of Object.keys(e.children)){const r=xr(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new cn(e.segments.concat(t.segments),t.children)}return e}(new cn(e.segments,t))}class Nr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Or{constructor(e,t){this.component=e,this.route=t}}function Dr(e,t,n){const r=e._root;return Pr(r,t?t._root:null,n,[r.value])}function Rr(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Pr(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Dn(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!hn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!hn(e.url,t.url)||!Wt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bn(e,t)||!Wt(e.queryParams,t.queryParams);case"paramsChange":default:return!Bn(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Nr(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Pr(e,t,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Or(a.outlet.component,o))}else o&&Lr(t,a,i),i.canActivateChecks.push(new Nr(r)),Pr(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),Xt(s,(e,t)=>Lr(e,n.getContext(t),i)),i}function Lr(e,t,n){const r=Dn(e),i=e.value;Xt(r,(e,r)=>{Lr(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Or(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class Mr{}function Fr(e){return new Oe.y(t=>t.error(e))}class Ur{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=wr(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Zt);if(null===t)return null;const n=new Fn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new On(n,t),i=new Un(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=Mn(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=mr(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=jr(n);return r.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return Ir(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!_r(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?Jt(n).parameters:{};i=new Fn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$r(e),gr(e),e.component,e,qr(t),Br(t)+n.length,Zr(e))}else{const r=vr(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Fn(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$r(e),gr(e),e.component,e,qr(t),Br(t)+s.length,Zr(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:c}=wr(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return null===e?null:[new On(i,e)]}if(0===a.length&&0===c.length)return[new On(i,[])];const l=gr(e)===r,h=this.processSegment(a,u,c,l?Zt:r);return null===h?null:[new On(i,h)]}}function Vr(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function jr(e){const t=[],n=new Set;for(const r of e){if(!Vr(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=jr(r.children);t.push(new On(r.value,e))}return t.filter(e=>!n.has(e))}function qr(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Br(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function $r(e){return e.data||{}}function Zr(e){return e.resolve||{}}function zr(e){return ze(t=>{const n=e(t);return n?(0,be.D)(n).pipe((0,$e.U)(()=>t)):(0,_e.of)(t)})}class Hr extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gr=new r.OlP("ROUTES");class Kr{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,$e.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new sr(Qt(i.injector.get(Gr,void 0,r.XFs.Self|r.XFs.Optional)).map(pr),i)}),st(e=>{throw t._loader$=void 0,e}));return t._loader$=new Be.c(n,()=>new Ie.xQ).pipe((0,Tt.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,be.D)(this.loader.load(e)):en(e()).pipe((0,ut.zg)(e=>e instanceof r.YKP?(0,_e.of)(e):(0,be.D)(this.compiler.compileModuleAsync(e))))}}class Wr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yr,this.attachRef=null}}class Yr{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wr,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Qr{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Jr(e){throw e}function Xr(e,t,n){return t.parse("/")}function ei(e,t){return(0,_e.of)(null)}const ti={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ni={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class e{constructor(e,t,n,i,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ie.xQ,this.errorHandler=Jr,this.malformedUriErrorHandler=Xr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ei,afterPreactivation:ei},this.urlHandlingStrategy=new Qr,this.routeReuseStrategy=new Hr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new un(new cn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Kr(o,a,e=>this.triggerEvent(new Ft(e)),e=>this.triggerEvent(new Ut(e))),this.routerState=Pn(this.currentUrlTree,this.rootComponentType),this.transitions=new Ee({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(nt(e=>0!==e.id),(0,$e.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),ze(e=>{let n=!1,r=!1;return(0,_e.of)(e).pipe((0,It.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ze(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,_e.of)(e).pipe(ze(e=>{const n=this.transitions.getValue();return t.next(new At(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?je.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,ze(e=>function(e,t,n,r,i){return new Ar(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,$e.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,It.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,ut.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new Ur(e,t,n,r,i,s).recognize();return null===o?Fr(new Mr):(0,_e.of)(o)}catch(o){return Fr(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,$e.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,It.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new Dt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new At(n,this.serializeUrl(r),i,s);t.next(a);const u=Pn(r,this.rootComponentType).snapshot;return(0,_e.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),je.E}),zr(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,It.b)(e=>{const t=new Rt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,$e.U)(e=>Object.assign(Object.assign({},e),{guards:Dr(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,ut.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,_e.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,be.D)(e).pipe((0,ut.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,_e.of)(!0);const o=s.map(s=>{const o=Rr(s,t,i);let a;if(function(e){return e&&or(e.canDeactivate)}(o))a=en(o.canDeactivate(e,t,n,r));else{if(!or(o))throw new Error("Invalid CanDeactivate guard");a=en(o(e,t,n,r))}return a.pipe(_t())});return(0,_e.of)(o).pipe(cr())}(e.component,e.route,n,t,r)),_t(e=>!0!==e,!0))}(o,r,i,e).pipe((0,ut.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,be.D)(t).pipe(ct(t=>Ve(function(e,t){return null!==e&&t&&t(new Vt(e)),(0,_e.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new qt(e)),(0,_e.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>qe(()=>{const i=t.guards.map(i=>{const s=Rr(i,t.node,n);let o;if(function(e){return e&&or(e.canActivateChild)}(s))o=en(s.canActivateChild(r,e));else{if(!or(s))throw new Error("Invalid CanActivateChild guard");o=en(s(r,e))}return o.pipe(_t())});return(0,_e.of)(i).pipe(cr())}));return(0,_e.of)(i).pipe(cr())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,_e.of)(!0);const i=r.map(r=>qe(()=>{const i=Rr(r,t,n);let s;if(function(e){return e&&or(e.canActivate)}(i))s=en(i.canActivate(t,e));else{if(!or(i))throw new Error("Invalid CanActivate guard");s=en(i(t,e))}return s.pipe(_t())}));return(0,_e.of)(i).pipe(cr())}(e,t.route,n))),_t(e=>!0!==e,!0))}(r,s,e,t):(0,_e.of)(n)),(0,$e.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,It.b)(e=>{if(ar(e.guardsResult)){const t=Gt(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Pt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),nt(e=>!!e.guardsResult||(this.cancelNavigationTransition(e,""),!1)),zr(e=>{if(e.guards.canActivateChecks.length)return(0,_e.of)(e).pipe((0,It.b)(e=>{const t=new Lt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),ze(e=>{let t=!1;return(0,_e.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,ut.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,_e.of)(e);let s=0;return(0,be.D)(i).pipe(ct(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,_e.of)({});const s={};return(0,be.D)(i).pipe((0,ut.zg)(i=>function(e,t,n,r){const i=Rr(e,t,r);return en(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,It.b)(e=>{s[i]=e}))),lt(1),(0,ut.zg)(()=>Object.keys(s).length===i.length?(0,_e.of)(s):je.E))}(e._resolve,e,t,r).pipe((0,$e.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Mn(e,n).resolve),null)))}(e.route,t,n,r)),(0,It.b)(()=>s++),lt(1),(0,ut.zg)(t=>s===i.length?(0,_e.of)(e):je.E))})),(0,It.b)({next:()=>t=!0,complete:()=>{t||this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,It.b)(e=>{const t=new Mt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),zr(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,$e.U)(e=>{const t=function(e,t,n){const r=$n(e,t._root,n?n._root:void 0);return new Rn(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,It.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),(0,$e.U)(e=>(new rr(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),(0,It.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(e,`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},e=>e.lift(new St(i))),st(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ar(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Nt(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Ot(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(Nh){e.reject(Nh)}}var i;return je.E}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){hr(e),this.config=e.map(pr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return Gn(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Wn(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Xt(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Wn(n,t,r)}(n);if(s.toRoot())return Gn(t.root,new cn([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new Yn(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new Yn(e,e===t.root,0)}const r=zn(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Yn(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Jn(o.segmentGroup,o.index,s.commands):Qn(o.segmentGroup,o.index,s.commands);return Gn(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=u?u:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=ar(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||t.skipLocationChange||t.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},ti):!1===t?Object.assign({},ni):t,ar(e))return rn(this.currentUrlTree,e,n);const r=this.parseUrl(e);return rn(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new xt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==t&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===e.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((e,t)=>{u=e,c=t});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){"computed"===this.canceledNavigationResolution?"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-e.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Nt(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(dn),r.LFG(Yr),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),ii=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Zt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new si(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Yr),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class si{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Ln?this.route:e===Yr?this.childContexts:this.parent.get(e,t)}}class oi{}class ai{preload(e,t){return(0,_e.of)(null)}}let ui=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Kr(t,n,t=>e.triggerEvent(new Ft(t)),t=>e.triggerEvent(new Ut(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(nt(e=>e instanceof xt),ct(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,be.D)(n).pipe((0,Ue.J)(),(0,$e.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,_e.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,ut.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ri),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(oi))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),ci=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof At?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof xt&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof $t&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new $t(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ri),r.LFG(q),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const li=new r.OlP("ROUTER_CONFIGURATION"),hi=new r.OlP("ROUTER_FORROOT_GUARD"),di=[_,{provide:dn,useClass:fn},{provide:ri,useFactory:function(e,t,n,r,i,s,o,a={},u,c){const l=new ri(null,e,t,n,r,i,s,Qt(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[dn,Yr,_,r.zs3,r.v3s,r.Sil,Gr,li,[class{},new r.FiY],[class{},new r.FiY]]},Yr,{provide:Ln,useFactory:function(e){return e.routerState.root},deps:[ri]},{provide:r.v3s,useClass:r.EAV},ui,ai,class{preload(e,t){return t().pipe(st(()=>(0,_e.of)(null)))}},{provide:li,useValue:{enableTracing:!1}}];function fi(){return new r.PXZ("Router",ri)}let pi=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[di,vi(t),{provide:hi,useFactory:yi,deps:[[ri,new r.FiY,new r.tp0]]},{provide:li,useValue:n||{}},{provide:m,useFactory:mi,deps:[a,[new r.tBr(v),new r.FiY],li]},{provide:ci,useFactory:gi,deps:[ri,q,li]},{provide:oi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ai},{provide:r.PXZ,multi:!0,useFactory:fi},[wi,{provide:r.ip1,multi:!0,useFactory:bi,deps:[wi]},{provide:Ii,useFactory:_i,deps:[wi]},{provide:r.tb,multi:!0,useExisting:Ii}]]}}static forChild(t){return{ngModule:e,providers:[vi(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(hi,8),r.LFG(ri,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function gi(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new ci(e,t,n)}function mi(e,t,n={}){return n.useHash?new b(e,t):new w(e,t)}function yi(e){return"guarded"}function vi(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:Gr,multi:!0,useValue:e}]}let wi=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new Ie.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(ri),r=this.injector.get(li);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,_e.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(li),n=this.injector.get(ui),i=this.injector.get(ci),s=this.injector.get(ri),o=this.injector.get(r.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function bi(e){return e.appInitializer.bind(e)}function _i(e){return e.bootstrapListener.bind(e)}const Ii=new r.OlP("Router Initializer");var Ti=n(6304),Ei=n(9001),Si=n(1906),Ci=n(45),ki=n(8489),Ai=n(9291);class xi extends Ie.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Ni(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new Te.N;if(this.isStopped||this.hasError?s=Et.w.EMPTY:(this.observers.push(e),s=new Ai.W(this,e)),r&&e.add(e=new Ci.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||ki.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class Ni{constructor(e,t){this.time=e,this.value=t}}function Oi(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new xi(e,t,r),l=i.subscribe(this),s=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function Di(e,t){return t?ze(()=>e,t):ze(()=>e)}var Ri=n(2893),Pi=n(8934),Li=n(9748),Mi=n(8569),Fi=n(2293);function Ui(e=0,t,n){let r=-1;return(0,Fi.k)(t)?r=Number(t)<1?1:Number(t):(0,Se.K)(t)&&(n=t),(0,Se.K)(n)||(n=Mi.P),new Oe.y(t=>{const i=(0,Fi.k)(e)?e:+e-n.now();return n.schedule(Vi,i,{index:0,period:r,subscriber:t})})}function Vi(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function ji(e,t){return n=>n.lift(new qi(e,t))}class qi{constructor(e,t){this.keySelector=e,this.flushes=t}call(e,t){return t.subscribe(new Bi(e,this.keySelector,this.flushes))}}class Bi extends Ze.Ds{constructor(e,t,n){super(e),this.keySelector=t,this.values=new Set,n&&this.add((0,Ze.ft)(n,new Ze.IY(this)))}notifyNext(){this.values.clear()}notifyError(e){this._error(e)}_next(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}_useKeySelector(e){let t;const{destination:n}=this;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)}_finalizeNext(e,t){const{values:n}=this;n.has(e)||(n.add(e),this.destination.next(t))}}var $i=n(1858);Ui(0,300).pipe(ct(()=>(0,be.D)((0,$i.C6)())),ji()),new r.OlP("angularfire2._apps"),new r.FiY,new r.FiY,(0,Pi.u3)($i.P2,!0),(0,Pi.u3)($i.Mq,!0),(0,Pi.u3)($i.C6,!0),(0,Pi.u3)($i.ZF,!0),(0,Pi.u3)($i.TP,!0),(0,Pi.u3)($i.KN,!0),(0,Pi.u3)($i.Ub,!0);var Zi=n(7964),zi=n(1947),Hi=n(5725),Gi=n(8678);const Ki=new Map,Wi={activated:!1,tokenObservers:[]},Yi={initialized:!1,enabled:!1};function Qi(e){return Ki.get(e)||Wi}function Ji(e,t){Ki.set(e,t)}function Xi(){return Yi}class es{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ti.Z)(function*(){t.stop();try{t.pending=new Hi.BH,yield function(e){return new Promise(t=>{setTimeout(t,e)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Hi.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const ts=new Hi.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ns(e){if(!Qi(e).activated)throw ts.create("use-before-activation",{appName:e.name})}function rs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function is(e,t){return ss.apply(this,arguments)}function ss(){return(ss=(0,Ti.Z)(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const e=yield i.getHeartbeatsHeader();e&&(r["X-Firebase-Client"]=e)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw ts.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw ts.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw ts.create("fetch-parse-error",{originalErrorMessage:h.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function os(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const as="firebase-app-check-store",us="debug-token";let cs=null;function ls(){return cs||(cs=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(ts.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(as,{keyPath:"compositeKey"})}}}catch(n){t(ts.create("storage-open",{originalErrorMessage:n.message}))}}),cs)}function hs(e){return ms(vs(e))}function ds(e){return ps(us,e)}function fs(){return ms(us)}function ps(e,t){return gs.apply(this,arguments)}function gs(){return(gs=(0,Ti.Z)(function*(e,t){const n=(yield ls()).transaction(as,"readwrite"),r=n.objectStore(as).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(ts.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}function ms(e){return ys.apply(this,arguments)}function ys(){return(ys=(0,Ti.Z)(function*(e){const t=(yield ls()).transaction(as,"readonly"),n=t.objectStore(as).get(e);return new Promise((e,r)=>{n.onsuccess=t=>{const n=t.target.result;e(n?n.value:void 0)},t.onerror=e=>{var t;r(ts.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}})})).apply(this,arguments)}function vs(e){return`${e.options.appId}-${e.name}`}const ws=new Gi.Yd("@firebase/app-check");function bs(){return(bs=(0,Ti.Z)(function*(e){if((0,Hi.hl)()){let n;try{n=yield hs(e)}catch(t){ws.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return n}})).apply(this,arguments)}function _s(e,t){return(0,Hi.hl)()?function(e,t){return ps(vs(e),t)}(e,t).catch(e=>{ws.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Is(){return(Is=(0,Ti.Z)(function*(){let e;try{e=yield fs()}catch($h){}if(e)return e;{const e=rs();return ds(e).catch(e=>ws.warn(`Failed to persist debug token to IndexedDB. Error: ${e}`)),e}})).apply(this,arguments)}function Ts(){return Xi().enabled}function Es(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,Ti.Z)(function*(){const e=Xi();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Cs={error:"UNKNOWN_ERROR"};function ks(e){return As.apply(this,arguments)}function As(){return(As=(0,Ti.Z)(function*(e,t=!1){const n=e.app;ns(n);const r=Qi(n);let i,s=r.token;if(!s){const e=yield r.cachedTokenPromise;e&&Rs(e)&&(s=e)}if(!t&&s&&Rs(s))return{token:s.token};let o,a=!1;if(Ts()){r.exchangeTokenPromise||(r.exchangeTokenPromise=is(os(n,yield Es()),e.heartbeatServiceProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0);const t=yield r.exchangeTokenPromise;return yield _s(n,t),Ji(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0),s=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?ws.warn(u.message):ws.error(u),i=u}return s?(o={token:s.token},Ji(n,Object.assign(Object.assign({},r),{token:s})),yield _s(n,s)):o=Ps(i),a&&Ds(n,o),o})).apply(this,arguments)}function xs(e,t,n,r){const{app:i}=e,s=Qi(i),o={next:n,error:r,type:t};if(Ji(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Rs(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),Os(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Os(e))}function Ns(e,t){const n=Qi(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Ji(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function Os(e){const{app:t}=e,n=Qi(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new es((0,Ti.Z)(function*(){let n;if(n=Qi(t).token?yield ks(e,!0):yield ks(e),n.error)throw n.error}),()=>!0,()=>{const e=Qi(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),Ji(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ds(e,t){const n=Qi(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function Rs(e){return e.expireTimeMillis-Date.now()>0}function Ps(e){return{token:(t=Cs,Hi.US.encodeString(JSON.stringify(t),!1)),error:e};var t}class Ls{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qi(this.app);for(const t of e)Ns(this.app,t.next);return Promise.resolve()}}function Ms(){return(Ms=(0,Ti.Z)(function*(e,t){const n=yield ks(e,t);if(n.error)throw n.error;return{token:n.token}})).apply(this,arguments)}const Fs="app-check-internal";(0,Zi._registerComponent)(new zi.wA("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new Ls(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Fs).initialize()})),(0,Zi._registerComponent)(new zi.wA(Fs,e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>ks(t,e),addTokenListener:e=>xs(t,"INTERNAL",e),removeTokenListener:e=>Ns(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zi.registerVersion)("@firebase/app-check","0.5.7");const Us="app-check";class Vs{constructor(){return(0,Pi.vb)(Us)}}Ui(0,300).pipe(ct(()=>(0,be.D)((0,Pi.vb)(Us))),ji()),new r.OlP("angularfire2.app-check-instances"),Symbol("angularfire2.app-check.namespace"),"undefined"!=typeof window&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname),new r.FiY,new r.FiY,(0,Pi.u3)(function(e,t){return Ms.apply(this,arguments)},!0),(0,Pi.u3)(function(e=(0,Zi.getApp)(),t){e=(0,Hi.m9)(e);const n=(0,Zi._getProvider)(e,"app-check");if(Xi().initialized||function(){const e=(0,Hi.Rd)(),t=Xi();if(t.initialized=!0,"string"!=typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const n=new Hi.BH;t.token=n,n.resolve("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?e.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return Is.apply(this,arguments)}())}(),Ts()&&Es().then(e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw ts.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return function(e,t,n){const r=Qi(e),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=t,i.cachedTokenPromise=function(e){return bs.apply(this,arguments)}(e).then(t=>(t&&Rs(t)&&(Ji(e,Object.assign(Object.assign({},Qi(e)),{token:t})),Ds(e,{token:t.token})),t)),i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,Ji(e,i),i.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),Qi(e).isTokenAutoRefreshEnabled&&xs(r,"INTERNAL",()=>{}),r},!0),(0,Pi.u3)(function(e,t,n,r){let i=()=>{},s=()=>{};return i=null!=t.next?t.next.bind(t):t,null!=t.error?s=t.error.bind(t):n&&(s=n),xs(e,"EXTERNAL",i,s),()=>Ns(e.app,i)},!0),(0,Pi.u3)(function(e,t){const n=e.app,r=Qi(n);r.tokenRefresher&&(!0===t?r.tokenRefresher.start():r.tokenRefresher.stop()),Ji(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:t}))},!0);const js=new r.OlP("angularfire2.auth.use-emulator"),qs=new r.OlP("angularfire2.auth.settings"),Bs=new r.OlP("angularfire2.auth.tenant-id"),$s=new r.OlP("angularfire2.auth.langugage-code"),Zs=new r.OlP("angularfire2.auth.use-device-language"),zs=new r.OlP("angularfire.auth.persistence"),Hs=(e,t,n,r,i,s,o,a)=>(0,Li.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let Gs=(()=>{class e{constructor(e,t,r,i,s,o,a,u,c,l,h,d){const f=new Ie.xQ,p=(0,_e.of)(void 0).pipe((0,Ci.QV)(s.outsideAngular),ze(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,8172)))),(0,$e.U)(()=>(0,Li.on)(e,i,t)),(0,$e.U)(e=>Hs(e,i,o,u,c,l,a,h)),Oi({bufferSize:1,refCount:!1}));if(j(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_e.of)(null);else{p.pipe(_t()).subscribe();const e=p.pipe(ze(e=>e.getRedirectResult().then(e=>e,()=>null)),Pi.iC,Oi({bufferSize:1,refCount:!1})),t=p.pipe(ze(e=>new Oe.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=p.pipe(ze(e=>new Oe.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(Di(t),(0,Ri.R)(s.outsideAngular),(0,Ci.QV)(s.insideAngular)),this.user=e.pipe(Di(n),(0,Ri.R)(s.outsideAngular),(0,Ci.QV)(s.insideAngular)),this.idToken=this.user.pipe(ze(e=>e?(0,be.D)(e.getIdToken()):(0,_e.of)(null))),this.idTokenResult=this.user.pipe(ze(e=>e?(0,be.D)(e.getIdTokenResult()):(0,_e.of)(null))),this.credential=(0,Si.T)(e,f,this.authState.pipe(nt(e=>!e))).pipe((0,$e.U)(e=>(null==e?void 0:e.user)?e:null),(0,Ri.R)(s.outsideAngular),(0,Ci.QV)(s.insideAngular))}return(0,Li.pX)(this,p,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>f.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Li.Dh),r.LFG(Li.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Pi.HU),r.LFG(js,8),r.LFG(qs,8),r.LFG(Bs,8),r.LFG($s,8),r.LFG(Zs,8),r.LFG(zs,8),r.LFG(Vs,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();(0,Li.GT)(Gs,[{name:null,config:null,emulatorConfig:null,app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let Ks=(()=>{class e{constructor(){Ei.Z.registerVersion("angularfire",Pi.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Gs]}),e})();function Ws(){return e=>e.lift(new Ys)}class Ys{call(e,t){return t.subscribe(new Qs(e))}}class Qs extends ke.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class Js{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Xs(e,this.compare,this.keySelector))}}class Xs extends ke.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}n(8172);var eo,to=n(6986),no="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ro={},io=io||{},so=no||self;function oo(){}function ao(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function uo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var co="closure_uid_"+(1e9*Math.random()>>>0),lo=0;function ho(e,t,n){return e.call.apply(e.bind,arguments)}function fo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function po(e,t,n){return(po=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ho:fo).apply(null,arguments)}function go(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mo(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function yo(){this.s=this.s,this.o=this.o}var vo={};yo.prototype.s=!1,yo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,co)&&e[co]||(e[co]=++lo)}(this);delete vo[e]}},yo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},bo=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function _o(e){return Array.prototype.concat.apply([],arguments)}function Io(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function To(e){return/^[\s\xa0]*$/.test(e)}var Eo,So=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Co(e,t){return-1!=e.indexOf(t)}function ko(e,t){return e<t?-1:e>t?1:0}e:{var Ao=so.navigator;if(Ao){var xo=Ao.userAgent;if(xo){Eo=xo;break e}}Eo=""}function No(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Oo(e){const t={};for(const n in e)t[n]=e[n];return t}var Do="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ro(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Do.length;t++)n=Do[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Po(e){return Po[" "](e),e}Po[" "]=oo;var Lo,Mo,Fo=Co(Eo,"Opera"),Uo=Co(Eo,"Trident")||Co(Eo,"MSIE"),Vo=Co(Eo,"Edge"),jo=Vo||Uo,qo=Co(Eo,"Gecko")&&!(Co(Eo.toLowerCase(),"webkit")&&!Co(Eo,"Edge"))&&!(Co(Eo,"Trident")||Co(Eo,"MSIE"))&&!Co(Eo,"Edge"),Bo=Co(Eo.toLowerCase(),"webkit")&&!Co(Eo,"Edge");function $o(){var e=so.document;return e?e.documentMode:void 0}e:{var Zo="",zo=(Mo=Eo,qo?/rv:([^\);]+)(\)|;)/.exec(Mo):Vo?/Edge\/([\d\.]+)/.exec(Mo):Uo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mo):Bo?/WebKit\/(\S+)/.exec(Mo):Fo?/(?:Version)[ \/]?(\S+)/.exec(Mo):void 0);if(zo&&(Zo=zo?zo[1]:""),Uo){var Ho=$o();if(null!=Ho&&Ho>parseFloat(Zo)){Lo=String(Ho);break e}}Lo=Zo}var Go={};var Ko=so.document&&Uo&&($o()||parseInt(Lo,10))||void 0,Wo=function(){if(!so.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{so.addEventListener("test",oo,t),so.removeEventListener("test",oo,t)}catch(n){}return e}();function Yo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Qo(e,t){if(Yo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(qo){e:{try{Po(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Jo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Qo.Z.h.call(this)}}Yo.prototype.h=function(){this.defaultPrevented=!0},mo(Qo,Yo);var Jo={2:"touch",3:"pen",4:"mouse"};Qo.prototype.h=function(){Qo.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xo="closure_listenable_"+(1e6*Math.random()|0),ea=0;function ta(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ea,this.ca=this.fa=!1}function na(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ra(e){this.src=e,this.g={},this.h=0}function ia(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=wo(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(na(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sa(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}ra.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=sa(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ta(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var oa="closure_lm_"+(1e6*Math.random()|0),aa={};function ua(e,t,n,r,i){if(r&&r.once)return la(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ua(e,t[s],n,r,i);return null}return n=ya(n),e&&e[Xo]?e.N(t,n,uo(r)?!!r.capture:!!r,i):ca(e,t,n,!1,r,i)}function ca(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=uo(i)?!!i.capture:!!i,a=ga(e);if(a||(e[oa]=a=new ra(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=pa;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wo||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fa(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function la(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)la(e,t[s],n,r,i);return null}return n=ya(n),e&&e[Xo]?e.O(t,n,uo(r)?!!r.capture:!!r,i):ca(e,t,n,!0,r,i)}function ha(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ha(e,t[s],n,r,i);else r=uo(r)?!!r.capture:!!r,n=ya(n),e&&e[Xo]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=sa(s=e.g[t],n,r,i))&&(na(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=ga(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sa(t,n,r,i)),(n=-1<e?t[e]:null)&&da(n))}function da(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Xo])ia(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fa(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ga(t))?(ia(n,e),0==n.h&&(n.src=null,t[oa]=null)):na(e)}}}function fa(e){return e in aa?aa[e]:aa[e]="on"+e}function pa(e,t){if(e.ca)e=!0;else{t=new Qo(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&da(e),e=n.call(r,t)}return e}function ga(e){return(e=e[oa])instanceof ra?e:null}var ma="__closure_events_fn_"+(1e9*Math.random()>>>0);function ya(e){return"function"==typeof e?e:(e[ma]||(e[ma]=function(t){return e.handleEvent(t)}),e[ma])}function va(){yo.call(this),this.i=new ra(this),this.P=this,this.I=null}function wa(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Yo(t,e);else if(t instanceof Yo)t.target=t.target||e;else{var i=t;Ro(t=new Yo(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ba(o,r,!0,t)&&i}if(i=ba(o=t.g=e,r,!0,t)&&i,i=ba(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ba(o=t.g=n[s],r,!1,t)&&i}function ba(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&ia(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mo(va,yo),va.prototype[Xo]=!0,va.prototype.removeEventListener=function(e,t,n,r){ha(this,e,t,n,r)},va.prototype.M=function(){if(va.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)na(n[r]);delete t.g[e],t.h--}}this.I=null},va.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},va.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _a=so.JSON.stringify;function Ia(){var e=xa;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ta,Ea=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Sa,e=>e.reset());class Sa{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ca(e){so.setTimeout(()=>{throw e},0)}function ka(e,t){Ta||function(){var e=so.Promise.resolve(void 0);Ta=function(){e.then(Na)}}(),Aa||(Ta(),Aa=!0),xa.add(e,t)}var Aa=!1,xa=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ea.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Na(){for(var e;e=Ia();){try{e.h.call(e.g)}catch(n){Ca(n)}var t=Ea;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Aa=!1}function Oa(e,t){va.call(this),this.h=e||1,this.g=t||so,this.j=po(this.kb,this),this.l=Date.now()}function Da(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ra(e,t,n){if("function"==typeof e)n&&(e=po(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=po(e.handleEvent,e)}return 2147483647<Number(t)?-1:so.setTimeout(e,t||0)}function Pa(e){e.g=Ra(()=>{e.g=null,e.i&&(e.i=!1,Pa(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}mo(Oa,va),(eo=Oa.prototype).da=!1,eo.S=null,eo.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wa(this,"tick"),this.da&&(Da(this),this.start()))}},eo.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},eo.M=function(){Oa.Z.M.call(this),Da(this),delete this.g};class La extends yo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Pa(this)}M(){super.M(),this.g&&(so.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(e){yo.call(this),this.h=e,this.g={}}mo(Ma,yo);var Fa=[];function Ua(e,t,n,r){Array.isArray(n)||(n&&(Fa[0]=n.toString()),n=Fa);for(var i=0;i<n.length;i++){var s=ua(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Va(e){No(e.g,function(e,t){this.g.hasOwnProperty(t)&&da(e)},e),e.g={}}function ja(){this.g=!0}function qa(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return _a(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ma.prototype.M=function(){Ma.Z.M.call(this),Va(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ja.prototype.Aa=function(){this.g=!1},ja.prototype.info=function(){};var Ba={},$a=null;function Za(){return $a=$a||new va}function za(e){Yo.call(this,Ba.Ma,e)}function Ha(e){const t=Za();wa(t,new za(t,e))}function Ga(e,t){Yo.call(this,Ba.STAT_EVENT,e),this.stat=t}function Ka(e){const t=Za();wa(t,new Ga(t,e))}function Wa(e,t){Yo.call(this,Ba.Na,e),this.size=t}function Ya(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return so.setTimeout(function(){e()},t)}Ba.Ma="serverreachability",mo(za,Yo),Ba.STAT_EVENT="statevent",mo(Ga,Yo),Ba.Na="timingevent",mo(Wa,Yo);var Qa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ja={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xa(){}function eu(){}Xa.prototype.h=null;var tu,nu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ru(){Yo.call(this,"d")}function iu(){Yo.call(this,"c")}function su(){}function ou(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ma(this),this.P=uu,this.W=new Oa(e=jo?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}mo(ru,Yo),mo(iu,Yo),mo(su,Xa),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},tu=new su;var uu=45e3,cu={},lu={};function hu(e,t,n){e.K=1,e.v=Pu(Au(t)),e.s=n,e.U=!0,du(e,null)}function du(e,t){e.F=Date.now(),mu(e),e.A=Au(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Gu(n.h,"t",r),e.C=0,n=e.l.H,e.h=new au,e.g=Gc(e.l,n?t:null,!e.s),0<e.O&&(e.L=new La(po(e.Ia,e,e.g),e.O)),Ua(e.V,e.g,"readystatechange",e.gb),t=e.H?Oo(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ha(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function fu(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function pu(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=gu(e,n),r==lu){4==t&&(e.o=4,Ka(14),i=!1),qa(e.j,e.m,null,"[Incomplete Response]");break}if(r==cu){e.o=4,Ka(15),qa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qa(e.j,e.m,r,null),_u(e,r)}fu(e)&&r!=lu&&r!=cu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ka(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vc(t),t.L=!0,Ka(11))):(qa(e.j,e.m,n,"[Invalid Chunked Response]"),bu(e),wu(e))}function gu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?lu:(n=Number(t.substring(n,r)),isNaN(n)?cu:(r+=1)+n>t.length?lu:(t=t.substr(r,n),e.C=r+n,t))}function mu(e){e.Y=Date.now()+e.P,yu(e,e.P)}function yu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ya(po(e.eb,e),t)}function vu(e){e.B&&(so.clearTimeout(e.B),e.B=null)}function wu(e){0==e.l.G||e.I||Bc(e.l,e)}function bu(e){vu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Da(e.W),Va(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function _u(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Xu(n.i,e)))if(n.I=e.N,!e.J&&Xu(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;qc(n),Nc(n)}Uc(n),Ka(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ya(po(n.ab,n),6e3));if(1>=Ju(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Zc(n,11)}else if((e.J||n.g==e)&&qc(n),!To(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(Co(e,"spdy")||Co(e,"quic")||Co(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(ec(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,Ru(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Hc(r,r.H?r.la:null,r.W),o.J){tc(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(vu(a),mu(a)),r.g=o}else Fc(r);0<n.l.length&&Rc(n)}else"stop"!=c[0]&&"close"!=c[0]||Zc(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Zc(n,7):xc(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}Ha(4)}catch(c){}}function Iu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ao(e)||"string"==typeof e)bo(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ao(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(ao(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Tu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Tu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Eu(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Su(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Su(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Su(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(eo=ou.prototype).setTimeout=function(e){this.P=e},eo.gb=function(e){e=e.target;const t=this.L;t&&3==Ec(e)?t.l():this.Ia(e)},eo.Ia=function(e){try{if(e==this.g)e:{const l=Ec(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||jo||this.g&&(this.h.h||this.g.ga()||Sc(this.g)))){this.I||4!=l||7==t||Ha(8==t||0>=h?3:2),vu(this);var n=this.g.ba();this.N=n;t:if(fu(this)){var r=Sc(this.g);e="";var i=r.length,s=4==Ec(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){bu(this),wu(this);var o="";break t}this.h.i=new so.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!To(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ka(12),bu(this),wu(this);break e}qa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_u(this,n)}this.U?(pu(this,l,o),jo&&this.i&&3==l&&(Ua(this.V,this.W,"tick",this.fb),this.W.start())):(qa(this.j,this.m,o,null),_u(this,o)),4==l&&bu(this),this.i&&!this.I&&(4==l?Bc(this.l,this):(this.i=!1,mu(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ka(12)):(this.o=0,Ka(13)),bu(this),wu(this)}}}catch(l){}},eo.fb=function(){if(this.g){var e=Ec(this.g),t=this.g.ga();this.C<t.length&&(vu(this),pu(this,e,t),this.i&&4!=e&&mu(this))}},eo.cancel=function(){this.I=!0,bu(this)},eo.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Ha(3),Ka(17)),bu(this),this.o=2,wu(this)):yu(this,this.Y-e)},(eo=Tu.prototype).R=function(){Eu(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},eo.T=function(){return Eu(this),this.g.concat()},eo.get=function(e,t){return Su(this.h,e)?this.h[e]:t},eo.set=function(e,t){Su(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},eo.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Cu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ku(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ku){this.g=void 0!==t?t:e.g,xu(this,e.j),this.s=e.s,Nu(this,e.i),Ou(this,e.m),this.l=e.l,t=e.h;var n=new $u;n.i=t.i,t.g&&(n.g=new Tu(t.g),n.h=t.h),Du(this,n),this.o=e.o}else e&&(n=String(e).match(Cu))?(this.g=!!t,xu(this,n[1]||"",!0),this.s=Lu(n[2]||""),Nu(this,n[3]||"",!0),Ou(this,n[4]),this.l=Lu(n[5]||"",!0),Du(this,n[6]||"",!0),this.o=Lu(n[7]||"")):(this.g=!!t,this.h=new $u(null,this.g))}function Au(e){return new ku(e)}function xu(e,t,n){e.j=n?Lu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Nu(e,t,n){e.i=n?Lu(t,!0):t}function Ou(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Du(e,t,n){t instanceof $u?(e.h=t,function(e,t){t&&!e.j&&(Zu(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(zu(this,t),Gu(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Mu(t,qu)),e.h=new $u(t,e.g))}function Ru(e,t,n){e.h.set(t,n)}function Pu(e){return Ru(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mu(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Fu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ku.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Mu(t,Uu,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Mu(t,Uu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mu(n,"/"==n.charAt(0)?ju:Vu,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Mu(n,Bu)),e.join("")};var Uu=/[#\/\?@]/g,Vu=/[#\?:]/g,ju=/[#\?]/g,qu=/[#\?@]/g,Bu=/#/g;function $u(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zu(e){e.g||(e.g=new Tu,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function zu(e,t){Zu(e),t=Ku(e,t),Su(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Su((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Eu(e)))}function Hu(e,t){return Zu(e),t=Ku(e,t),Su(e.g.h,t)}function Gu(e,t,n){zu(e,t),0<n.length&&(e.i=null,e.g.set(Ku(e,t),Io(n)),e.h+=n.length)}function Ku(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Wu(e){this.l=e||Yu,e=so.PerformanceNavigationTiming?0<(e=so.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(so.g&&so.g.Ea&&so.g.Ea()&&so.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(eo=$u.prototype).add=function(e,t){Zu(this),this.i=null,e=Ku(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},eo.forEach=function(e,t){Zu(this),this.g.forEach(function(n,r){bo(n,function(n){e.call(t,n,r,this)},this)},this)},eo.T=function(){Zu(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},eo.R=function(e){Zu(this);var t=[];if("string"==typeof e)Hu(this,e)&&(t=_o(t,this.g.get(Ku(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=_o(t,e[n])}return t},eo.set=function(e,t){return Zu(this),this.i=null,Hu(this,e=Ku(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},eo.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},eo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Yu=10;function Qu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ju(e){return e.h?1:e.g?e.g.size:0}function Xu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ec(e,t){e.g?e.g.add(t):e.h=t}function tc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nc(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Io(e.i)}function rc(){}function ic(){this.g=new rc}function sc(e,t,n){const r=n||"";try{Iu(e,function(e,n){let i=e;uo(e)&&(i=_a(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function oc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function ac(e){this.l=e.$b||null,this.j=e.ib||!1}function uc(e,t){va.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=cc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wu.prototype.cancel=function(){if(this.i=nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},rc.prototype.stringify=function(e){return so.JSON.stringify(e,void 0)},rc.prototype.parse=function(e){return so.JSON.parse(e,void 0)},mo(ac,Xa),ac.prototype.g=function(){return new uc(this.l,this.j)},ac.prototype.i=function(e){return function(){return e}}({}),mo(uc,va);var cc=0;function lc(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function hc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dc(e)}function dc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(eo=uc.prototype).open=function(e,t){if(this.readyState!=cc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dc(this)},eo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||so).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},eo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hc(this)),this.readyState=cc},eo.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dc(this)),this.g&&(this.readyState=3,dc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==so.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lc(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},eo.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hc(this):dc(this),3==this.readyState&&lc(this)}},eo.Ua=function(e){this.g&&(this.response=this.responseText=e,hc(this))},eo.Ta=function(e){this.g&&(this.response=e,hc(this))},eo.ha=function(){this.g&&hc(this)},eo.setRequestHeader=function(e,t){this.v.append(e,t)},eo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},eo.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fc=so.JSON.parse;function pc(e){va.call(this),this.headers=new Tu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gc,this.K=this.L=!1}mo(pc,va);var gc="",mc=/^https?$/i,yc=["POST","PUT"];function vc(e){return"content-type"==e.toLowerCase()}function wc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,bc(e),Ic(e)}function bc(e){e.D||(e.D=!0,wa(e,"complete"),wa(e,"error"))}function _c(e){if(e.h&&void 0!==io&&(!e.C[1]||4!=Ec(e)||2!=e.ba()))if(e.v&&4==Ec(e))Ra(e.Fa,0,e);else if(wa(e,"readystatechange"),4==Ec(e)){e.h=!1;try{const u=e.ba();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===u){var i=String(e.H).match(Cu)[1]||null;if(!i&&so.self&&so.self.location){var s=so.self.location.protocol;i=s.substr(0,s.length-1)}r=!mc.test(i?i.toLowerCase():"")}n=r}if(n)wa(e,"complete"),wa(e,"success");else{e.m=6;try{var o=2<Ec(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",bc(e)}}finally{Ic(e)}}}function Ic(e,t){if(e.g){Tc(e);const r=e.g,i=e.C[0]?oo:null;e.g=null,e.C=null,t||wa(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Tc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(so.clearTimeout(e.A),e.A=null)}function Ec(e){return e.g?e.g.readyState:0}function Sc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case gc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Cc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return No(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ru(e,t,n))}function kc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ac(e){this.za=0,this.l=[],this.h=new ja,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kc("baseRetryDelayMs",5e3,e),this.$a=kc("retryDelaySeedMs",1e4,e),this.Ya=kc("forwardChannelMaxRetries",2,e),this.ra=kc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Wu(e&&e.concurrentRequestLimit),this.Ca=new ic,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function xc(e){if(Oc(e),3==e.G){var t=e.V++,n=Au(e.F);Ru(n,"SID",e.J),Ru(n,"RID",t),Ru(n,"TYPE","terminate"),Lc(e,n),(t=new ou(e,e.h,t,void 0)).K=2,t.v=Pu(Au(n)),n=!1,so.navigator&&so.navigator.sendBeacon&&(n=so.navigator.sendBeacon(t.v.toString(),"")),!n&&so.Image&&((new Image).src=t.v,n=!0),n||(t.g=Gc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),mu(t)}zc(e)}function Nc(e){e.g&&(Vc(e),e.g.cancel(),e.g=null)}function Oc(e){Nc(e),e.u&&(so.clearTimeout(e.u),e.u=null),qc(e),e.i.cancel(),e.m&&("number"==typeof e.m&&so.clearTimeout(e.m),e.m=null)}function Dc(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Rc(e)}function Rc(e){Qu(e.i)||e.m||(e.m=!0,ka(e.Ha,e),e.C=0)}function Pc(e,t){var n;n=t?t.m:e.V++;const r=Au(e.F);Ru(r,"SID",e.J),Ru(r,"RID",n),Ru(r,"AID",e.U),Lc(e,r),e.o&&e.s&&Cc(r,e.o,e.s),n=new ou(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Mc(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ec(e.i,n),hu(n,r,t)}function Lc(e,t){e.j&&Iu({},function(e,n){Ru(t,n,e)})}function Mc(e,t,n){n=Math.min(e.l.length,n);var r=e.j?po(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{sc(a,e,"req"+n+"_")}catch(_l){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Fc(e){e.g||e.u||(e.Y=1,ka(e.Ga,e),e.A=0)}function Uc(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Ya(po(e.Ga,e),$c(e,e.A)),e.A++,0))}function Vc(e){null!=e.B&&(so.clearTimeout(e.B),e.B=null)}function jc(e){e.g=new ou(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Au(e.oa);Ru(t,"RID","rpc"),Ru(t,"SID",e.J),Ru(t,"CI",e.N?"0":"1"),Ru(t,"AID",e.U),Lc(e,t),Ru(t,"TYPE","xmlhttp"),e.o&&e.s&&Cc(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Pu(Au(t)),n.s=null,n.U=!0,du(n,e)}function qc(e){null!=e.v&&(so.clearTimeout(e.v),e.v=null)}function Bc(e,t){var n=null;if(e.g==t){qc(e),Vc(e),e.g=null;var r=2}else{if(!Xu(e.i,t))return;n=t.D,tc(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;wa(r=Za(),new Wa(r,n,t,i)),Rc(e)}else Fc(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ju(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Ya(po(e.Ha,e,t),$c(e,e.C)),e.C++,0)))}(e,t)||2==r&&Uc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Zc(e,5);break;case 4:Zc(e,10);break;case 3:Zc(e,6);break;default:Zc(e,2)}}function $c(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Zc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=po(e.jb,e);n||(n=new ku("//www.google.com/images/cleardot.gif"),so.location&&"http"==so.location.protocol||xu(n,"https"),Pu(n)),function(e,t){const n=new ja;if(so.Image){const r=new Image;r.onload=go(oc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=go(oc,n,r,"TestLoadImage: error",!1,t),r.onabort=go(oc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=go(oc,n,r,"TestLoadImage: timeout",!1,t),so.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ka(2);e.G=0,e.j&&e.j.va(t),zc(e),Oc(e)}function zc(e){e.G=0,e.I=-1,e.j&&(0==nc(e.i).length&&0==e.l.length||(e.i.i.length=0,Io(e.l),e.l.length=0),e.j.ua())}function Hc(e,t,n){let r=function(e){return e instanceof ku?Au(e):new ku(e,void 0)}(n);if(""!=r.i)t&&Nu(r,t+"."+r.i),Ou(r,r.m);else{const e=so.location;r=function(e,t,n,r){var i=new ku(null,void 0);return e&&xu(i,e),t&&Nu(i,t),n&&Ou(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&No(e.aa,function(e,t){Ru(r,t,e)}),n=e.sa,(t=e.D)&&n&&Ru(r,t,n),Ru(r,"VER",e.ma),Lc(e,r),r}function Gc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new pc(n&&e.Ba&&!e.qa?new ac({ib:!0}):e.qa)).L=e.H,t}function Kc(){}function Wc(){if(Uo&&!(10<=Number(Ko)))throw Error("Environmental error: no available transport.")}function Yc(e,t){va.call(this),this.g=new Ac(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!To(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!To(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Xc(this)}function Qc(e){ru.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jc(){iu.call(this),this.status=1}function Xc(e){this.g=e}(eo=pc.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tu.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:tu),this.g.onreadystatechange=po(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void wc(this,s)}e=n||"";const i=new Tu(this.headers);r&&Iu(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=vc;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=so.FormData&&e instanceof so.FormData,!(0<=wo(yc,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tc(this),0<this.B&&((this.K=function(e){return Uo&&function(){return e=Go,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=So(String(Lo)).split("."),n=So("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=ko(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||ko(0==i[2].length,0==s[2].length)||ko(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=po(this.pa,this)):this.A=Ra(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){wc(this,s)}},eo.pa=function(){void 0!==io&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wa(this,"timeout"),this.abort(8))},eo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wa(this,"complete"),wa(this,"abort"),Ic(this))},eo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ic(this,!0)),pc.Z.M.call(this)},eo.Fa=function(){this.s||(this.F||this.v||this.l?_c(this):this.cb())},eo.cb=function(){_c(this)},eo.ba=function(){try{return 2<Ec(this)?this.g.status:-1}catch(Mo){return-1}},eo.ga=function(){try{return this.g?this.g.responseText:""}catch(Mo){return""}},eo.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fc(t)}},eo.Da=function(){return this.m},eo.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(eo=Ac.prototype).ma=8,eo.G=1,eo.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},eo.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new ou(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=Oo(s),Ro(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Mc(this,i,t),Ru(n=Au(this.F),"RID",e),Ru(n,"CVER",22),this.D&&Ru(n,"X-HTTP-Session-Id",this.D),Lc(this,n),this.o&&s&&Cc(n,this.o,s),ec(this.i,i),this.Ra&&Ru(n,"TYPE","init"),this.ja?(Ru(n,"$req",t),Ru(n,"SID","null"),i.$=!0,hu(i,n,null)):hu(i,n,t),this.G=2}}else 3==this.G&&(e?Pc(this,e):0==this.l.length||Qu(this.i)||Pc(this))},eo.Ga=function(){if(this.u=null,jc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ya(po(this.bb,this),e)}},eo.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ka(10),Nc(this),jc(this))},eo.ab=function(){null!=this.v&&(this.v=null,Nc(this),Uc(this),Ka(19))},eo.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ka(2)):(this.h.info("Failed to ping google.com"),Ka(1))},(eo=Kc.prototype).xa=function(){},eo.wa=function(){},eo.va=function(){},eo.ua=function(){},eo.Oa=function(){},Wc.prototype.g=function(e,t){return new Yc(e,t)},mo(Yc,va),Yc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ka(po(e.hb,e,t))),Ka(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Hc(e,null,e.W),Rc(e)},Yc.prototype.close=function(){xc(this.g)},Yc.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Dc(this.g,t)}else this.v?((t={}).__data__=_a(e),Dc(this.g,t)):Dc(this.g,e)},Yc.prototype.M=function(){this.g.j=null,delete this.j,xc(this.g),delete this.g,Yc.Z.M.call(this)},mo(Qc,ru),mo(Jc,iu),mo(Xc,Kc),Xc.prototype.xa=function(){wa(this.g,"a")},Xc.prototype.wa=function(e){wa(this.g,new Qc(e))},Xc.prototype.va=function(e){wa(this.g,new Jc(e))},Xc.prototype.ua=function(){wa(this.g,"b")},Wc.prototype.createWebChannel=Wc.prototype.g,Yc.prototype.send=Yc.prototype.u,Yc.prototype.open=Yc.prototype.m,Yc.prototype.close=Yc.prototype.close,Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Ja.COMPLETE="complete",eu.EventType=nu,nu.OPEN="a",nu.CLOSE="b",nu.ERROR="c",nu.MESSAGE="d",va.prototype.listen=va.prototype.N,pc.prototype.listenOnce=pc.prototype.O,pc.prototype.getLastError=pc.prototype.La,pc.prototype.getLastErrorCode=pc.prototype.Da,pc.prototype.getStatus=pc.prototype.ba,pc.prototype.getResponseJson=pc.prototype.Qa,pc.prototype.getResponseText=pc.prototype.ga,pc.prototype.send=pc.prototype.ea;var el=ro.createWebChannelTransport=function(){return new Wc},tl=ro.getStatEventTarget=function(){return Za()},nl=ro.ErrorCode=Qa,rl=ro.EventType=Ja,il=ro.Event=Ba,sl=ro.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ol=ro.FetchXmlHttpFactory=ac,al=ro.WebChannel=eu,ul=ro.XhrIo=pc;const cl="@firebase/firestore";class ll{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ll.UNAUTHENTICATED=new ll(null),ll.GOOGLE_CREDENTIALS=new ll("google-credentials-uid"),ll.FIRST_PARTY=new ll("first-party-uid"),ll.MOCK_USER=new ll("mock-user");let hl="9.6.11";const dl=new Gi.Yd("@firebase/firestore");function fl(){return dl.logLevel}function pl(e,...t){if(dl.logLevel<=Gi.in.DEBUG){const n=t.map(yl);dl.debug(`Firestore (${hl}): ${e}`,...n)}}function gl(e,...t){if(dl.logLevel<=Gi.in.ERROR){const n=t.map(yl);dl.error(`Firestore (${hl}): ${e}`,...n)}}function ml(e,...t){if(dl.logLevel<=Gi.in.WARN){const n=t.map(yl);dl.warn(`Firestore (${hl}): ${e}`,...n)}}function yl(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function vl(e="Unexpected state"){const t=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: `+e;throw gl(t),new Error(t)}function wl(e,t){e||vl()}function bl(e,t){return e}const _l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Il extends Hi.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class El{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ll.UNAUTHENTICATED))}shutdown(){}}class Cl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kl{constructor(e){this.t=e,this.currentUser=ll.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Tl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tl,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,Ti.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{pl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(pl("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(pl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(wl("string"==typeof t.accessToken),new El(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wl(null===e||"string"==typeof e),new ll(e)}}class Al{constructor(e,t,n){this.type="FirstParty",this.user=ll.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class xl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Al(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ll.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ol{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&pl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,pl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{pl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):pl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(wl("string"==typeof e.token),this.p=e.token,new Nl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Dl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Rl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Dl.A=-1;class Pl{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Rl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Ll(e,t){return e<t?-1:e>t?1:0}function Ml(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Fl(e){return e+"\0"}class Ul{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Il(_l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Il(_l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Il(_l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Il(_l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ul.fromMillis(Date.now())}static fromDate(e){return Ul.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ul(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ll(this.nanoseconds,e.nanoseconds):Ll(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vl(e)}static min(){return new Vl(new Ul(0,0))}static max(){return new Vl(new Ul(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function jl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ql(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $l{constructor(e,t,n){void 0===t?t=0:t>e.length&&vl(),void 0===n?n=e.length-t:n>e.length-t&&vl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$l.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $l?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zl extends $l{construct(e,t,n){return new Zl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Il(_l.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Zl(t)}static emptyPath(){return new Zl([])}}const zl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hl extends $l{construct(e,t,n){return new Hl(e,t,n)}static isValidIdentifier(e){return zl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Il(_l.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Il(_l.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Il(_l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Il(_l.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hl(t)}static emptyPath(){return new Hl([])}}class Gl{constructor(e){this.fields=e,e.sort(Hl.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,(e,t)=>e.isEqual(t))}}let Kl=(()=>{class e{constructor(e){this.binaryString=e}static fromBase64String(t){const n=atob(t);return new e(n)}static fromUint8Array(t){const n=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ll(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}return e.EMPTY_BYTE_STRING=new e(""),e})();const Wl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(e){if(wl(!!e),"string"==typeof e){let t=0;const n=Wl.exec(e);if(wl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ql(e.seconds),nanos:Ql(e.nanos)}}function Ql(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jl(e){return"string"==typeof e?Kl.fromBase64String(e):Kl.fromUint8Array(e)}function Xl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eh(e){const t=e.mapValue.fields.__previous_value__;return Xl(t)?eh(t):t}function th(e){const t=Yl(e.mapValue.fields.__local_write_time__.timestampValue);return new Ul(t.seconds,t.nanos)}class nh{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class rh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rh&&e.projectId===this.projectId&&e.database===this.database}}function ih(e){return null==e}function sh(e){return 0===e&&1/e==-1/0}function oh(e){return"number"==typeof e&&Number.isInteger(e)&&!sh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class ah{constructor(e){this.path=e}static fromPath(e){return new ah(Zl.fromString(e))}static fromName(e){return new ah(Zl.fromString(e).popFirst(5))}static empty(){return new ah(Zl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ah(new Zl(e.slice()))}}const uh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ch={nullValue:"NULL_VALUE"};function lh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xl(e)?4:Eh(e)?9:10:vl()}function hh(e,t){if(e===t)return!0;const n=lh(e);if(n!==lh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return th(e).isEqual(th(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Yl(e.timestampValue),r=Yl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jl(e.bytesValue).isEqual(Jl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ql(e.geoPointValue.latitude)===Ql(t.geoPointValue.latitude)&&Ql(e.geoPointValue.longitude)===Ql(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ql(e.integerValue)===Ql(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ql(e.doubleValue),r=Ql(t.doubleValue);return n===r?sh(n)===sh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ml(e.arrayValue.values||[],t.arrayValue.values||[],hh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jl(n)!==jl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hh(n[i],r[i])))return!1;return!0}(e,t);default:return vl()}}function dh(e,t){return void 0!==(e.values||[]).find(e=>hh(e,t))}function fh(e,t){if(e===t)return 0;const n=lh(e),r=lh(t);if(n!==r)return Ll(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ll(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ql(e.integerValue||e.doubleValue),r=Ql(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ph(e.timestampValue,t.timestampValue);case 4:return ph(th(e),th(t));case 5:return Ll(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Jl(e),r=Jl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ll(n[i],r[i]);if(0!==e)return e}return Ll(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ll(Ql(e.latitude),Ql(t.latitude));return 0!==n?n:Ll(Ql(e.longitude),Ql(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=fh(n[i],r[i]);if(e)return e}return Ll(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ll(r[o],s[o]);if(0!==e)return e;const t=fh(n[r[o]],i[s[o]]);if(0!==t)return t}return Ll(r.length,s.length)}(e.mapValue,t.mapValue);default:throw vl()}}function ph(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ll(e,t);const n=Yl(e),r=Yl(t),i=Ll(n.seconds,r.seconds);return 0!==i?i:Ll(n.nanos,r.nanos)}function gh(e){return mh(e)}function mh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Yl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Jl(e.bytesValue).toBase64():"referenceValue"in e?ah.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=mh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${mh(e.fields[i])}`;return n+"}"}(e.mapValue):vl();var t}function yh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vh(e){return!!e&&"integerValue"in e}function wh(e){return!!e&&"arrayValue"in e}function bh(e){return!!e&&"nullValue"in e}function _h(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ih(e){return!!e&&"mapValue"in e}function Th(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ql(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Th(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Th(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Eh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sh(e){return"nullValue"in e?ch:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?yh(rh.empty(),ah.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:vl()}function Ch(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?yh(rh.empty(),ah.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?uh:vl()}function kh(e,t){return void 0===e?t:void 0===t||fh(e,t)>0?e:t}function Ah(e,t){return void 0===e?t:void 0===t||fh(e,t)<0?e:t}class xh{constructor(e){this.value=e}static empty(){return new xh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(t)}setAll(e){let t=Hl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Th(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ih(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ql(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new xh(Th(this.value))}}function Nh(e){const t=[];return ql(e.fields,(e,n)=>{const r=new Hl([e]);if(Ih(n)){const e=Nh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Gl(t)}class Oh{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Oh(e,0,Vl.min(),Vl.min(),xh.empty(),0)}static newFoundDocument(e,t,n){return new Oh(e,1,t,Vl.min(),n,0)}static newNoDocument(e,t){return new Oh(e,2,t,Vl.min(),xh.empty(),0)}static newUnknownDocument(e,t){return new Oh(e,3,t,Vl.min(),xh.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oh(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dh{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Rh(e){return e.fields.find(e=>2===e.kind)}function Ph(e){return e.fields.filter(e=>2!==e.kind)}Dh.UNKNOWN_ID=-1;class Lh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mh(0,Vh.min())}}function Fh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vl.fromTimestamp(1e9===r?new Ul(n+1,0):new Ul(n,r));return new Vh(i,ah.empty(),t)}function Uh(e){return new Vh(e.readTime,e.key,-1)}class Vh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vh(Vl.min(),ah.empty(),-1)}static max(){return new Vh(Vl.max(),ah.empty(),-1)}}function jh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ah.comparator(e.documentKey,t.documentKey),0!==n?n:Ll(e.largestBatchId,t.largestBatchId))}class qh{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.P=null}}function Bh(e,t=null,n=[],r=[],i=null,s=null,o=null){return new qh(e,t,n,r,i,s,o)}function $h(e){const t=bl(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>{return(t=e).field.canonicalString()+t.op.toString()+gh(t.value);var t}).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ih(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>gh(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>gh(e)).join(",")),t.P=e}return t.P}function Zh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!od(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!hh(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ud(e.startAt,t.startAt)&&ud(e.endAt,t.endAt)}function zh(e){return ah.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hh(e,t){return e.filters.filter(e=>e instanceof Wh&&e.field.isEqual(t))}function Gh(e,t,n){let r,i=!0;for(const s of Hh(e,t)){let e,t=!0;switch(s.op){case"<":case"<=":e=Sh(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=ch}kh(r,e)===e&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];kh(r,e)===e&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Kh(e,t,n){let r,i=!0;for(const s of Hh(e,t)){let e,t=!0;switch(s.op){case">=":case">":e=Ch(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=uh}Ah(r,e)===e&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ah(r,e)===e&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Wh extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Yh(e,t,n):"array-contains"===t?new ed(e,n):"in"===t?new td(e,n):"not-in"===t?new nd(e,n):"array-contains-any"===t?new rd(e,n):new Wh(e,t,n)}static V(e,t,n){return"in"===t?new Qh(e,n):new Jh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(fh(t,this.value)):null!==t&&lh(this.value)===lh(t)&&this.v(fh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vl()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yh extends Wh{constructor(e,t,n){super(e,t,n),this.key=ah.fromName(n.referenceValue)}matches(e){const t=ah.comparator(e.key,this.key);return this.v(t)}}class Qh extends Wh{constructor(e,t){super(e,"in",t),this.keys=Xh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jh extends Wh{constructor(e,t){super(e,"not-in",t),this.keys=Xh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ah.fromName(e.referenceValue))}class ed extends Wh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wh(t)&&dh(t.arrayValue,this.value)}}class td extends Wh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dh(this.value.arrayValue,t)}}class nd extends Wh{constructor(e,t){super(e,"not-in",t)}matches(e){if(dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dh(this.value.arrayValue,t)}}class rd extends Wh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>dh(this.value.arrayValue,e))}}class id{constructor(e,t){this.position=e,this.inclusive=t}}class sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function od(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ad(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ah.comparator(ah.fromName(o.referenceValue),n.key):fh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ud(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hh(e.position[n],t.position[n]))return!1;return!0}class cd{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null}}function ld(e,t,n,r,i,s,o,a){return new cd(e,t,n,r,i,s,o,a)}function hd(e){return new cd(e)}function dd(e){return!ih(e.limit)&&"F"===e.limitType}function fd(e){return!ih(e.limit)&&"L"===e.limitType}function pd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gd(e){for(const t of e.filters)if(t.S())return t.field;return null}function md(e){return null!==e.collectionGroup}function yd(e){const t=bl(e);if(null===t.D){t.D=[];const e=gd(t),n=pd(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new sd(e)),t.D.push(new sd(Hl.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new sd(Hl.keyField(),e))}}}return t.D}function vd(e){const t=bl(e);if(!t.C)if("F"===t.limitType)t.C=Bh(t.path,t.collectionGroup,yd(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of yd(t))e.push(new sd(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new id(t.endAt.position,!t.endAt.inclusive):null,r=t.startAt?new id(t.startAt.position,!t.startAt.inclusive):null;t.C=Bh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.C}function wd(e,t,n){return new cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bd(e,t){return Zh(vd(e),vd(t))&&e.limitType===t.limitType}function _d(e){return`${$h(vd(e))}|lt:${e.limitType}`}function Id(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${gh(t.value)}`;var t}).join(", ")}]`),ih(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>gh(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>gh(e)).join(",")),`Target(${t})`}(vd(e))}; limitType=${e.limitType})`}function Td(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ah.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ad(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,yd(e),t)||e.endAt&&!function(e,t,n){const r=ad(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,yd(e),t))}(e,t)}function Ed(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Sd(e){return(t,n)=>{let r=!1;for(const i of yd(e)){const e=Cd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cd(e,t,n){const r=e.field.isKeyField()?ah.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fh(r,i):vl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return vl()}}function kd(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(t)?"-0":t}}function Ad(e){return{integerValue:""+e}}function xd(e,t){return oh(t)?Ad(t):kd(e,t)}class Nd{constructor(){this._=void 0}}function Od(e,t,n){return e instanceof Pd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ld?Md(e,t):e instanceof Fd?Ud(e,t):function(e,t){const n=Rd(e,t),r=jd(n)+jd(e.k);return vh(n)&&vh(e.k)?Ad(r):kd(e.M,r)}(e,t)}function Dd(e,t,n){return e instanceof Ld?Md(e,t):e instanceof Fd?Ud(e,t):n}function Rd(e,t){return e instanceof Vd?vh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Pd extends Nd{}class Ld extends Nd{constructor(e){super(),this.elements=e}}function Md(e,t){const n=qd(t);for(const r of e.elements)n.some(e=>hh(e,r))||n.push(r);return{arrayValue:{values:n}}}class Fd extends Nd{constructor(e){super(),this.elements=e}}function Ud(e,t){let n=qd(t);for(const r of e.elements)n=n.filter(e=>!hh(e,r));return{arrayValue:{values:n}}}class Vd extends Nd{constructor(e,t){super(),this.M=e,this.k=t}}function jd(e){return Ql(e.integerValue||e.doubleValue)}function qd(e){return wh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bd{constructor(e,t){this.field=e,this.transform=t}}class $d{constructor(e,t){this.version=e,this.transformResults=t}}class Zd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zd}static exists(e){return new Zd(void 0,e)}static updateTime(e){return new Zd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Hd{}function Gd(e,t,n){e instanceof Jd?function(e,t,n){const r=e.value.clone(),i=tf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xd?function(e,t,n){if(!zd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=tf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ef(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kd(e,t,n){e instanceof Jd?function(e,t,n){if(!zd(e.precondition,t))return;const r=e.value.clone(),i=nf(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Qd(t),r).setHasLocalMutations()}(e,t,n):e instanceof Xd?function(e,t,n){if(!zd(e.precondition,t))return;const r=nf(e.fieldTransforms,n,t),i=t.data;i.setAll(ef(e)),i.setAll(r),t.convertToFoundDocument(Qd(t),i).setHasLocalMutations()}(e,t,n):function(e,t){zd(e.precondition,t)&&t.convertToNoDocument(Vl.min())}(e,t)}function Wd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rd(r.transform,e||null);null!=i&&(null==n&&(n=xh.empty()),n.set(r.field,i))}return n||null}function Yd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ml(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ld&&t instanceof Ld||e instanceof Fd&&t instanceof Fd?Ml(e.elements,t.elements,hh):e instanceof Vd&&t instanceof Vd?hh(e.k,t.k):e instanceof Pd&&t instanceof Pd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Qd(e){return e.isFoundDocument()?e.version:Vl.min()}class Jd extends Hd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Xd extends Hd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function ef(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function tf(e,t,n){const r=new Map;wl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Dd(o,a,n[i]))}return r}function nf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Od(e,s,t))}return r}class rf extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class sf extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class of{constructor(e){this.count=e}}var af,uf;function cf(e){switch(e){default:return vl();case _l.CANCELLED:case _l.UNKNOWN:case _l.DEADLINE_EXCEEDED:case _l.RESOURCE_EXHAUSTED:case _l.INTERNAL:case _l.UNAVAILABLE:case _l.UNAUTHENTICATED:return!1;case _l.INVALID_ARGUMENT:case _l.NOT_FOUND:case _l.ALREADY_EXISTS:case _l.PERMISSION_DENIED:case _l.FAILED_PRECONDITION:case _l.ABORTED:case _l.OUT_OF_RANGE:case _l.UNIMPLEMENTED:case _l.DATA_LOSS:return!0}}function lf(e){if(void 0===e)return gl("GRPC error has no .code"),_l.UNKNOWN;switch(e){case af.OK:return _l.OK;case af.CANCELLED:return _l.CANCELLED;case af.UNKNOWN:return _l.UNKNOWN;case af.DEADLINE_EXCEEDED:return _l.DEADLINE_EXCEEDED;case af.RESOURCE_EXHAUSTED:return _l.RESOURCE_EXHAUSTED;case af.INTERNAL:return _l.INTERNAL;case af.UNAVAILABLE:return _l.UNAVAILABLE;case af.UNAUTHENTICATED:return _l.UNAUTHENTICATED;case af.INVALID_ARGUMENT:return _l.INVALID_ARGUMENT;case af.NOT_FOUND:return _l.NOT_FOUND;case af.ALREADY_EXISTS:return _l.ALREADY_EXISTS;case af.PERMISSION_DENIED:return _l.PERMISSION_DENIED;case af.FAILED_PRECONDITION:return _l.FAILED_PRECONDITION;case af.ABORTED:return _l.ABORTED;case af.OUT_OF_RANGE:return _l.OUT_OF_RANGE;case af.UNIMPLEMENTED:return _l.UNIMPLEMENTED;case af.DATA_LOSS:return _l.DATA_LOSS;default:return vl()}}(uf=af||(af={}))[uf.OK=0]="OK",uf[uf.CANCELLED=1]="CANCELLED",uf[uf.UNKNOWN=2]="UNKNOWN",uf[uf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",uf[uf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",uf[uf.NOT_FOUND=5]="NOT_FOUND",uf[uf.ALREADY_EXISTS=6]="ALREADY_EXISTS",uf[uf.PERMISSION_DENIED=7]="PERMISSION_DENIED",uf[uf.UNAUTHENTICATED=16]="UNAUTHENTICATED",uf[uf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",uf[uf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",uf[uf.ABORTED=10]="ABORTED",uf[uf.OUT_OF_RANGE=11]="OUT_OF_RANGE",uf[uf.UNIMPLEMENTED=12]="UNIMPLEMENTED",uf[uf.INTERNAL=13]="INTERNAL",uf[uf.UNAVAILABLE=14]="UNAVAILABLE",uf[uf.DATA_LOSS=15]="DATA_LOSS";class hf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ql(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Bl(this.inner)}size(){return this.innerSize}}class df{constructor(e,t){this.comparator=e,this.root=t||pf.EMPTY}insert(e,t){return new df(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pf.BLACK,null,null))}remove(e){return new df(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:pf.RED,this.left=null!=r?r:pf.EMPTY,this.right=null!=i?i:pf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new pf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vl();if(this.right.isRed())throw vl();const e=this.left.check();if(e!==this.right.check())throw vl();return e+(this.isRed()?0:1)}}pf.EMPTY=null,pf.RED=!0,pf.BLACK=!1,pf.EMPTY=new class{constructor(){this.size=0}get key(){throw vl()}get value(){throw vl()}get color(){throw vl()}get left(){throw vl()}get right(){throw vl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new pf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gf{constructor(e){this.comparator=e,this.data=new df(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mf(this.data.getIterator())}getIteratorFrom(e){return new mf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof gf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gf(this.comparator);return t.data=e,t}}class mf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yf(e){return e.hasNext()?e.getNext():void 0}const vf=new df(ah.comparator);function wf(){return vf}const bf=new df(ah.comparator);function _f(){return bf}function If(){return new hf(e=>e.toString(),(e,t)=>e.isEqual(t))}const Tf=new df(ah.comparator),Ef=new gf(ah.comparator);function Sf(...e){let t=Ef;for(const n of e)t=t.add(n);return t}const Cf=new gf(Ll);function kf(){return Cf}class Af{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,xf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Af(Vl.min(),n,kf(),wf(),Sf())}}class xf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xf(Kl.EMPTY_BYTE_STRING,t,Sf(),Sf(),Sf())}}class Nf{constructor(e,t,n,r){this.O=e,this.removedTargetIds=t,this.key=n,this.F=r}}class Of{constructor(e,t){this.targetId=e,this.$=t}}class Df{constructor(e,t,n=Kl.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Rf{constructor(){this.B=0,this.L=Mf(),this.U=Kl.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Sf(),t=Sf(),n=Sf();return this.L.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vl()}}),new xf(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=Mf()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Pf{constructor(e){this.nt=e,this.st=new Map,this.it=wf(),this.rt=Lf(),this.ot=new gf(Ll)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:vl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((e,n)=>{this.ft(n)&&t(n)})}_t(e){const t=e.targetId,n=e.$.count,r=this.wt(t);if(r){const e=r.target;if(zh(e))if(0===n){const n=new ah(e.path);this.ct(t,n,Oh.newNoDocument(n,Vl.min()))}else wl(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&zh(i.target)){const t=new ah(i.target.path);null!==this.it.get(t)||this.It(r,t)||this.ct(r,t,Oh.newNoDocument(t,e))}n.j&&(t.set(r,n.H()),n.J())}});let n=Sf();this.rt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.it.forEach((t,n)=>n.setReadTime(e));const r=new Af(e,t,this.ot,this.it,n);return this.it=wf(),this.rt=Lf(),this.ot=new gf(Ll),r}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Rf,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new gf(Ll),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||pl("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Rf),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Lf(){return new df(ah.comparator)}function Mf(){return new df(ah.comparator)}const Ff={asc:"ASCENDING",desc:"DESCENDING"},Uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Vf{constructor(e,t){this.databaseId=e,this.N=t}}function jf(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qf(e,t){return e.N?t.toBase64():t.toUint8Array()}function Bf(e,t){return jf(e,t.toTimestamp())}function $f(e){return wl(!!e),Vl.fromTimestamp(function(e){const t=Yl(e);return new Ul(t.seconds,t.nanos)}(e))}function Zf(e,t){return function(e){return new Zl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function zf(e){const t=Zl.fromString(e);return wl(fp(t)),t}function Hf(e,t){return Zf(e.databaseId,t.path)}function Gf(e,t){const n=zf(t);if(n.get(1)!==e.databaseId.projectId)throw new Il(_l.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Il(_l.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ah(Qf(n))}function Kf(e,t){return Zf(e.databaseId,t)}function Wf(e){const t=zf(e);return 4===t.length?Zl.emptyPath():Qf(t)}function Yf(e){return new Zl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qf(e){return wl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jf(e,t,n){return{name:Hf(e,t),fields:n.value.mapValue.fields}}function Xf(e,t,n){const r=Gf(e,t.name),i=$f(t.updateTime),s=new xh({mapValue:{fields:t.fields}}),o=Oh.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ep(e,t){let n;if(t instanceof Jd)n={update:Jf(e,t.key,t.value)};else if(t instanceof rf)n={delete:Hf(e,t.key)};else if(t instanceof Xd)n={update:Jf(e,t.key,t.data),updateMask:dp(t.fieldMask)};else{if(!(t instanceof sf))return vl();n={verify:Hf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ld)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vd)return{fieldPath:t.field.canonicalString(),increment:n.k};throw vl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Bf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vl()}(e,t.precondition)),n}function tp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Zd.updateTime($f(e.updateTime)):void 0!==e.exists?Zd.exists(e.exists):Zd.none()}(t.currentDocument):Zd.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(wl("REQUEST_TIME"===t.setToServerValue),n=new Pd):"appendMissingElements"in t?n=new Ld(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Fd(t.removeAllFromArray.values||[]):"increment"in t?n=new Vd(e,t.increment):vl();const r=Hl.fromServerFormat(t.fieldPath);return new Bd(r,n)}(e,t)):[];if(t.update){const i=Gf(e,t.update.name),s=new xh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new Gl((e.fieldPaths||[]).map(e=>Hl.fromServerFormat(e)))}(t.updateMask);return new Xd(i,s,e,n,r)}return new Jd(i,s,n,r)}if(t.delete){const r=Gf(e,t.delete);return new rf(r,n)}if(t.verify){const r=Gf(e,t.verify);return new sf(r,n)}return vl()}function np(e,t){return{documents:[Kf(e,t.path)]}}function rp(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Kf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Kf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(_h(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NAN"}};if(bh(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_h(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NAN"}};if(bh(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:up(e.field),op:ap(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:up(e.field),direction:op(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.N||ih(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ip(e){let t=Wf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=sp(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new sd(cp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ih(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){return new id(e.values||[],!!e.before)}(n.startAt));let c=null;return n.endAt&&(c=function(e){return new id(e.values||[],!e.before)}(n.endAt)),ld(t,i,o,s,a,"F",u,c)}function sp(e){return e?void 0!==e.unaryFilter?[hp(e)]:void 0!==e.fieldFilter?[lp(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>sp(e)).reduce((e,t)=>e.concat(t)):vl():[]}function op(e){return Ff[e]}function ap(e){return Uf[e]}function up(e){return{fieldPath:e.canonicalString()}}function cp(e){return Hl.fromServerFormat(e.fieldPath)}function lp(e){return Wh.create(cp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vl()}}(e.fieldFilter.op),e.fieldFilter.value)}function hp(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cp(e.unaryFilter.field);return Wh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=cp(e.unaryFilter.field);return Wh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cp(e.unaryFilter.field);return Wh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=cp(e.unaryFilter.field);return Wh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vl()}}function dp(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function fp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function pp(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=mp(t)),t=gp(e.get(n),t);return mp(t)}function gp(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function mp(e){return e+"\x01\x01"}function yp(e){const t=e.length;if(wl(t>=2),2===t)return wl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Zl.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&vl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:vl()}s=t+2}return new Zl(r)}const vp=["userId","batchId"];function wp(e,t){return[e,pp(t)]}function bp(e,t,n){return[e,pp(t),n]}const _p={},Ip=["prefixPath","collectionGroup","readTime","documentId"],Tp=["prefixPath","collectionGroup","documentId"],Ep=["collectionGroup","readTime","prefixPath","documentId"],Sp=["canonicalId","targetId"],Cp=["targetId","path"],kp=["path","targetId"],Ap=["collectionId","parent"],xp=["indexId","uid"],Np=["uid","sequenceNumber"],Op=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dp=["indexId","uid","orderedDocumentKey"],Rp=["userId","collectionPath","documentId"],Pp=["userId","collectionPath","largestBatchId"],Lp=["userId","collectionGroup","largestBatchId"],Mp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fp=[...Mp,"documentOverlays"],Up=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vp=[...Up,"indexConfiguration","indexState","indexEntries"],jp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Bp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bp((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bp?t:Bp.resolve(t)}catch(e){return Bp.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bp.reject(t)}static resolve(e){return new Bp((t,n)=>{t(e)})}static reject(e){return new Bp((t,n)=>{n(e)})}static waitFor(e){return new Bp((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Bp.resolve(!1);for(const n of e)t=t.next(e=>e?Bp.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class $p{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Tl,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Hp(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const n=Qp(t.target.error);this.At.reject(new Hp(e,n))}}static open(e,t,n,r){try{return new $p(t,e.transaction(r,n))}catch(e){throw new Hp(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(pl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Kp(t)}}class Zp{constructor(e,t,n){this.name=e,this.version=t,this.bt=n,12.2===Zp.Vt((0,Hi.z$)())&&gl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pl("SimpleDb","Removing database:",e),Wp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Hi.hl)())return!1;if(Zp.St())return!0;const e=(0,Hi.z$)(),t=Zp.Vt(e),n=0<t&&t<10,r=Zp.Dt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Nt(e){var t=this;return(0,Ti.Z)(function*(){return t.db||(pl("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new Hp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Il(_l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Il(_l.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Hp(e,n))},i.onupgradeneeded=e=>{pl("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.bt.kt(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{pl("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=e=>t.Mt(e)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,Ti.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Nt(e);const t=$p.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).next(e=>(t.Pt(),e)).catch(e=>(t.abort(e),Bp.reject(e))).toPromise();return o.catch(()=>{}),yield t.Rt,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(pl("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zp{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Wp(this.Ft.delete())}}class Hp extends Il{constructor(e,t){super(_l.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gp(e){return"IndexedDbTransactionError"===e.name}class Kp{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(pl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(pl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Wp(n)}add(e){return pl("SimpleDb","ADD",this.store.name,e,e),Wp(this.store.add(e))}get(e){return Wp(this.store.get(e)).next(t=>(void 0===t&&(t=null),pl("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return pl("SimpleDb","DELETE",this.store.name,e),Wp(this.store.delete(e))}count(){return pl("SimpleDb","COUNT",this.store.name),Wp(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Kt(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new Bp((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}Gt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Bp((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Qt(e,t){pl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const r=this.cursor(n);return this.Kt(r,(e,t,n)=>n.delete())}Wt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new Bp((n,r)=>{t.onerror=e=>{const t=Qp(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Kt(e,t){const n=[];return new Bp((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new zp(i),o=t(i.primaryKey,i.value,s);if(o instanceof Bp){const e=o.catch(e=>(s.done(),Bp.reject(e)));n.push(e)}s.isDone?r():null===s.Lt?i.continue():i.continue(s.Lt)}}).next(()=>Bp.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wp(e){return new Bp((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Qp(e.target.error);n(t)}})}let Yp=!1;function Qp(e){const t=Zp.Vt((0,Hi.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Il("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yp||(Yp=!0,setTimeout(()=>{throw e},0)),e}}return e}class Jp extends qp{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Xp(e,t){const n=bl(e);return Zp.xt(n.Ht,t)}class eg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gd(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Kd(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Kd(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Vl.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sf())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,(e,t)=>Yd(e,t))&&Ml(this.baseMutations,e.baseMutations,(e,t)=>Yd(e,t))}}class tg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){wl(e.mutations.length===n.length);let r=Tf;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new tg(e,t,n,r)}}class ng{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rg{constructor(e,t,n,r,i=Vl.min(),s=Vl.min(),o=Kl.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new rg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ig{constructor(e){this.Jt=e}}function sg(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:og(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Hf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:jf(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ag(t.version)};else{if(!t.isUnknownDocument())return vl();r.unknownDocument={path:n.path.toArray(),version:ag(t.version)}}return r}function og(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ag(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ug(e){const t=new Ul(e.seconds,e.nanoseconds);return Vl.fromTimestamp(t)}function cg(e,t){const n=(t.baseMutations||[]).map(t=>tp(e.Jt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>tp(e.Jt,t)),i=Ul.fromMillis(t.localWriteTimeMs);return new eg(t.batchId,i,n,r)}function lg(e){const t=ug(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ug(e.lastLimboFreeSnapshotVersion):Vl.min();let r;var i;return void 0!==e.query.documents?(wl(1===(i=e.query).documents.length),r=vd(hd(Wf(i.documents[0])))):r=function(e){return vd(ip(e))}(e.query),new rg(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Kl.fromBase64String(e.resumeToken))}function hg(e,t){const n=ag(t.snapshotVersion),r=ag(t.lastLimboFreeSnapshotVersion);let i;i=zh(t.target)?np(e.Jt,t.target):rp(e.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$h(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dg(e){const t=ip({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wd(t,t.limit,"L"):t}function fg(e,t){return new ng(t.largestBatchId,tp(e.Jt,t.overlayMutation))}function pg(e,t){const n=t.path.lastSegment();return[e,pp(t.path.popLast()),n]}class gg{getBundleMetadata(e,t){return mg(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:ug(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return mg(e).put({bundleId:(n=t).id,createTime:ag($f(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return yg(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:dg(t.bundledQuery),readTime:ug(t.readTime)};var t})}saveNamedQuery(e,t){return yg(e).put(function(e){return{name:e.name,readTime:ag($f(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function mg(e){return Xp(e,"bundles")}function yg(e){return Xp(e,"namedQueries")}class vg{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new vg(e,t.uid||"")}getOverlay(e,t){return wg(e).get(pg(this.userId,t)).next(e=>e?fg(this.M,e):null)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new ng(t,i);r.push(this.Xt(e,s))}),Bp.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(pp(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(wg(e).Qt("collectionPathOverlayIndex",r))}),Bp.waitFor(i)}getOverlaysForCollection(e,t,n){const r=If(),i=pp(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return wg(e).qt("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=fg(this.M,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=If();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wg(e).Wt({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=fg(this.M,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}Xt(e,t){return wg(e).put(function(e,t,n){const[r,i,s]=pg(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ep(e.Jt,n.mutation)}}(this.M,this.userId,t))}}function wg(e){return Xp(e,"documentOverlays")}let bg=(()=>{class e{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ql(e.integerValue));else if("doubleValue"in e){const n=Ql(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),sh(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Jl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?Eh(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):vl()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const r of Object.keys(n))this.re(r,t),this.te(n[r],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const r of n)this.te(r,t)}ae(e,t){this.ne(t,37),ah.fromName(e).path.forEach(e=>{this.ne(t,60),this.le(e,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}return e.fe=new e,e})();function _g(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ig(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=_g(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Tg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),n=Ig(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),n=Ig(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Eg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Sg{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Cg{constructor(){this.De=new Tg,this.Ce=new Eg(this.De),this.xe=new Sg(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class kg{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new kg(this.indexId,this.documentKey,this.arrayValue,n)}}function Ag(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=xg(e.arrayValue,t.arrayValue),0!==n?n:(n=xg(e.directionalValue,t.directionalValue),0!==n?n:ah.comparator(e.documentKey,t.documentKey)))}function xg(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Ng{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=Rh(e);if(void 0!==t&&!this.Be(t))return!1;const n=Ph(e);let r=0,i=0;for(;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){const e=n[r];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Og{constructor(){this.qe=new Dg}addToCollectionParentIndex(e,t){return this.qe.add(t),Bp.resolve()}getCollectionParents(e,t){return Bp.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Bp.resolve()}deleteFieldIndex(e,t){return Bp.resolve()}getDocumentsMatchingTarget(e,t){return Bp.resolve(null)}getFieldIndex(e,t){return Bp.resolve(null)}getFieldIndexes(e,t){return Bp.resolve([])}getNextCollectionGroupToUpdate(e){return Bp.resolve(null)}updateCollectionGroup(e,t,n){return Bp.resolve()}updateIndexEntries(e,t){return Bp.resolve()}}class Dg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gf(Zl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gf(Zl.comparator)).toArray()}}const Rg=new Uint8Array(0);class Pg{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Dg,this.Ge=new hf(e=>$h(e),(e,t)=>Zh(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const i={collectionId:n,parent:pp(r)};return Lg(e).put(i)}return Bp.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Fl(t),""],!1,!0);return Lg(e).qt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(yp(r.parent))}return n})}addFieldIndex(e,t){const n=Fg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);return delete r.indexId,n.add(r).next()}deleteFieldIndex(e,t){const n=Fg(e),r=Ug(e),i=Mg(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=Mg(e);let r=!0;const i=new Map;return Bp.forEach(this.Qe(t),t=>this.getFieldIndex(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=Sf();const r=[];return Bp.forEach(i,(i,s)=>{var o;pl("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${$h(t)}`);const a=function(e,t){const n=Rh(t);if(void 0===n)return null;for(const r of Hh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),u=function(e,t){const n=new Map;for(const r of Ph(t))for(const t of Hh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Ph(t)){const t=0===i.kind?Gh(e,i.fieldPath,e.startAt):Kh(e,i.fieldPath,e.startAt);if(!t.value)return null;n.push(t.value),r&&(r=t.inclusive)}return new id(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Ph(t)){const t=0===i.kind?Kh(e,i.fieldPath,e.endAt):Gh(e,i.fieldPath,e.endAt);if(!t.value)return null;n.push(t.value),r&&(r=t.inclusive)}return new id(n,r)}(s,i),h=this.je(i,s,c),d=this.je(i,s,l),f=this.We(i,s,u),p=this.ze(i.indexId,a,h,!!c&&c.inclusive,d,!!l&&l.inclusive,f);return Bp.forEach(p,i=>n.Gt(i,t.limit).next(t=>{t.forEach(t=>{const n=ah.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Bp.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),u=a/(null!=t?t.length:1),c=[];for(let l=0;l<a;++l){const a=t?this.He(t[l/u]):Rg,h=n?this.Je(e,a,n[l%u],r):this.Ye(e),d=i?this.Xe(e,a,i[l%u],s):this.Ye(e+1);c.push(...this.createRange(h,d,o.map(t=>this.Je(e,a,t,!0))))}return c}Je(e,t,n,r){const i=new kg(e,ah.empty(),t,n);return r?i:i.ke()}Xe(e,t,n,r){const i=new kg(e,ah.empty(),t,n);return r?i.ke():i}Ye(e){return new kg(e,ah.empty(),Rg,Rg)}getFieldIndex(e,t){const n=new Ng(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{const t=e.filter(e=>n.$e(e));return t.sort((e,t)=>t.fields.length-e.fields.length),t.length>0?t[0]:null})}Ze(e,t){const n=new Cg;for(const r of Ph(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ne(r.kind);bg.fe.Zt(e,i)}return n.Se()}He(e){const t=new Cg;return bg.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const n=new Cg;return bg.fe.Zt(yh(this.databaseId,t),n.Ne(function(e){const t=Ph(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}We(e,t,n){if(null===n)return[];let r=[];r.push(new Cg);let i=0;for(const s of Ph(e)){const e=n[i++];for(const n of r)if(this.en(t,s.fieldPath)&&wh(e))r=this.nn(r,s,e);else{const t=n.Ne(s.kind);bg.fe.Zt(e,t)}}return this.sn(r)}je(e,t,n){return null==n?null:this.We(e,t,n.position)}sn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}nn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Cg;n.seed(e.Se()),bg.fe.Zt(s,n.Ne(t.kind)),i.push(n)}return i}en(e,t){return!!e.filters.find(e=>e instanceof Wh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Fg(e),r=Ug(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next(e=>{const t=[];return Bp.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Mh(t.sequenceNumber,new Vh(ug(t.readTime),new ah(yp(t.documentKey)),t.largestBatchId)):Mh.empty(),r=e.fields.map(([e,t])=>new Lh(Hl.fromServerFormat(e),t));return new Dh(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ll(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Fg(e),i=Ug(e);return this.rn(e).next(e=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>Bp.forEach(t,t=>i.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ag(r.readTime),documentKey:pp(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Bp.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?Bp.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),Bp.forEach(i,n=>this.on(e,t,n).next(t=>{const i=this.un(r,n);return t.isEqual(i)?Bp.resolve():this.an(e,r,n,t,i)}))))})}cn(e,t,n,r){return Mg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}hn(e,t,n,r){return Mg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}on(e,t,n){const r=Mg(e);let i=new gf(Ag);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(e,r)=>{i=i.add(new kg(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}un(e,t){let n=new gf(Ag);const r=this.Ze(t,e);if(null==r)return n;const i=Rh(t);if(null!=i){const s=e.data.field(i.fieldPath);if(wh(s))for(const i of s.arrayValue.values||[])n=n.add(new kg(t.indexId,e.key,this.He(i),r))}else n=n.add(new kg(t.indexId,e.key,Rg,r));return n}an(e,t,n,r,i){pl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=yf(s),u=yf(o);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=yf(o)):t?(i(a),a=yf(s)):(a=yf(s),u=yf(o))}}(r,i,Ag,r=>{s.push(this.cn(e,t,n,r))},r=>{s.push(this.hn(e,t,n,r))}),Bp.waitFor(s)}rn(e){let t=1;return Ug(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Ag(e,t)).filter((e,t,n)=>!t||0!==Ag(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=Ag(s,e),i=Ag(s,t);if(0===n)r[0]=e.ke();else if(n>0&&i<0)r.push(s),r.push(s.ke());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2)i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Rg,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Rg,[]]));return i}}function Lg(e){return Xp(e,"collectionParents")}function Mg(e){return Xp(e,"indexEntries")}function Fg(e){return Xp(e,"indexConfiguration")}function Ug(e){return Xp(e,"indexState")}const Vg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jg{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new jg(e,jg.DEFAULT_COLLECTION_PERCENTILE,jg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qg(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Wt({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{wl(1===a)}));const c=[];for(const l of n.mutations){const e=bp(t,l.key.path,n.batchId);s.push(i.delete(e)),c.push(l.key)}return Bp.waitFor(s).next(()=>c)}function Bg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw vl();t=e.noDocument}return JSON.stringify(t).length}jg.DEFAULT_COLLECTION_PERCENTILE=10,jg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jg.DEFAULT=new jg(41943040,jg.DEFAULT_COLLECTION_PERCENTILE,jg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jg.DISABLED=new jg(-1,0,0);class $g{constructor(e,t,n,r){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=r,this.ln={}}static Yt(e,t,n,r){wl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new $g(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zg(e).Wt({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Hg(e),s=zg(e);return s.add({}).next(o=>{wl("number"==typeof o);const a=new eg(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>ep(e.Jt,t)),i=n.mutations.map(t=>ep(e.Jt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.M,this.userId,a),c=[];let l=new gf((e,t)=>Ll(e.canonicalString(),t.canonicalString()));for(const e of r){const t=bp(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(s.put(u)),c.push(i.put(t,_p))}return l.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.ln[o]=a.keys()}),Bp.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return zg(e).get(t).next(e=>e?(wl(e.userId===this.userId),cg(this.M,e)):null)}fn(e,t){return this.ln[t]?Bp.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.ln[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return zg(e).Wt({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(wl(t.batchId>=n),i=cg(this.M,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zg(e).qt("userMutationsIndex",t).next(e=>e.map(e=>cg(this.M,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=wp(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Hg(e).Wt({range:r},(n,r,s)=>{const[o,a,u]=n,c=yp(a);if(o===this.userId&&t.path.isEqual(c))return zg(e).get(u).next(e=>{if(!e)throw vl();wl(e.userId===this.userId),i.push(cg(this.M,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gf(Ll);const r=[];return t.forEach(t=>{const i=wp(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Hg(e).Wt({range:s},(e,r,i)=>{const[s,o,a]=e,u=yp(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),Bp.waitFor(r).next(()=>this.dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=wp(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new gf(Ll);return Hg(e).Wt({range:s},(e,t,i)=>{const[s,a,u]=e,c=yp(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.dn(e,o))}dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(zg(e).get(t).next(e=>{if(null===e)throw vl();wl(e.userId===this.userId),n.push(cg(this.M,e))}))}),Bp.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return qg(e.Ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),Bp.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Bp.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Hg(e).Wt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=yp(e[1]);r.push(t)}else n.done()}).next(()=>{wl(0===r.length)})})}containsKey(e,t){return Zg(e,this.userId,t)}wn(e){return Gg(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zg(e,t,n){const r=wp(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Hg(e).Wt({range:s,jt:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function zg(e){return Xp(e,"mutations")}function Hg(e){return Xp(e,"documentMutations")}function Gg(e){return Xp(e,"mutationQueues")}class Kg{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Kg(0)}static yn(){return new Kg(-1)}}class Wg{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const n=new Kg(t.highestTargetId);return t.highestTargetId=n.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(e=>Vl.fromTimestamp(new Ul(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.pn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(n=>(n.targetCount+=1,this.En(t,n),this.In(e,n))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yg(e).delete(t.targetId)).next(()=>this.pn(e)).next(t=>(wl(t.targetCount>0),t.targetCount-=1,this.In(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Yg(e).Wt((s,o)=>{const a=lg(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Bp.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Yg(e).Wt((e,n)=>{const r=lg(n);t(r)})}pn(e){return Qg(e).get("targetGlobalKey").next(e=>(wl(null!==e),e))}In(e,t){return Qg(e).put("targetGlobalKey",t)}Tn(e,t){return Yg(e).put(hg(this.M,t))}En(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.pn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=$h(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Yg(e).Wt({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=lg(n);Zh(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Jg(e);return t.forEach(t=>{const s=pp(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),Bp.waitFor(r)}removeMatchingKeys(e,t,n){const r=Jg(e);return Bp.forEach(t,t=>{const i=pp(t.path);return Bp.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Jg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Jg(e);let i=Sf();return r.Wt({range:n,jt:!0},(e,t,n)=>{const r=yp(e[1]),s=new ah(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=pp(t.path),r=IDBKeyRange.bound([n],[Fl(n)],!1,!0);let i=0;return Jg(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return Yg(e).get(t).next(e=>e?lg(e):null)}}function Yg(e){return Xp(e,"targets")}function Qg(e){return Xp(e,"targetGlobal")}function Jg(e){return Xp(e,"targetDocuments")}function Xg(e){return em.apply(this,arguments)}function em(){return(em=(0,Ti.Z)(function*(e){if(e.code!==_l.FAILED_PRECONDITION||e.message!==jp)throw e;pl("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function tm([e,t],[n,r]){const i=Ll(e,n);return 0===i?Ll(t,r):i}class nm{constructor(e){this.An=e,this.buffer=new gf(tm),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();tm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rm{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const n=this.Vn?3e5:6e4;pl("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Ti.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){Gp(e)?pl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Xg(e)}yield t.Sn(e)}))}}class im{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Bp.resolve(Dl.A);const n=new nm(t);return this.Dn.forEachTarget(e,e=>n.bn(e.sequenceNumber)).next(()=>this.Dn.xn(e,e=>n.bn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Dn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pl("LruGarbageCollector","Garbage collection skipped; disabled"),Bp.resolve(Vg)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pl("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vg):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(pl("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),fl()<=Gi.in.DEBUG&&pl("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),Bp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class sm{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new im(e,t)}(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}kn(e){let t=0;return this.xn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(e,n)=>t(n))}addReference(e,t,n){return om(e,n)}removeReference(e,t,n){return om(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return om(e,t)}On(e,t){return function(e,t){let n=!1;return Gg(e).zt(r=>Zg(e,r,t).next(e=>(e&&(n=!0),Bp.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Mn(e,(s,o)=>{if(o<=t){const t=this.On(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,Vl.min()),Jg(e).delete([0,pp(s.path)])))});r.push(t)}}).next(()=>Bp.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return om(e,t)}Mn(e,t){const n=Jg(e);let r,i=Dl.A;return n.Wt({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Dl.A&&t(new ah(yp(r)),i),i=o,r=s):i=Dl.A}).next(()=>{i!==Dl.A&&t(new ah(yp(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function om(e,t){return Jg(e).put(function(e,t){return{targetId:0,path:pp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class am{constructor(){this.changes=new hf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bp.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class um{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return hm(e).put(n)}removeEntry(e,t,n){return hm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],og(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Fn(e,n)))}getEntry(e,t){let n=Oh.newInvalidDocument(t);return hm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dm(t))},(e,r)=>{n=this.$n(t,r)}).next(()=>n)}Bn(e,t){let n={size:0,document:Oh.newInvalidDocument(t)};return hm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dm(t))},(e,r)=>{n={document:this.$n(t,r),size:Bg(r)}}).next(()=>n)}getEntries(e,t){let n=wf();return this.Ln(e,t,(e,t)=>{const r=this.$n(e,t);n=n.insert(e,r)}).next(()=>n)}Un(e,t){let n=wf(),r=new df(ah.comparator);return this.Ln(e,t,(e,t)=>{const i=this.$n(e,t);n=n.insert(e,i),r=r.insert(e,Bg(t))}).next(()=>({documents:n,qn:r}))}Ln(e,t,n){if(t.isEmpty())return Bp.resolve();let r=new gf(pm);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(dm(r.first()),dm(r.last())),s=r.getIterator();let o=s.getNext();return hm(e).Wt({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=ah.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&pm(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.Ut(dm(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),og(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hm(e).qt(IDBKeyRange.bound(r,i,!0)).next(e=>{let t=wf();for(const n of e){const e=this.$n(ah.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t})}getAllFromCollectionGroup(e,t,n,r){let i=wf();const s=fm(t,n),o=fm(t,Vh.max());return hm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.$n(ah.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new cm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return lm(e).get("remoteDocumentGlobalKey").next(e=>(wl(!!e),e))}Fn(e,t){return lm(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Xf(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ah.fromSegments(t.noDocument.path),r=ug(t.noDocument.readTime);n=Oh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return vl();{const e=ah.fromSegments(t.unknownDocument.path),r=ug(t.unknownDocument.version);n=Oh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ul(e[0],e[1]);return Vl.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(Vl.min()))return e}return Oh.newInvalidDocument(e)}}class cm extends am{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new hf(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new gf((e,t)=>Ll(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Gn.get(i);if(t.push(this.Kn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=sg(this.Kn.M,s);r=r.add(i.path.popLast());const u=Bg(a);n+=u-o.size,t.push(this.Kn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=sg(this.Kn.M,s.convertToNoDocument(Vl.min()));t.push(this.Kn.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Kn.updateMetadata(e,n)),Bp.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:e,qn:t})=>(t.forEach((t,n)=>{this.Gn.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function lm(e){return Xp(e,"remoteDocumentGlobal")}function hm(e){return Xp(e,"remoteDocumentsV14")}function dm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fm(e,t){const n=t.documentKey.path.toArray();return[e,og(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ll(n[s],r[s]),i)return i;return i=Ll(n.length,r.length),i||(i=Ll(n[n.length-2],r[r.length-2]),i||Ll(n[n.length-1],r[r.length-1]))}class gm{constructor(e){this.M=e}kt(e,t,n,r){const i=new $p("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vp,{unique:!0}),e.createObjectStore("documentMutations")}(e),mm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Bp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mm(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").qt().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vp,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return Bp.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Qn(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.jn(i)))),n<7&&r>=7&&(s=s.next(()=>this.Wn(i))),n<8&&r>=8&&(s=s.next(()=>this.zn(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Hn(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Rp});t.createIndex("collectionPathOverlayIndex",Pp,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Lp,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ip});t.createIndex("documentKeyIndex",Tp),t.createIndex("collectionGroupIndex",Ep)}(e)).next(()=>this.Jn(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:xp}).createIndex("sequenceNumberIndex",Np,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Op}).createIndex("documentKeyIndex",Dp,{unique:!1})}(e)})),s}jn(e){let t=0;return e.store("remoteDocuments").Wt((e,n)=>{t+=Bg(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Qn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next(t=>Bp.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",r).next(n=>Bp.forEach(n,n=>{wl(n.userId===t.userId);const r=cg(this.M,n);return qg(e,t.userId,r).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.Wt((n,i)=>{const s=new Zl(n),o=function(e){return[0,pp(e)]}(s);r.push(t.get(o).next(n=>n?Bp.resolve():(n=>t.put({targetId:0,path:pp(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>Bp.waitFor(r))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Ap});const n=t.store("collectionParents"),r=new Dg,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:pp(r)})}};return t.store("remoteDocuments").Wt({jt:!0},(e,t)=>{const n=new Zl(e);return i(n.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([e,t,n],r)=>{const s=yp(t);return i(s.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((e,n)=>{const r=lg(n),i=hg(this.M,r);return t.put(i)})}Jn(e,t){const n=t.store("remoteDocuments"),r=[];return n.Wt((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new ah(Zl.fromString(o.document.name).popFirst(5)):o.noDocument?ah.fromSegments(o.noDocument.path):o.unknownDocument?ah.fromSegments(o.unknownDocument.path):vl()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>Bp.waitFor(r))}}function mm(e){e.createObjectStore("targetDocuments",{keyPath:Cp}).createIndex("documentTargetsIndex",kp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Sp,{unique:!0}),e.createObjectStore("targetGlobal")}const ym="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vm{constructor(e,t,n,r,i,s,o,a,u,c,l=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Yn=i,this.window=s,this.document=o,this.Xn=u,this.Zn=c,this.ts=l,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=e=>Promise.resolve(),!vm.vt())throw new Il(_l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sm(this,r),this.hs=t+"main",this.M=new ig(a),this.ls=new Zp(this.hs,this.ts,new gm(this.M)),this.fs=new Wg(this.referenceDelegate,this.M),this.ds=function(e){return new um(e)}(this.M),this._s=new gg,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===c&&gl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Il(_l.FAILED_PRECONDITION,ym);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Dl(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var n=(0,Ti.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ti.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ti.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Gp(e))return pl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return wm(e).get("owner").next(e=>Bp.resolve(this.bs(e)))}Vs(e){return bm(e).delete(this.clientId)}vs(){var e=this;return(0,Ti.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Xp(t,"clientMetadata");return n.qt().next(t=>{const r=e.Ds(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return Bp.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.ws)for(const n of t)e.ws.removeItem(e.Cs(n.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Bp.resolve(!0):wm(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Il(_l.FAILED_PRECONDITION,ym);return!1}}return!(!this.networkEnabled||!this.inForeground)||bm(e).qt().next(e=>void 0===this.Ds(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&pl("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,Ti.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new Jp(t,Dl.A);return e.Rs(n).next(()=>e.Vs(n))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(e=>this.Ss(e.updateTimeMs,t)&&!this.xs(e.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>bm(e).qt().next(e=>this.Ds(e,18e5).map(e=>e.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return $g.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Pg(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return vg.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,n){pl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=14===(s=this.ts)?Vp:13===s?Up:12===s?Fp:11===s?Mp:void vl();var s;let o;return this.ls.runTransaction(e,r,i,r=>(o=new Jp(r,this.es?this.es.next():Dl.A),"readwrite-primary"===t?this.Es(o).next(e=>!!e||this.As(o)).next(t=>{if(!t)throw gl(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Il(_l.FAILED_PRECONDITION,jp);return n(o)}).next(e=>this.Ps(o).next(()=>e)):this.$s(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}$s(e){return wm(e).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Il(_l.FAILED_PRECONDITION,ym)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wm(e).put("owner",t)}static vt(){return Zp.vt()}Rs(e){const t=wm(e);return t.get("owner").next(e=>this.bs(e)?(pl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Bp.resolve())}Ss(e,t){const n=Date.now();return!(e<n-t||e>n&&(gl(`Detected an update time that is in the future: ${e} > ${n}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Hi.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return pl("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return gl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(mo){gl("Failed to set zombie client id.",mo)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(mo){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wm(e){return Xp(e,"owner")}function bm(e){return Xp(e,"clientMetadata")}function _m(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Im{constructor(e,t,n){this.ds=e,this.Bs=t,this.indexManager=n}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Us(e,t,n))}Us(e,t,n){return this.ds.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}qs(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Ks(e,t){return this.ds.getEntries(e,t).next(t=>this.Gs(e,t).next(()=>t))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.qs(t,e))}Qs(e,t,n){return function(e){return ah.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):md(t)?this.Ws(e,t,n):this.zs(e,t,n)}js(e,t){return this.Ls(e,new ah(t)).next(e=>{let t=_f();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Ws(e,t,n){const r=t.collectionGroup;let i=_f();return this.indexManager.getCollectionParents(e,r).next(s=>Bp.forEach(s,s=>{const o=function(e,t){return new cd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.zs(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}zs(e,t,n){let r;return this.ds.getAllFromCollection(e,t.path,n).next(n=>(r=n,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Oh.newInvalidDocument(n),r=r.insert(n,i)),Kd(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}).next(()=>(r.forEach((e,n)=>{Td(t,n)||(r=r.remove(e))}),r))}}class Tm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hs=n,this.Js=r}static Ys(e,t){let n=Sf(),r=Sf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tm(e,t.fromCache,n,r)}}class Em{Xs(e){this.Zs=e}Qs(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Vl.min())?this.ti(e,t):this.Zs.Ks(e,r).next(i=>{const s=this.ei(t,i);return(dd(t)||fd(t))&&this.ni(t.limitType,s,r,n)?this.ti(e,t):(fl()<=Gi.in.DEBUG&&pl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Id(t)),this.Zs.Qs(e,t,Fh(n,-1)).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}ei(e,t){let n=new gf(Sd(e));return t.forEach((t,r)=>{Td(e,r)&&(n=n.add(r))}),n}ni(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ti(e,t){return fl()<=Gi.in.DEBUG&&pl("QueryEngine","Using full collection scan to execute query:",Id(t)),this.Zs.Qs(e,t,Vh.min())}}class Sm{constructor(e,t,n,r){this.persistence=e,this.si=t,this.M=r,this.ii=new df(Ll),this.ri=new hf(e=>$h(e),Zh),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(n)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Im(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function Cm(e,t,n,r){return new Sm(e,t,n,r)}function km(e,t){return Am.apply(this,arguments)}function Am(){return(Am=(0,Ti.Z)(function*(e,t){const n=bl(e);return yield n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.Bs.getAllMutationBatches(e).next(i=>(r=i,n.ai(t),n.Bs.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Sf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.ci.Ks(e,o).next(e=>({hi:e,removedBatchIds:i,addedBatchIds:s}))})})})).apply(this,arguments)}function xm(e,t){const n=bl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Bp.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);wl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.Bs.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.Bs.performConsistencyCheck(e)).next(()=>n.ci.Ks(e,r))})}function Nm(e){const t=bl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function Om(e,t){const n=bl(e),r=t.snapshotVersion;let i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;const o=[];t.targetChanges.forEach((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.fs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.fs.addMatchingKeys(e,s.addedDocuments,a)));let c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(Kl.EMPTY_BYTE_STRING,Vl.min()).withLastLimboFreeSnapshotVersion(Vl.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,s)&&o.push(n.fs.updateTargetData(e,c))});let a=wf();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Dm(e,s,t.documentUpdates).next(e=>{a=e})),!r.isEqual(Vl.min())){const t=n.fs.getLastRemoteSnapshotVersion(e).next(t=>n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Bp.waitFor(o).next(()=>s.apply(e)).next(()=>n.ci.Gs(e,a)).next(()=>a)}).then(e=>(n.ii=i,e))}function Dm(e,t,n){let r=Sf();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=wf();return n.forEach((n,i)=>{const s=e.get(n);i.isNoDocument()&&i.version.isEqual(Vl.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):pl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),r})}function Rm(e,t){const n=bl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)))}function Pm(e,t){const n=bl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.fs.getTargetData(e,t).next(i=>i?(r=i,Bp.resolve(r)):n.fs.allocateTargetId(e).next(i=>(r=new rg(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e})}function Lm(e,t,n){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,Ti.Z)(function*(e,t,n){const r=bl(e),i=r.ii.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Gp(e))throw e;pl("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function Fm(e,t,n){const r=bl(e);let i=Vl.min(),s=Sf();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=bl(e),i=r.ri.get(n);return void 0!==i?Bp.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,vd(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.si.Qs(e,t,n?i:Vl.min(),n?s:Sf())).next(e=>(jm(r,Ed(t),e),{documents:e,li:s})))}function Um(e,t){const n=bl(e),r=bl(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function Vm(e,t){const n=bl(e),r=n.oi.get(t)||Vl.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.ui.getAllFromCollectionGroup(e,t,Fh(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(jm(n,t,e),e))}function jm(e,t,n){let r=Vl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.oi.set(t,r)}function qm(){return(qm=(0,Ti.Z)(function*(e,t,n,r){const i=bl(e);let s=Sf(),o=wf();for(const c of n){const e=t.fi(c.metadata.name);c.document&&(s=s.add(e));const n=t.di(c);n.setReadTime(t._i(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ui.newChangeBuffer({trackRemovals:!0}),u=yield Pm(i,function(e){return vd(hd(Zl.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Dm(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.fs.removeMatchingKeysForTargetId(e,u.targetId).next(()=>i.fs.addMatchingKeys(e,s,u.targetId)).next(()=>i.ci.Gs(e,t)).next(()=>t)))})).apply(this,arguments)}function Bm(e,t){return $m.apply(this,arguments)}function $m(){return($m=(0,Ti.Z)(function*(e,t,n=Sf()){const r=yield Pm(e,vd(dg(t.bundledQuery))),i=bl(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=$f(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i._s.saveNamedQuery(e,t);const o=r.withResumeToken(Kl.EMPTY_BYTE_STRING,s);return i.ii=i.ii.insert(o.targetId,o),i.fs.updateTargetData(e,o).next(()=>i.fs.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.fs.addMatchingKeys(e,n,r.targetId)).next(()=>i._s.saveNamedQuery(e,t))})})).apply(this,arguments)}class Zm{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return Bp.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:$f(n.createTime)}),Bp.resolve()}getNamedQuery(e,t){return Bp.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:dg(e.bundledQuery),readTime:$f(e.readTime)}}(t)),Bp.resolve()}}class zm{constructor(){this.overlays=new df(ah.comparator),this.gi=new Map}getOverlay(e,t){return Bp.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.Xt(e,t,r)}),Bp.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.gi.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.gi.delete(n)),Bp.resolve()}getOverlaysForCollection(e,t,n){const r=If(),i=t.length+1,s=new ah(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bp.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new df((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=If(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=If(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Bp.resolve(o)}Xt(e,t,n){if(null===n)return;const r=this.overlays.get(n.key);if(null!==r){const e=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ng(t,n));let i=this.gi.get(t);void 0===i&&(i=Sf(),this.gi.set(t,i)),this.gi.set(t,i.add(n.key))}}class Hm{constructor(){this.yi=new gf(Gm.pi),this.Ii=new gf(Gm.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const n=new Gm(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}Ei(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Ai(new Gm(e,t))}Ri(e,t){e.forEach(e=>this.removeReference(e,t))}Pi(e){const t=new ah(new Zl([])),n=new Gm(t,e),r=new Gm(t,e+1),i=[];return this.Ii.forEachInRange([n,r],e=>{this.Ai(e),i.push(e.key)}),i}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new ah(new Zl([])),n=new Gm(t,e),r=new Gm(t,e+1);let i=Sf();return this.Ii.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Gm(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Gm{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return ah.comparator(e.key,t.key)||Ll(e.vi,t.vi)}static Ti(e,t){return Ll(e.vi,t.vi)||ah.comparator(e.key,t.key)}}class Km{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new gf(Gm.pi)}checkEmpty(e){return Bp.resolve(0===this.Bs.length)}addMutationBatch(e,t,n,r){const i=this.Si;this.Si++;const s=new eg(i,t,n,r);this.Bs.push(s);for(const o of r)this.Di=this.Di.add(new Gm(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Bp.resolve(s)}lookupMutationBatch(e,t){return Bp.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.xi(t+1),r=n<0?0:n;return Bp.resolve(this.Bs.length>r?this.Bs[r]:null)}getHighestUnacknowledgedBatchId(){return Bp.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return Bp.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Gm(t,0),r=new Gm(t,Number.POSITIVE_INFINITY),i=[];return this.Di.forEachInRange([n,r],e=>{const t=this.Ci(e.vi);i.push(t)}),Bp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gf(Ll);return t.forEach(e=>{const t=new Gm(e,0),r=new Gm(e,Number.POSITIVE_INFINITY);this.Di.forEachInRange([t,r],e=>{n=n.add(e.vi)})}),Bp.resolve(this.Ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ah.isDocumentKey(i)||(i=i.child(""));const s=new Gm(new ah(i),0);let o=new gf(Ll);return this.Di.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)},s),Bp.resolve(this.Ni(o))}Ni(e){const t=[];return e.forEach(e=>{const n=this.Ci(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){wl(0===this.ki(t.batchId,"removed")),this.Bs.shift();let n=this.Di;return Bp.forEach(t.mutations,r=>{const i=new Gm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Di=n})}_n(e){}containsKey(e,t){const n=new Gm(t,0),r=this.Di.firstAfterOrEqual(n);return Bp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Bp.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Wm{constructor(e){this.Mi=e,this.docs=new df(ah.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bp.resolve(n?n.document.mutableCopy():Oh.newInvalidDocument(t))}getEntries(e,t){let n=wf();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oh.newInvalidDocument(e))}),Bp.resolve(n)}getAllFromCollection(e,t,n){let r=wf();const i=new ah(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||jh(Uh(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Bp.resolve(r)}getAllFromCollectionGroup(e,t,n,r){vl()}Oi(e,t){return Bp.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ym(this)}getSize(e){return Bp.resolve(this.size)}}class Ym extends am{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(n)}),Bp.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Qm{constructor(e){this.persistence=e,this.Fi=new hf(e=>$h(e),Zh),this.lastRemoteSnapshotVersion=Vl.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Hm,this.targetCount=0,this.Li=Kg.gn()}forEachTarget(e,t){return this.Fi.forEach((e,n)=>t(n)),Bp.resolve()}getLastRemoteSnapshotVersion(e){return Bp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bp.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),Bp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),Bp.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Kg(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,Bp.resolve()}updateTargetData(e,t){return this.Tn(t),Bp.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,Bp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fi.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Bp.waitFor(i).next(()=>r)}getTargetCount(e){return Bp.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fi.get(t)||null;return Bp.resolve(n)}addMatchingKeys(e,t,n){return this.Bi.Ei(t,n),Bp.resolve()}removeMatchingKeys(e,t,n){this.Bi.Ri(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Bp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),Bp.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Bi.Vi(t);return Bp.resolve(n)}containsKey(e,t){return Bp.resolve(this.Bi.containsKey(t))}}class Jm{constructor(e,t){this.Ui={},this.overlays={},this.es=new Dl(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Qm(this),this.indexManager=new Og,this.ds=function(e){return new Wm(e)}(e=>this.referenceDelegate.qi(e)),this.M=new ig(t),this._s=new Zm(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Ui[e.toKey()];return n||(n=new Km(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,n){pl("MemoryPersistence","Starting transaction:",e);const r=new Xm(this.es.next());return this.referenceDelegate.Ki(),n(r).next(e=>this.referenceDelegate.Gi(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Qi(e,t){return Bp.or(Object.values(this.Ui).map(n=>()=>n.containsKey(e,t)))}}class Xm extends qp{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.ji=new Hm,this.Wi=null}static zi(e){return new ey(e)}get Hi(){if(this.Wi)return this.Wi;throw vl()}addReference(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),Bp.resolve()}removeReference(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),Bp.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),Bp.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(e=>this.Hi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Hi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bp.forEach(this.Hi,n=>{const r=ah.fromPath(n);return this.Ji(e,r).next(e=>{e||t.removeEntry(r,Vl.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(e=>{e?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return Bp.or([()=>Bp.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function ty(e,t){return`firestore_clients_${e}_${t}`}function ny(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function ry(e,t){return`firestore_targets_${e}_${t}`}class iy{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Yi(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Il(r.error.code,r.error.message))),s?new iy(e,t,r.state,i):(gl("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sy{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Yi(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Il(n.error.code,n.error.message))),i?new sy(e,n.state,r):(gl("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=kf();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=oh(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new oy(e,i):(gl("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ay{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ay(t.clientId,t.onlineState):(gl("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uy{constructor(){this.activeTargetIds=kf()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cy{constructor(e,t,n,r,i){this.window=e,this.Yn=t,this.persistenceKey=n,this.er=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new df(Ll),this.started=!1,this.rr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ur=ty(this.persistenceKey,this.er),this.ar=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ir=this.ir.insert(this.er,new uy),this.cr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.dr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this._r=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ti.Z)(function*(){const t=yield e.syncEngine.Fs();for(const r of t){if(r===e.er)continue;const t=e.getItem(ty(e.persistenceKey,r));if(t){const n=oy.Yi(r,t);n&&(e.ir=e.ir.insert(n.clientId,n))}}e.wr();const n=e.storage.getItem(e.dr);if(n){const t=e.mr(n);t&&e.gr(t)}for(const r of e.rr)e.sr(r);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,n){this.pr(e,t,n),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ry(this.persistenceKey,e));if(n){const r=sy.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ry(this.persistenceKey,e))}updateQueryState(e,t,n){this.Er(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Ir(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pl("SharedClientState","READ",e,t),t}setItem(e,t){pl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){pl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const n=e;if(n.storageArea===this.storage){if(pl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void gl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ti.Z)(function*(){if(t.started){if(null!==n.key)if(t.cr.test(n.key)){if(null==n.newValue){const e=t.Pr(n.key);return t.br(e,null)}{const e=t.Vr(n.key,n.newValue);if(e)return t.br(e.clientId,e)}}else if(t.hr.test(n.key)){if(null!==n.newValue){const e=t.vr(n.key,n.newValue);if(e)return t.Sr(e)}}else if(t.lr.test(n.key)){if(null!==n.newValue){const e=t.Dr(n.key,n.newValue);if(e)return t.Cr(e)}}else if(n.key===t.dr){if(null!==n.newValue){const e=t.mr(n.newValue);if(e)return t.gr(e)}}else if(n.key===t.ar){const e=function(e){let t=Dl.A;if(null!=e)try{const n=JSON.parse(e);wl("number"==typeof n),t=n}catch(e){gl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Dl.A&&t.sequenceNumberHandler(e)}else if(n.key===t._r){const e=t.Nr(n.newValue);yield Promise.all(e.map(e=>t.syncEngine.kr(e)))}}else t.rr.push(n)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,n){const r=new iy(this.currentUser,e,t,n),i=ny(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}Ir(e){const t=ny(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,n){const r=ry(this.persistenceKey,e),i=new sy(e,t,n);this.setItem(r,i.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const n=this.Pr(e);return oy.Yi(n,t)}vr(e,t){const n=this.hr.exec(e),r=Number(n[1]);return iy.Yi(new ll(void 0!==n[2]?n[2]:null),r,t)}Dr(e,t){const n=this.lr.exec(e),r=Number(n[1]);return sy.Yi(r,t)}mr(e){return ay.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,Ti.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);pl("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const n=t?this.ir.insert(e,t):this.ir.remove(e),r=this.yr(this.ir),i=this.yr(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Fr(s,o).then(()=>{this.ir=n})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=kf();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class ly{constructor(){this.$r=new uy,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,n){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new uy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hy{Lr(e){}shutdown(){}}class dy{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){pl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){pl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class py{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class gy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,n,r,i){const s=this.uo(e,t);pl("RestConnection","Sending: ",s,n);const o={};return this.ao(o,r,i),this.co(e,s,o,n).then(e=>(pl("RestConnection","Received: ",e),e),t=>{throw ml("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}ho(e,t,n,r,i){return this.oo(e,t,n,r,i)}ao(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}uo(e,t){return`${this.io}/v1/${t}:${fy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,n,r){return new Promise((i,s)=>{const o=new ul;o.listenOnce(rl.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case nl.NO_ERROR:const t=o.getResponseJson();pl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case nl.TIMEOUT:pl("Connection",'RPC "'+e+'" timed out'),s(new Il(_l.DEADLINE_EXCEEDED,"Request time out"));break;case nl.HTTP_ERROR:const n=o.getStatus();if(pl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(_l).indexOf(t)>=0?t:_l.UNKNOWN}(e.status);s(new Il(t,e.message))}else s(new Il(_l.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Il(_l.UNAVAILABLE,"Connection failed."));break;default:vl()}}finally{pl("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}lo(e,t,n){const r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=el(),s=tl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ol({})),this.ao(o.initMessageHeaders,t,n),(0,Hi.uI)()||(0,Hi.b$)()||(0,Hi.d)()||(0,Hi.w1)()||(0,Hi.Mn)()||(0,Hi.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");pl("Connection","Creating WebChannel: "+a,o);const u=i.createWebChannel(a,o);let c=!1,l=!1;const h=new py({Wr:e=>{l?pl("Connection","Not sending because WebChannel is closed:",e):(c||(pl("Connection","Opening WebChannel transport."),u.open(),c=!0),pl("Connection","WebChannel sending:",e),u.send(e))},zr:()=>u.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return d(u,al.EventType.OPEN,()=>{l||pl("Connection","WebChannel transport opened.")}),d(u,al.EventType.CLOSE,()=>{l||(l=!0,pl("Connection","WebChannel transport closed"),h.no())}),d(u,al.EventType.ERROR,e=>{l||(l=!0,ml("Connection","WebChannel transport errored:",e),h.no(new Il(_l.UNAVAILABLE,"The operation could not be completed")))}),d(u,al.EventType.MESSAGE,e=>{var t;if(!l){const n=e.data[0];wl(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){pl("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=af[e];if(void 0!==t)return lf(t)}(e),n=i.message;void 0===t&&(t=_l.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.no(new Il(t,n)),u.close()}else pl("Connection","WebChannel received:",n),h.so(n)}}),d(s,il.STAT_EVENT,e=>{e.stat===sl.PROXY?pl("Connection","Detected buffering proxy"):e.stat===sl.NOPROXY&&pl("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.eo()},0),h}}function my(){return"undefined"!=typeof window?window:null}function yy(){return"undefined"!=typeof document?document:null}function vy(e){return new Vf(e,!0)}class wy{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Yn=e,this.timerId=t,this.fo=n,this._o=r,this.wo=i,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),n=Math.max(0,Date.now()-this.po),r=Math.max(0,t-n);r>0&&pl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class by{constructor(e,t,n,r,i,s,o,a){this.Yn=e,this.Ro=n,this.Po=r,this.bo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new wy(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ti.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ti.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var n=this;return(0,Ti.Z)(function*(){n.$o(),n.Bo(),n.Do.cancel(),n.Vo++,4!==e?n.Do.reset():t&&t.code===_l.RESOURCE_EXHAUSTED?(gl(t.toString()),gl("Using maximum backoff delay to prevent overloading the backend."),n.Do.Io()):t&&t.code===_l.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Lo(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Vo===t&&this.qo(e,n)},t=>{e(()=>{const e=new Il(_l.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ko(e)})})}qo(e,t){const n=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{n(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(e=>{n(()=>this.Ko(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}No(){var e=this;this.state=5,this.Do.To((0,Ti.Z)(function*(){e.state=0,e.start()}))}Ko(e){return pl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(pl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _y extends by{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.M=i}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.N?(wl(void 0===t||"string"==typeof t),Kl.fromBase64String(t||"")):(wl(void 0===t||t instanceof Uint8Array),Kl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?_l.UNKNOWN:lf(e.code);return new Il(t,e.message||"")}(o);n=new Df(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=Gf(e,r.document.name),s=$f(r.document.updateTime),o=new xh({mapValue:{fields:r.document.fields}}),a=Oh.newFoundDocument(i,s,o);n=new Nf(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Gf(e,r.document),s=r.readTime?$f(r.readTime):Vl.min(),o=Oh.newNoDocument(i,s);n=new Nf([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Gf(e,r.document);n=new Nf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return vl();{const e=t.filter,r=new of(e.count||0);n=new Of(e.targetId,r)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Vl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vl.min():t.readTime?$f(t.readTime):Vl.min()}(e);return this.listener.Qo(t,n)}jo(e){const t={};t.database=Yf(this.M),t.addTarget=function(e,t){let n;const r=t.target;return n=zh(r)?{documents:np(e,r)}:{query:rp(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=qf(e,t.resumeToken):t.snapshotVersion.compareTo(Vl.min())>0&&(n.readTime=jf(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Fo(t)}Wo(e){const t={};t.database=Yf(this.M),t.removeTarget=e,this.Fo(t)}}class Iy extends by{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.M=i,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(wl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(e,t){return e&&e.length>0?(wl(void 0!==t),e.map(e=>function(e,t){let n=$f(e.updateTime?e.updateTime:t);return n.isEqual(Vl.min())&&(n=$f(t)),new $d(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=$f(e.commitTime);return this.listener.Yo(n,t)}return wl(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Yf(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ep(this.M,e))};this.Fo(t)}}class Ty extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.M=r,this.tu=!1}eu(){if(this.tu)throw new Il(_l.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,n){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.oo(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_l.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Il(_l.UNKNOWN,e.toString())})}ho(e,t,n){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.ho(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_l.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Il(_l.UNKNOWN,e.toString())})}terminate(){this.tu=!0}}class Ey{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(gl(t),this.iu=!1):pl("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Sy{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=i,this._u.Lr(e=>{n.enqueueAndForget((0,Ti.Z)(function*(){var e;My(s)&&(pl("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,Ti.Z)(function*(e){const t=bl(e);t.fu.add(4),yield Ay(t),t.wu.set("Unknown"),t.fu.delete(4),yield Cy(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.wu=new Ey(n,r)}}function Cy(e){return ky.apply(this,arguments)}function ky(){return(ky=(0,Ti.Z)(function*(e){if(My(e))for(const t of e.du)yield t(!0)})).apply(this,arguments)}function Ay(e){return xy.apply(this,arguments)}function xy(){return(xy=(0,Ti.Z)(function*(e){for(const t of e.du)yield t(!1)})).apply(this,arguments)}function Ny(e,t){const n=bl(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),Ly(n)?Py(n):hv(n).xo()&&Dy(n,t))}function Oy(e,t){const n=bl(e),r=hv(n);n.lu.delete(t),r.xo()&&Ry(n,t),0===n.lu.size&&(r.xo()?r.Mo():My(n)&&n.wu.set("Unknown"))}function Dy(e,t){e.mu.Z(t.targetId),hv(e).jo(t)}function Ry(e,t){e.mu.Z(t),hv(e).Wo(t)}function Py(e){e.mu=new Pf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.lu.get(t)||null}),hv(e).start(),e.wu.ru()}function Ly(e){return My(e)&&!hv(e).Co()&&e.lu.size>0}function My(e){return 0===bl(e).fu.size}function Fy(e){e.mu=void 0}function Uy(e){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,Ti.Z)(function*(e){e.lu.forEach((t,n)=>{Dy(e,t)})})).apply(this,arguments)}function jy(e,t){return qy.apply(this,arguments)}function qy(){return(qy=(0,Ti.Z)(function*(e,t){Fy(e),Ly(e)?(e.wu.au(t),Py(e)):e.wu.set("Unknown")})).apply(this,arguments)}function By(e,t,n){return $y.apply(this,arguments)}function $y(){return($y=(0,Ti.Z)(function*(e,t,n){if(e.wu.set("Online"),t instanceof Df&&2===t.state&&t.cause)try{yield(r=(0,Ti.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.lu.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.lu.delete(r),e.mu.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){pl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Zy(e,n)}else if(t instanceof Nf?e.mu.ut(t):t instanceof Of?e.mu._t(t):e.mu.ht(t),!n.isEqual(Vl.min()))try{const t=yield Nm(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.mu.yt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.lu.get(t);if(!n)return;e.lu.set(t,n.withResumeToken(Kl.EMPTY_BYTE_STRING,n.snapshotVersion)),Ry(e,t);const r=new rg(n.target,t,1,n.sequenceNumber);Dy(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){pl("RemoteStore","Failed to raise snapshot:",t),yield Zy(e,t)}var r})).apply(this,arguments)}function Zy(e,t,n){return zy.apply(this,arguments)}function zy(){return(zy=(0,Ti.Z)(function*(e,t,n){if(!Gp(t))throw t;e.fu.add(1),yield Ay(e),e.wu.set("Offline"),n||(n=()=>Nm(e.localStore)),e.asyncQueue.enqueueRetryable((0,Ti.Z)(function*(){pl("RemoteStore","Retrying IndexedDB access"),yield n(),e.fu.delete(1),yield Cy(e)}))})).apply(this,arguments)}function Hy(e,t){return t().catch(n=>Zy(e,n,t))}function Gy(e){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,Ti.Z)(function*(e){const t=bl(e),n=dv(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;Wy(t);)try{const e=yield Rm(t.localStore,r);if(null===e){0===t.hu.length&&n.Mo();break}r=e.batchId,Yy(t,e)}catch(e){yield Zy(t,e)}Qy(t)&&Jy(t)})).apply(this,arguments)}function Wy(e){return My(e)&&e.hu.length<10}function Yy(e,t){e.hu.push(t);const n=dv(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Qy(e){return My(e)&&!dv(e).Co()&&e.hu.length>0}function Jy(e){dv(e).start()}function Xy(e){return ev.apply(this,arguments)}function ev(){return(ev=(0,Ti.Z)(function*(e){dv(e).Zo()})).apply(this,arguments)}function tv(e){return nv.apply(this,arguments)}function nv(){return(nv=(0,Ti.Z)(function*(e){const t=dv(e);for(const n of e.hu)t.Jo(n.mutations)})).apply(this,arguments)}function rv(e,t,n){return iv.apply(this,arguments)}function iv(){return(iv=(0,Ti.Z)(function*(e,t,n){const r=e.hu.shift(),i=tg.from(r,t,n);yield Hy(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Gy(e)})).apply(this,arguments)}function sv(e,t){return ov.apply(this,arguments)}function ov(){return(ov=(0,Ti.Z)(function*(e,t){var n;t&&dv(e).Ho&&(yield(n=(0,Ti.Z)(function*(e,t){if(cf(n=t.code)&&n!==_l.ABORTED){const n=e.hu.shift();dv(e).ko(),yield Hy(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Gy(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),Qy(e)&&Jy(e)})).apply(this,arguments)}function av(e,t){return uv.apply(this,arguments)}function uv(){return(uv=(0,Ti.Z)(function*(e,t){const n=bl(e);n.asyncQueue.verifyOperationInProgress(),pl("RemoteStore","RemoteStore received new credentials");const r=My(n);n.fu.add(3),yield Ay(n),r&&n.wu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.fu.delete(3),yield Cy(n)})).apply(this,arguments)}function cv(e,t){return lv.apply(this,arguments)}function lv(){return(lv=(0,Ti.Z)(function*(e,t){const n=bl(e);t?(n.fu.delete(2),yield Cy(n)):t||(n.fu.add(2),yield Ay(n),n.wu.set("Unknown"))})).apply(this,arguments)}function hv(e){return e.gu||(e.gu=function(e,t,n){const r=bl(e);return r.eu(),new _y(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Uy.bind(null,e),Yr:jy.bind(null,e),Qo:By.bind(null,e)}),e.du.push(function(){var t=(0,Ti.Z)(function*(t){t?(e.gu.ko(),Ly(e)?Py(e):e.wu.set("Unknown")):(yield e.gu.stop(),Fy(e))});return function(e){return t.apply(this,arguments)}}())),e.gu}function dv(e){return e.yu||(e.yu=function(e,t,n){const r=bl(e);return r.eu(),new Iy(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Xy.bind(null,e),Yr:sv.bind(null,e),Xo:tv.bind(null,e),Yo:rv.bind(null,e)}),e.du.push(function(){var t=(0,Ti.Z)(function*(t){t?(e.yu.ko(),yield Gy(e)):(yield e.yu.stop(),e.hu.length>0&&(pl("RemoteStore",`Stopping write stream with ${e.hu.length} pending writes`),e.hu=[]))});return function(e){return t.apply(this,arguments)}}())),e.yu}class fv{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Tl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new fv(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Il(_l.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pv(e,t){if(gl("AsyncQueue",`${t}: ${e}`),Gp(e))return new Il(_l.UNAVAILABLE,`${t}: ${e}`);throw e}class gv{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ah.comparator(t.key,n.key):(e,t)=>ah.comparator(e.key,t.key),this.keyedMap=_f(),this.sortedSet=new df(this.comparator)}static emptySet(e){return new gv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gv))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new gv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class mv{constructor(){this.pu=new df(ah.comparator)}track(e){const t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):vl():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,n)=>{e.push(n)}),e}}class yv{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new yv(e,t,gv.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class vv{constructor(){this.Tu=void 0,this.listeners=[]}}class wv{constructor(){this.queries=new hf(e=>_d(e),bd),this.onlineState="Unknown",this.Eu=new Set}}function bv(e,t){return _v.apply(this,arguments)}function _v(){return(_v=(0,Ti.Z)(function*(e,t){const n=bl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new vv),i)try{s.Tu=yield n.onListen(r)}catch(e){const n=pv(e,`Initialization of query '${Id(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Au(n.onlineState),s.Tu&&t.Ru(s.Tu)&&Cv(n)})).apply(this,arguments)}function Iv(e,t){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,Ti.Z)(function*(e,t){const n=bl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Ev(e,t){const n=bl(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.Ru(i)&&(r=!0);e.Tu=i}}r&&Cv(n)}function Sv(e,t,n){const r=bl(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Cv(e){e.Eu.forEach(e=>{e.next()})}class kv{constructor(e,t,n){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=n||{}}Ru(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=yv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Av{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class xv{constructor(e){this.M=e}fi(e){return Gf(this.M,e)}di(e){return e.metadata.exists?Xf(this.M,e.document,!1):Oh.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return $f(e)}}class Nv{constructor(e,t,n){this.Nu=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ov(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=Zl.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,n=new xv(this.M);for(const r of e)if(r.metadata.queries){const e=n.fi(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Sf()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,Ti.Z)(function*(){const t=yield function(e,t,n,r){return qm.apply(this,arguments)}(e.localStore,new xv(e.M),e.documents,e.Nu.id),n=e.Mu(e.documents);for(const r of e.queries)yield Bm(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Ov(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Dv{constructor(e){this.key=e}}class Rv{constructor(e){this.key=e}}class Pv{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Sf(),this.mutatedKeys=Sf(),this.Uu=Sd(e),this.qu=new gv(this.Uu)}get Ku(){return this.$u}Gu(e,t){const n=t?t.Qu:new mv,r=t?t.qu:this.qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=dd(this.query)&&r.size===this.query.limit?r.last():null,u=fd(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),l=Td(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.ju(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Uu(l,a)>0||u&&this.Uu(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),dd(this.query)||fd(this.query))for(;s.size>this.query.limit;){const e=dd(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{qu:s,Qu:n,ni:o,mutatedKeys:i}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const i=e.Qu.Iu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vl()}};return n(e)-n(t)}(e.type,t.type)||this.Uu(e.doc,t.doc)),this.Wu(n);const s=t?this.zu():[],o=0===this.Lu.size&&this.current?1:0,a=o!==this.Bu;return this.Bu=o,0!==i.length||a?{snapshot:new yv(this.query,e.qu,r,i,e.mutatedKeys,0===o,a,!1),Hu:s}:{Hu:s}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new mv,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Sf(),this.qu.forEach(e=>{this.Ju(e.key)&&(this.Lu=this.Lu.add(e.key))});const t=[];return e.forEach(e=>{this.Lu.has(e)||t.push(new Rv(e))}),this.Lu.forEach(n=>{e.has(n)||t.push(new Dv(n))}),t}Yu(e){this.$u=e.li,this.Lu=Sf();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return yv.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Lv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Mv{constructor(e){this.key=e,this.Zu=!1}}class Fv{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ta={},this.ea=new hf(e=>_d(e),bd),this.na=new Map,this.sa=new Set,this.ia=new df(ah.comparator),this.ra=new Map,this.oa=new Hm,this.ua={},this.aa=new Map,this.ca=Kg.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function Uv(e,t){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,Ti.Z)(function*(e,t){const n=Aw(e);let r,i;const s=n.ea.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Xu();else{const e=yield Pm(n.localStore,vd(t));n.isPrimaryClient&&Ny(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield jv(n,t,r,"current"===s)}return i})).apply(this,arguments)}function jv(e,t,n,r){return qv.apply(this,arguments)}function qv(){return(qv=(0,Ti.Z)(function*(e,t,n,r){e.la=(t,n,r)=>{return(i=(0,Ti.Z)(function*(e,t,n,r){let i=t.view.Gu(n);i.ni&&(i=yield Fm(e.localStore,t.query,!1).then(({documents:e})=>t.view.Gu(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return sw(e,t.targetId,o.Hu),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield Fm(e.localStore,t,!0),s=new Pv(t,i.li),o=s.Gu(i.documents),a=xf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);sw(e,n,u.Hu);const c=new Lv(t,n,s);return e.ea.set(t,c),e.na.has(n)?e.na.get(n).push(t):e.na.set(n,[t]),u.snapshot})).apply(this,arguments)}function Bv(e,t){return $v.apply(this,arguments)}function $v(){return($v=(0,Ti.Z)(function*(e,t){const n=bl(e),r=n.ea.get(t),i=n.na.get(r.targetId);if(i.length>1)return n.na.set(r.targetId,i.filter(e=>!bd(e,t))),void n.ea.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lm(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Oy(n.remoteStore,r.targetId),rw(n,r.targetId)}).catch(Xg))):(rw(n,r.targetId),yield Lm(n.localStore,r.targetId,!0))})).apply(this,arguments)}function Zv(){return(Zv=(0,Ti.Z)(function*(e,t,n){const r=xw(e);try{const e=yield function(e,t){const n=bl(e),r=Ul.now(),i=t.reduce((e,t)=>e.add(t.key),Sf());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.ci.Ks(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Wd(e,s.get(e.key));null!=t&&o.push(new Xd(e.key,t,Nh(t.value.mapValue),Zd.exists(!0)))}return n.Bs.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.ua[e.currentUser.toKey()];r||(r=new df(Ll)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(r,e.batchId,n),yield uw(r,e.changes),yield Gy(r.remoteStore)}catch(e){const t=pv(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function zv(e,t){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,Ti.Z)(function*(e,t){const n=bl(e);try{const e=yield Om(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.ra.get(t);r&&(wl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Zu=!0:e.modifiedDocuments.size>0?wl(r.Zu):e.removedDocuments.size>0&&(wl(r.Zu),r.Zu=!1))}),yield uw(n,e,t)}catch(e){yield Xg(e)}})).apply(this,arguments)}function Gv(e,t,n){const r=bl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ea.forEach((n,r)=>{const i=r.view.Au(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=bl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Au(t)&&(r=!0)}),r&&Cv(n)}(r.eventManager,t),e.length&&r.ta.Qo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Kv(e,t,n){return Wv.apply(this,arguments)}function Wv(){return(Wv=(0,Ti.Z)(function*(e,t,n){const r=bl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ra.get(t),s=i&&i.key;if(s){let e=new df(ah.comparator);e=e.insert(s,Oh.newNoDocument(s,Vl.min()));const n=Sf().add(s),i=new Af(Vl.min(),new Map,new gf(Ll),e,n);yield zv(r,i),r.ia=r.ia.remove(s),r.ra.delete(t),aw(r)}else yield Lm(r.localStore,t,!1).then(()=>rw(r,t,n)).catch(Xg)})).apply(this,arguments)}function Yv(e,t){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,Ti.Z)(function*(e,t){const n=bl(e),r=t.batch.batchId;try{const e=yield xm(n.localStore,t);nw(n,r,null),tw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield uw(n,e)}catch(e){yield Xg(e)}})).apply(this,arguments)}function Jv(e,t,n){return Xv.apply(this,arguments)}function Xv(){return(Xv=(0,Ti.Z)(function*(e,t,n){const r=bl(e);try{const e=yield function(e,t){const n=bl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.Bs.lookupMutationBatch(e,t).next(t=>(wl(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t))).next(()=>n.Bs.performConsistencyCheck(e)).next(()=>n.ci.Ks(e,r))})}(r.localStore,t);nw(r,t,n),tw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield uw(r,e)}catch(n){yield Xg(n)}})).apply(this,arguments)}function ew(){return(ew=(0,Ti.Z)(function*(e,t){const n=bl(e);My(n.remoteStore)||pl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=bl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.Bs.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.aa.get(e)||[];r.push(t),n.aa.set(e,r)}catch(e){const n=pv(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function tw(e,t){(e.aa.get(t)||[]).forEach(e=>{e.resolve()}),e.aa.delete(t)}function nw(e,t,n){const r=bl(e);let i=r.ua[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function rw(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.na.get(t))e.ea.delete(r),n&&e.ta.fa(r,n);e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach(t=>{e.oa.containsKey(t)||iw(e,t)})}function iw(e,t){e.sa.delete(t.path.canonicalString());const n=e.ia.get(t);null!==n&&(Oy(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),aw(e))}function sw(e,t,n){for(const r of n)r instanceof Dv?(e.oa.addReference(r.key,t),ow(e,r)):r instanceof Rv?(pl("SyncEngine","Document no longer in limbo: "+r.key),e.oa.removeReference(r.key,t),e.oa.containsKey(r.key)||iw(e,r.key)):vl()}function ow(e,t){const n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(pl("SyncEngine","New document in limbo: "+n),e.sa.add(r),aw(e))}function aw(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){const t=e.sa.values().next().value;e.sa.delete(t);const n=new ah(Zl.fromString(t)),r=e.ca.next();e.ra.set(r,new Mv(n)),e.ia=e.ia.insert(n,r),Ny(e.remoteStore,new rg(vd(hd(n.path)),r,2,Dl.A))}}function uw(e,t,n){return cw.apply(this,arguments)}function cw(){return(cw=(0,Ti.Z)(function*(e,t,n){const r=bl(e),i=[],s=[],o=[];var a;r.ea.isEmpty()||(r.ea.forEach((e,a)=>{o.push(r.la(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Tm.Ys(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.ta.Qo(i),yield(a=(0,Ti.Z)(function*(e,t){const n=bl(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bp.forEach(t,t=>Bp.forEach(t.Hs,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bp.forEach(t.Js,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Gp(e))throw e;pl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ii.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.ii=n.ii.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function lw(e,t){return hw.apply(this,arguments)}function hw(){return(hw=(0,Ti.Z)(function*(e,t){const n=bl(e);if(!n.currentUser.isEqual(t)){pl("SyncEngine","User change. New user:",t.toKey());const e=yield km(n.localStore,t);n.currentUser=t,function(e,t){e.aa.forEach(e=>{e.forEach(e=>{e.reject(new Il(_l.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.aa.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield uw(n,e.hi)}})).apply(this,arguments)}function dw(e,t){const n=bl(e),r=n.ra.get(t);if(r&&r.Zu)return Sf().add(r.key);{let e=Sf();const r=n.na.get(t);if(!r)return e;for(const t of r){const r=n.ea.get(t);e=e.unionWith(r.view.Ku)}return e}}function fw(e,t){return pw.apply(this,arguments)}function pw(){return(pw=(0,Ti.Z)(function*(e,t){const n=bl(e),r=yield Fm(n.localStore,t.query,!0),i=t.view.Yu(r);return n.isPrimaryClient&&sw(n,t.targetId,i.Hu),i})).apply(this,arguments)}function gw(e,t){return mw.apply(this,arguments)}function mw(){return(mw=(0,Ti.Z)(function*(e,t){const n=bl(e);return Vm(n.localStore,t).then(e=>uw(n,e))})).apply(this,arguments)}function yw(e,t,n,r){return vw.apply(this,arguments)}function vw(){return(vw=(0,Ti.Z)(function*(e,t,n,r){const i=bl(e),s=yield function(e,t){const n=bl(e),r=bl(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.fn(e,t).next(t=>t?n.ci.Ks(e,t):Bp.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield Gy(i.remoteStore):"acknowledged"===n||"rejected"===n?(nw(i,t,r||null),tw(i,t),function(e,t){bl(bl(e).Bs)._n(t)}(i.localStore,t)):vl(),yield uw(i,s)):pl("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function ww(){return(ww=(0,Ti.Z)(function*(e,t){const n=bl(e);if(Aw(n),xw(n),!0===t&&!0!==n.ha){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield bw(n,e.toArray());n.ha=!0,yield cv(n.remoteStore,!0);for(const r of t)Ny(n.remoteStore,r)}else if(!1===t&&!1!==n.ha){const e=[];let t=Promise.resolve();n.na.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(rw(n,i),Lm(n.localStore,i,!0))),Oy(n.remoteStore,i)}),yield t,yield bw(n,e),function(e){const t=bl(e);t.ra.forEach((e,n)=>{Oy(t.remoteStore,n)}),t.oa.bi(),t.ra=new Map,t.ia=new df(ah.comparator)}(n),n.ha=!1,yield cv(n.remoteStore,!1)}})).apply(this,arguments)}function bw(e,t,n){return _w.apply(this,arguments)}function _w(){return(_w=(0,Ti.Z)(function*(e,t,n){const r=bl(e),i=[],s=[];for(const o of t){let e;const t=r.na.get(o);if(t&&0!==t.length){e=yield Pm(r.localStore,vd(t[0]));for(const e of t){const t=r.ea.get(e),n=yield fw(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield Um(r.localStore,o);e=yield Pm(r.localStore,t),yield jv(r,Iw(t),o,!1)}i.push(e)}return r.ta.Qo(s),i})).apply(this,arguments)}function Iw(e){return ld(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Tw(e){const t=bl(e);return bl(bl(t.localStore).persistence).Fs()}function Ew(e,t,n,r){return Sw.apply(this,arguments)}function Sw(){return(Sw=(0,Ti.Z)(function*(e,t,n,r){const i=bl(e);if(i.ha)return void pl("SyncEngine","Ignoring unexpected query state notification.");const s=i.na.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=yield Vm(i.localStore,Ed(s[0])),r=Af.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield uw(i,e,r);break}case"rejected":yield Lm(i.localStore,t,!0),rw(i,t,r);break;default:vl()}})).apply(this,arguments)}function Cw(e,t,n){return kw.apply(this,arguments)}function kw(){return(kw=(0,Ti.Z)(function*(e,t,n){const r=Aw(e);if(r.ha){for(const e of t){if(r.na.has(e)){pl("SyncEngine","Adding an already active target "+e);continue}const t=yield Um(r.localStore,e),n=yield Pm(r.localStore,t);yield jv(r,Iw(t),n.targetId,!1),Ny(r.remoteStore,n)}for(const e of n)r.na.has(e)&&(yield Lm(r.localStore,e,!1).then(()=>{Oy(r.remoteStore,e),rw(r,e)}).catch(Xg))}})).apply(this,arguments)}function Aw(e){const t=bl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kv.bind(null,t),t.ta.Qo=Ev.bind(null,t.eventManager),t.ta.fa=Sv.bind(null,t.eventManager),t}function xw(e){const t=bl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jv.bind(null,t),t}class Nw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ti.Z)(function*(){t.M=vy(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return Cm(this.persistence,new Em,e.initialUser,this.M)}wa(e){return new Jm(ey.zi,this.M)}_a(e){return new ly}terminate(){var e=this;return(0,Ti.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ow extends Nw{constructor(e,t,n){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Ti.Z)(function*(){yield t().call(n,e),yield n.ya.initialize(n,e),yield xw(n.ya.syncEngine),yield Gy(n.ya.remoteStore),yield n.persistence.Ts(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}ga(e){return Cm(this.persistence,new Em,e.initialUser,this.M)}ma(e){return new rm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=_m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?jg.withCacheSize(this.cacheSizeBytes):jg.DEFAULT;return new vm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,my(),yy(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new ly}}class Dw extends Ow{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Ti.Z)(function*(){yield t().call(n,e);const r=n.ya.syncEngine;n.sharedClientState instanceof cy&&(n.sharedClientState.syncEngine={Mr:yw.bind(null,r),Or:Ew.bind(null,r),Fr:Cw.bind(null,r),Fs:Tw.bind(null,r),kr:gw.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.Ts(function(){var e=(0,Ti.Z)(function*(e){yield function(e,t){return ww.apply(this,arguments)}(n.ya.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}_a(e){const t=my();if(!cy.vt(t))throw new Il(_l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=_m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cy(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Rw{initialize(e,t){var n=this;return(0,Ti.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Gv(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=lw.bind(null,n.syncEngine),yield cv(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wv}createDatastore(e){const t=vy(e.databaseInfo.databaseId),n=new gy(e.databaseInfo);return function(e,t,n,r){return new Ty(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Gv(this.syncEngine,e,0),s=dy.vt()?new dy:new hy,new Sy(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Fv(e,t,n,r,i,s);return o&&(a.ha=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ti.Z)(function*(e){const t=bl(e);pl("RemoteStore","RemoteStore shutting down."),t.fu.add(5),yield Ay(t),t._u.shutdown(),t.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Pw(e,t=10240){let n=0;return{read:()=>(0,Ti.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,Ti.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Lw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mw{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Tl,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(e=>{e&&e.xu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ti.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ti.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ti.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const n=e.Ea.decode(t),r=Number(n);isNaN(r)&&e.Pa(`length string (${n}) is not valid number`);const i=yield e.ba(r);return new Av(JSON.parse(i),t.length+r)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ti.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ba(e){var t=this;return(0,Ti.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const n=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ti.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class Fw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ti.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Il(_l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,Ti.Z)(function*(e,t){const n=bl(e),r=Yf(n.M)+"/documents",i={documents:t.map(e=>Hf(n.M,e))},s=yield n.ho("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){wl(!!t.found);const n=Gf(e,t.found.name),r=$f(t.found.updateTime),i=new xh({mapValue:{fields:t.found.fields}});return Oh.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){wl(!!t.missing),wl(!!t.readTime);const n=Gf(e,t.missing),r=$f(t.readTime);return Oh.newNoDocument(n,r)}(e,t):vl()}(n.M,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());wl(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new rf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ti.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=ah.fromPath(n);e.mutations.push(new sf(r,e.precondition(r)))}),yield(n=(0,Ti.Z)(function*(e,t){const n=bl(e),r=Yf(n.M)+"/documents",i={writes:t.map(e=>ep(n.M,e))};yield n.oo("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vl();t=Vl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Il(_l.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zd.updateTime(t):Zd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vl.min()))throw new Il(_l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zd.updateTime(t)}return Zd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Uw{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.Sa=5,this.Do=new wy(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ti.Z)(function*(){const t=new Fw(e.datastore),n=e.Ca(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.xa(t)}))}).catch(t=>{e.xa(t)})}))}Ca(e){try{const t=this.updateFunction(e);return!ih(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!cf(t)}return!1}}class Vw{constructor(e,t,n,r){var i=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ll.UNAUTHENTICATED,this.clientId=Pl.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=(0,Ti.Z)(function*(e){pl("FirestoreClient","Received user=",e.uid),yield i.authCredentialListener(e),i.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,e=>(pl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}getConfiguration(){var e=this;return(0,Ti.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Il(_l.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ti.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=pv(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function jw(e,t){return qw.apply(this,arguments)}function qw(){return(qw=(0,Ti.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),pl("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,Ti.Z)(function*(e){r.isEqual(e)||(yield km(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function Bw(e,t){return $w.apply(this,arguments)}function $w(){return($w=(0,Ti.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield Zw(e);pl("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>av(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>av(t.remoteStore,n)),e.onlineComponents=t})).apply(this,arguments)}function Zw(e){return zw.apply(this,arguments)}function zw(){return(zw=(0,Ti.Z)(function*(e){return e.offlineComponents||(pl("FirestoreClient","Using default OfflineComponentProvider"),yield jw(e,new Nw)),e.offlineComponents})).apply(this,arguments)}function Hw(e){return Gw.apply(this,arguments)}function Gw(){return(Gw=(0,Ti.Z)(function*(e){return e.onlineComponents||(pl("FirestoreClient","Using default OnlineComponentProvider"),yield Bw(e,new Rw)),e.onlineComponents})).apply(this,arguments)}function Kw(e){return Zw(e).then(e=>e.persistence)}function Ww(e){return Zw(e).then(e=>e.localStore)}function Yw(e){return Hw(e).then(e=>e.remoteStore)}function Qw(e){return Hw(e).then(e=>e.syncEngine)}function Jw(e){return Xw.apply(this,arguments)}function Xw(){return(Xw=(0,Ti.Z)(function*(e){const t=yield Hw(e),n=t.eventManager;return n.onListen=Uv.bind(null,t.syncEngine),n.onUnlisten=Bv.bind(null,t.syncEngine),n})).apply(this,arguments)}function eb(e,t,n={}){const r=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return function(e,t,n,r,i){const s=new Lw({next:s=>{t.enqueueAndForget(()=>Iv(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Il(_l.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Il(_l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new kv(hd(n.path),s,{includeMetadataChanges:!0,Cu:!0});return bv(e,o)}(yield Jw(e),e.asyncQueue,t,n,r)})),r.promise}function tb(e,t,n={}){const r=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return function(e,t,n,r,i){const s=new Lw({next:n=>{t.enqueueAndForget(()=>Iv(e,o)),n.fromCache&&"server"===r.source?i.reject(new Il(_l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new kv(n,s,{includeMetadataChanges:!0,Cu:!0});return bv(e,o)}(yield Jw(e),e.asyncQueue,t,n,r)})),r.promise}const nb=new Map;function rb(e,t,n){if(!n)throw new Il(_l.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ib(e,t,n,r){if(!0===t&&!0===r)throw new Il(_l.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function sb(e){if(!ah.isDocumentKey(e))throw new Il(_l.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ob(e){if(ah.isDocumentKey(e))throw new Il(_l.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ab(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":vl()}function ub(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Il(_l.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ab(e);throw new Il(_l.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function cb(e,t){if(t<=0)throw new Il(_l.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class lb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Il(_l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Il(_l.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hb{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lb({}),this._settingsFrozen=!1,e instanceof rh?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Il(_l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rh(e.options.projectId)}(e))}get app(){if(!this._app)throw new Il(_l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Il(_l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sl;switch(e.type){case"gapi":const t=e.client;return wl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new xl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Il(_l.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nb.get(e);t&&(pl("ComponentProvider","Removing Datastore"),nb.delete(e),t.terminate())}(this),Promise.resolve()}}class db{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new db(this.firestore,e,this._key)}}class fb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fb(this.firestore,e,this._query)}}class pb extends fb{constructor(e,t,n){super(e,t,hd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new db(this.firestore,null,new ah(e))}withConverter(e){return new pb(this.firestore,e,this._path)}}function gb(e,t,...n){if(e=(0,Hi.m9)(e),rb("collection","path",t),e instanceof hb){const r=Zl.fromString(t,...n);return ob(r),new pb(e,null,r)}{if(!(e instanceof db||e instanceof pb))throw new Il(_l.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zl.fromString(t,...n));return ob(r),new pb(e.firestore,null,r)}}function mb(e,t,...n){if(e=(0,Hi.m9)(e),1===arguments.length&&(t=Pl.R()),rb("doc","path",t),e instanceof hb){const r=Zl.fromString(t,...n);return sb(r),new db(e,null,new ah(r))}{if(!(e instanceof db||e instanceof pb))throw new Il(_l.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zl.fromString(t,...n));return sb(r),new db(e.firestore,e instanceof pb?e.converter:null,new ah(r))}}function yb(e,t){return e=(0,Hi.m9)(e),t=(0,Hi.m9)(t),(e instanceof db||e instanceof pb)&&(t instanceof db||t instanceof pb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function vb(e,t){return e=(0,Hi.m9)(e),t=(0,Hi.m9)(t),e instanceof fb&&t instanceof fb&&e.firestore===t.firestore&&bd(e._query,t._query)&&e.converter===t.converter}class wb{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new wy(this,"async_queue_retry"),this.qa=()=>{const e=yy();e&&pl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const e=yy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=yy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Tl;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ti.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(mo){if(!Gp(mo))throw mo;pl("AsyncQueue","Operation failed with retryable error: "+mo)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(e=>{throw this.$a=e,this.Ba=!1,gl("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Ba=!1,e))));return this.ka=t,t}enqueueAfterDelay(e,t,n){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const r=fv.createAndSchedule(this,e,t,n,e=>this.ja(e));return this.Fa.push(r),r}Ka(){this.$a&&vl()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ti.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function bb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class _b{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ib extends hb{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new wb,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Eb(this),this._firestoreClient.terminate()}}function Tb(e){return e._firestoreClient||Eb(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Eb(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new nh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Vw(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Sb(e,t,n){const r=new Tl;return e.asyncQueue.enqueue((0,Ti.Z)(function*(){try{yield jw(e,n),yield Bw(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===_l.FAILED_PRECONDITION||e.code===_l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function Cb(e){if(e._initialized||e._terminated)throw new Il(_l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kb{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Il(_l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ab{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ab(Kl.fromBase64String(e))}catch(e){throw new Il(_l.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ab(Kl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xb{constructor(e){this._methodName=e}}class Nb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Il(_l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Il(_l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ll(this._lat,e._lat)||Ll(this._long,e._long)}}const Ob=/^__.*__$/;class Db{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jd(e,this.data,t,this.fieldTransforms)}}class Rb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Pb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vl()}}class Lb{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ya(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Lb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}sc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return t_(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Pb(this.Xa)&&Ob.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Mb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||vy(e)}ac(e,t,n,r=!1){return new Lb({Xa:e,methodName:t,uc:n,path:Hl.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Fb(e){const t=e._freezeSettings(),n=vy(e._databaseId);return new Mb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ub(e,t,n,r,i,s={}){const o=e.ac(s.merge||s.mergeFields?2:0,t,n,i);Qb("Data must be an object, but it was:",o,r);const a=Wb(r,o);let u,c;if(s.merge)u=new Gl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Jb(t,r,n);if(!o.contains(i))throw new Il(_l.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);n_(e,i)||e.push(i)}u=new Gl(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new Db(new xh(a),u,c)}class Vb extends xb{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vb}}function jb(e,t,n){return new Lb({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}class qb extends xb{_toFieldTransform(e){return new Bd(e.path,new Pd)}isEqual(e){return e instanceof qb}}class Bb extends xb{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=jb(this,e,!0),n=this.cc.map(e=>Kb(e,t)),r=new Ld(n);return new Bd(e.path,r)}isEqual(e){return this===e}}class $b extends xb{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=jb(this,e,!0),n=this.cc.map(e=>Kb(e,t)),r=new Fd(n);return new Bd(e.path,r)}isEqual(e){return this===e}}class Zb extends xb{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Vd(e.M,xd(e.M,this.hc));return new Bd(e.path,t)}isEqual(e){return this===e}}function zb(e,t,n,r){const i=e.ac(1,t,n);Qb("Data must be an object, but it was:",i,r);const s=[],o=xh.empty();ql(r,(e,r)=>{const a=e_(t,e,n);r=(0,Hi.m9)(r);const u=i.sc(a);if(r instanceof Vb)s.push(a);else{const e=Kb(r,u);null!=e&&(s.push(a),o.set(a,e))}});const a=new Gl(s);return new Rb(o,a,i.fieldTransforms)}function Hb(e,t,n,r,i,s){const o=e.ac(1,t,n),a=[Jb(t,r,n)],u=[i];if(s.length%2!=0)throw new Il(_l.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Jb(t,s[d])),u.push(s[d+1]);const c=[],l=xh.empty();for(let d=a.length-1;d>=0;--d)if(!n_(c,a[d])){const e=a[d];let t=u[d];t=(0,Hi.m9)(t);const n=o.sc(e);if(t instanceof Vb)c.push(e);else{const r=Kb(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new Gl(c);return new Rb(l,h,o.fieldTransforms)}function Gb(e,t,n,r=!1){return Kb(n,e.ac(r?4:3,t))}function Kb(e,t){if(Yb(e=(0,Hi.m9)(e)))return Qb("Unsupported field value:",t,e),Wb(e,t);if(e instanceof xb)return function(e,t){if(!Pb(t.Xa))throw t.rc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.rc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Kb(i,t.ic(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Hi.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xd(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ul.fromDate(e);return{timestampValue:jf(t.M,n)}}if(e instanceof Ul){const n=new Ul(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jf(t.M,n)}}if(e instanceof Nb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ab)return{bytesValue:qf(t.M,e._byteString)};if(e instanceof db){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.rc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Zf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc(`Unsupported field value: ${ab(e)}`)}(e,t)}function Wb(e,t){const n={};return Bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ql(e,(e,r)=>{const i=Kb(r,t.tc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Yb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ul||e instanceof Nb||e instanceof Ab||e instanceof db||e instanceof xb)}function Qb(e,t,n){if(!Yb(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ab(n);throw t.rc("an object"===r?e+" a custom object":e+" "+r)}}function Jb(e,t,n){if((t=(0,Hi.m9)(t))instanceof kb)return t._internalPath;if("string"==typeof t)return e_(e,t);throw t_("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xb=new RegExp("[~\\*/\\[\\]]");function e_(e,t,n){if(t.search(Xb)>=0)throw t_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new kb(...t.split("."))._internalPath}catch(r){throw t_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function t_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Il(_l.INVALID_ARGUMENT,a+e+u)}function n_(e,t){return e.some(e=>e.isEqual(t))}class r_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new db(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new i_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(s_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class i_ extends r_{data(){return super.data()}}function s_(e,t){return"string"==typeof t?e_(e,t):t instanceof kb?t._internalPath:t._delegate._internalPath}class o_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class a_ extends r_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new u_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(s_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class u_ extends a_{data(e={}){return super.data(e)}}class c_{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new o_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new u_(this._firestore,this._userDataWriter,n.key,n,new o_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Il(_l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new u_(e._firestore,e._userDataWriter,n.doc.key,n.doc,new o_(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new u_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new o_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:l_(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function l_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vl()}}function h_(e,t){return e instanceof a_&&t instanceof a_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof c_&&t instanceof c_&&e._firestore===t._firestore&&vb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function d_(e){if(fd(e)&&0===e.explicitOrderBy.length)throw new Il(_l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}function p_(e,...t){for(const n of t)e=n._apply(e);return e}class g_ extends f_{constructor(e,t,n){super(),this.lc=e,this.fc=t,this.dc=n,this.type="where"}_apply(e){const t=Fb(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Il(_l.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){I_(o,s);const t=[];for(const n of o)t.push(__(r,e,n));a={arrayValue:{values:t}}}else a=__(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||I_(o,s),a=Gb(n,"where",o,"in"===s||"not-in"===s);const u=Wh.create(i,s,a);return function(e,t){if(t.S()){const n=gd(e);if(null!==n&&!n.isEqual(t.field))throw new Il(_l.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=pd(e);null!==r&&T_(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Il(_l.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new fb(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class m_ extends f_{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Il(_l.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Il(_l.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new sd(t,n);return function(e,t){if(null===pd(e)){const n=gd(e);null!==n&&T_(0,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new fb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class y_ extends f_{constructor(e,t,n){super(),this.type=e,this.wc=t,this.mc=n}_apply(e){return new fb(e.firestore,e.converter,wd(e._query,this.wc,this.mc))}}class v_ extends f_{constructor(e,t,n){super(),this.type=e,this.gc=t,this.yc=n}_apply(e){const t=b_(e,this.type,this.gc,this.yc);return new fb(e.firestore,e.converter,function(e,t){return new cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class w_ extends f_{constructor(e,t,n){super(),this.type=e,this.gc=t,this.yc=n}_apply(e){const t=b_(e,this.type,this.gc,this.yc);return new fb(e.firestore,e.converter,function(e,t){return new cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function b_(e,t,n,r){if(n[0]=(0,Hi.m9)(n[0]),n[0]instanceof r_)return function(e,t,n,r,i){if(!r)throw new Il(_l.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of yd(e))if(o.field.isKeyField())s.push(yh(t,r.key));else{const e=r.data.field(o.field);if(Xl(e))throw new Il(_l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Il(_l.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new id(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Fb(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Il(_l.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new Il(_l.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!md(e)&&-1!==s.indexOf("/"))throw new Il(_l.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Zl.fromString(s));if(!ah.isDocumentKey(n))throw new Il(_l.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ah(n);a.push(yh(t,i))}else{const e=Gb(n,r,s);a.push(e)}}return new id(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function __(e,t,n){if("string"==typeof(n=(0,Hi.m9)(n))){if(""===n)throw new Il(_l.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!md(t)&&-1!==n.indexOf("/"))throw new Il(_l.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Zl.fromString(n));if(!ah.isDocumentKey(r))throw new Il(_l.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yh(e,new ah(r))}if(n instanceof db)return yh(e,n._key);throw new Il(_l.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ab(n)}.`)}function I_(e,t){if(!Array.isArray(e)||0===e.length)throw new Il(_l.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Il(_l.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function T_(e,t,n){if(!n.isEqual(t))throw new Il(_l.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class E_{convertValue(e,t="none"){switch(lh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ql(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vl()}}convertObject(e,t){const n={};return ql(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Nb(Ql(e.latitude),Ql(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=eh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(th(e));default:return null}}convertTimestamp(e){const t=Yl(e);return new Ul(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Zl.fromString(e);wl(fp(n));const r=new rh(n.get(1),n.get(3)),i=new ah(n.popFirst(5));return r.isEqual(t)||gl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function S_(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class C_ extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ab(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new db(this.firestore,null,t)}}class k_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fb(e)}set(e,t,n){this._verifyNotCommitted();const r=A_(e,this._firestore),i=S_(r.converter,t,n),s=Ub(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Zd.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=A_(e,this._firestore);let s;return s="string"==typeof(t=(0,Hi.m9)(t))||t instanceof kb?Hb(this._dataReader,"WriteBatch.update",i._key,t,n,r):zb(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Zd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=A_(e,this._firestore);return this._mutations=this._mutations.concat(new rf(t._key,Zd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Il(_l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function A_(e,t){if((e=(0,Hi.m9)(e)).firestore!==t)throw new Il(_l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class x_ extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ab(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new db(this.firestore,null,t)}}function N_(e,t,n){e=ub(e,db);const r=ub(e.firestore,Ib),i=S_(e.converter,t,n);return R_(r,[Ub(Fb(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zd.none())])}function O_(e,t,n,...r){e=ub(e,db);const i=ub(e.firestore,Ib),s=Fb(i);let o;return o="string"==typeof(t=(0,Hi.m9)(t))||t instanceof kb?Hb(s,"updateDoc",e._key,t,n,r):zb(s,"updateDoc",e._key,t),R_(i,[o.toMutation(e._key,Zd.exists(!0))])}function D_(e,...t){var n,r,i;e=(0,Hi.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||bb(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(bb(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,c,l;if(e instanceof db)c=ub(e.firestore,Ib),l=hd(e._key.path),u={next:n=>{t[o]&&t[o](P_(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=ub(e,fb);c=ub(n.firestore,Ib),l=n._query;const r=new x_(c);u={next:e=>{t[o]&&t[o](new c_(c,r,n,e))},error:t[o+1],complete:t[o+2]},d_(e._query)}return function(e,t,n,r){const i=new Lw(r),s=new kv(t,i,n);return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return bv(yield Jw(e),s)})),()=>{i.Ia(),e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return Iv(yield Jw(e),s)}))}}(Tb(c),l,a,u)}function R_(e,t){return function(e,t){const n=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return function(e,t,n){return Zv.apply(this,arguments)}(yield Qw(e),t,n)})),n.promise}(Tb(e),t)}function P_(e,t,n){const r=n.docs.get(t._key),i=new x_(e);return new a_(e,i,t._key,r,new o_(n.hasPendingWrites,n.fromCache),t.converter)}class L_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fb(e)}get(e){const t=A_(e,this._firestore),n=new C_(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return vl();const r=e[0];if(r.isFoundDocument())return new r_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new r_(this._firestore,n,t._key,null,t.converter);throw vl()})}set(e,t,n){const r=A_(e,this._firestore),i=S_(r.converter,t,n),s=Ub(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=A_(e,this._firestore);let s;return s="string"==typeof(t=(0,Hi.m9)(t))||t instanceof kb?Hb(this._dataReader,"Transaction.update",i._key,t,n,r):zb(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=A_(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=A_(e,this._firestore),n=new x_(this._firestore);return super.get(e).then(e=>new a_(this._firestore,n,t._key,e._document,new o_(!1,!1),t.converter))}}function M_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Il("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function F_(){if("undefined"==typeof Uint8Array)throw new Il("unimplemented","Uint8Arrays are not available in this environment.")}function U_(){if("undefined"==typeof atob)throw new Il("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){hl=e}(Zi.SDK_VERSION),(0,Zi._registerComponent)(new zi.wA("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Ib(r,new kl(e.getProvider("auth-internal")),new Ol(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),(0,Zi.registerVersion)(cl,"3.4.8",e),(0,Zi.registerVersion)(cl,"3.4.8","esm2017")}();class V_{constructor(e){this._delegate=e}static fromBase64String(e){return U_(),new V_(Ab.fromBase64String(e))}static fromUint8Array(e){return F_(),new V_(Ab.fromUint8Array(e))}toBase64(){return U_(),this._delegate.toBase64()}toUint8Array(){return F_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function j_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class q_{enableIndexedDbPersistence(e,t){return function(e,t){Cb(e=ub(e,Ib));const n=Tb(e),r=e._freezeSettings(),i=new Rw;return Sb(n,i,new Ow(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Cb(e=ub(e,Ib));const t=Tb(e),n=e._freezeSettings(),r=new Rw;return Sb(t,r,new Dw(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Il(_l.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Tl;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Ti.Z)(function*(){try{yield(n=(0,Ti.Z)(function*(e){if(!Zp.vt())return Promise.resolve();const t=e+"main";yield Zp.delete(t)}),function(e){return n.apply(this,arguments)})(_m(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class B_{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof rh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ml("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=ub(e,hb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ml("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ll.MOCK_USER;else{t=(0,Hi.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Il(_l.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ll(s)}e._authCredentials=new Cl(new El(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ti.Z)(function*(){const t=yield Kw(e),n=yield Yw(e);return t.setNetworkEnabled(!0),function(e){const t=bl(e);return t.fu.delete(0),Cy(t)}(n)}))}(Tb(e=ub(e,Ib)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ti.Z)(function*(){const t=yield Kw(e),n=yield Yw(e);return t.setNetworkEnabled(!1),(r=(0,Ti.Z)(function*(e){const t=bl(e);t.fu.add(0),yield Ay(t),t.wu.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(Tb(e=ub(e,Ib)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ib("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return function(e,t){return ew.apply(this,arguments)}(yield Qw(e),t)})),t.promise}(Tb(e=ub(e,Ib)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new Lw(t);return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return function(e,t){bl(e).Eu.add(t),t.next()}(yield Jw(e),n)})),()=>{n.Ia(),e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return function(e,t){bl(e).Eu.delete(t)}(yield Jw(e),n)}))}}(Tb(e=ub(e,Ib)),bb(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Il("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nI(this,gb(this._delegate,e))}catch(t){throw K_(t,"collection()","Firestore.collection()")}}doc(e){try{return new G_(this,mb(this._delegate,e))}catch(t){throw K_(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new X_(this,function(e,t){if(e=ub(e,hb),rb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Il(_l.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fb(e,null,function(e){return new cd(Zl.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw K_(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){const r=yield function(e){return Hw(e).then(e=>e.datastore)}(e);new Uw(e.asyncQueue,r,t,n).run()})),n.promise}(Tb(e=ub(e,Ib)),n=>t(new L_(e,n)))}(this._delegate,t=>e(new Z_(this,t)))}batch(){return Tb(this._delegate),new z_(new k_(this._delegate,e=>R_(this._delegate,e)))}loadBundle(e){return function(e,t){const n=Tb(e=ub(e,Ib)),r=new _b;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new Mw(e,t)}(function(e,t){if(e instanceof Uint8Array)return Pw(e,t);if(e instanceof ArrayBuffer)return Pw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,vy(t));e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){!function(e,t,n){const r=bl(e);var i;(i=(0,Ti.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=bl(e),r=$f(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n._s.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Ov(r));const i=new Nv(r,e.localStore,t.M);let s=yield t.da();for(;s;){const e=yield i.ku(s);e&&n._updateProgress(e),s=yield t.da()}const o=yield i.complete();return yield uw(e,o.Fu,void 0),yield function(e,t){const n=bl(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n._s.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ou)}catch(e){return ml("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(yield Qw(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Ti.Z)(function*(){return function(e,t){const n=bl(e);return n.persistence.runTransaction("Get named query","readonly",e=>n._s.getNamedQuery(e,t))}(yield Ww(e),t)}))}(Tb(e=ub(e,Ib)),t).then(t=>t?new fb(e,null,t.query):null)}(this._delegate,e).then(e=>e?new X_(this,e):null)}}class $_ extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new V_(new Ab(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return G_.forKey(t,this.firestore,null)}}class Z_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $_(e)}get(e){const t=rI(e);return this._delegate.get(t).then(e=>new Q_(this._firestore,new a_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=rI(e);return n?(M_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=rI(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=rI(e);return this._delegate.delete(t),this}}class z_{constructor(e){this._delegate=e}set(e,t,n){const r=rI(e);return n?(M_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=rI(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=rI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}let H_=(()=>{class e{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new u_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new J_(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(t,n){const r=e.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let s=i.get(n);return s||(s=new e(t,new $_(t),n),i.set(n,s)),s}}return e.INSTANCES=new WeakMap,e})();class G_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $_(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Il("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new G_(t,new db(t._delegate,n,new ah(e)))}static forKey(e,t,n){return new G_(t,new db(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new nI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nI(this.firestore,gb(this._delegate,e))}catch(t){throw K_(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Hi.m9)(e))instanceof db&&yb(this._delegate,e)}set(e,t){t=M_("DocumentReference.set",t);try{return t?N_(this._delegate,e,t):N_(this._delegate,e)}catch(n){throw K_(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?O_(this._delegate,e):O_(this._delegate,e,t,...n)}catch(r){throw K_(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return R_(ub(e.firestore,Ib),[new rf(e._key,Zd.none())])}(this._delegate)}onSnapshot(...e){const t=W_(e),n=Y_(e,e=>new Q_(this.firestore,new a_(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return D_(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=ub(e,db);const t=ub(e.firestore,Ib),n=Tb(t),r=new x_(t);return function(e,t){const n=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return(r=(0,Ti.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=bl(e);return n.persistence.runTransaction("read document","readonly",e=>n.ci.Ls(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Il(_l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=pv(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Ww(e),t,n);var r})),n.promise}(n,e._key).then(n=>new a_(t,r,e._key,n,new o_(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=ub(e,db);const t=ub(e.firestore,Ib);return eb(Tb(t),e._key,{source:"server"}).then(n=>P_(t,e,n))}(this._delegate):function(e){e=ub(e,db);const t=ub(e.firestore,Ib);return eb(Tb(t),e._key).then(n=>P_(t,e,n))}(this._delegate),t.then(e=>new Q_(this.firestore,new a_(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new G_(this.firestore,this._delegate.withConverter(e?H_.getInstance(this.firestore,e):null))}}function K_(e,t,n){return e.message=e.message.replace(t,n),e}function W_(e){for(const t of e)if("object"==typeof t&&!j_(t))return t;return{}}function Y_(e,t){var n,r;let i;return i=j_(e[0])?e[0]:j_(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Q_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new G_(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return h_(this._delegate,e._delegate)}}class J_ extends Q_{data(e){const t=this._delegate.data(e);return function(e,t){e||vl()}(void 0!==t),t}}class X_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $_(e)}where(e,t,n){try{return new X_(this.firestore,p_(this._delegate,function(e,t,n){const r=t,i=s_("where",e);return new g_(i,r,n)}(e,t,n)))}catch(r){throw K_(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new X_(this.firestore,p_(this._delegate,function(e,t="asc"){const n=t,r=s_("orderBy",e);return new m_(r,n)}(e,t)))}catch(n){throw K_(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new X_(this.firestore,p_(this._delegate,function(e){return cb("limit",e),new y_("limit",e,"F")}(e)))}catch(t){throw K_(t,"limit()","Query.limit()")}}limitToLast(e){try{return new X_(this.firestore,p_(this._delegate,function(e){return cb("limitToLast",e),new y_("limitToLast",e,"L")}(e)))}catch(t){throw K_(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new X_(this.firestore,p_(this._delegate,function(...e){return new v_("startAt",e,!0)}(...e)))}catch(t){throw K_(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new X_(this.firestore,p_(this._delegate,function(...e){return new v_("startAfter",e,!1)}(...e)))}catch(t){throw K_(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new X_(this.firestore,p_(this._delegate,function(...e){return new w_("endBefore",e,!1)}(...e)))}catch(t){throw K_(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new X_(this.firestore,p_(this._delegate,function(...e){return new w_("endAt",e,!0)}(...e)))}catch(t){throw K_(t,"endAt()","Query.endAt()")}}isEqual(e){return vb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=ub(e,fb);const t=ub(e.firestore,Ib),n=Tb(t),r=new x_(t);return function(e,t){const n=new Tl;return e.asyncQueue.enqueueAndForget((0,Ti.Z)(function*(){return(r=(0,Ti.Z)(function*(e,t,n){try{const r=yield Fm(e,t,!0),i=new Pv(t,r.li),s=i.Gu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=pv(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Ww(e),t,n);var r})),n.promise}(n,e._query).then(n=>new c_(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=ub(e,fb);const t=ub(e.firestore,Ib),n=Tb(t),r=new x_(t);return tb(n,e._query,{source:"server"}).then(n=>new c_(t,r,e,n))}(this._delegate):function(e){e=ub(e,fb);const t=ub(e.firestore,Ib),n=Tb(t),r=new x_(t);return d_(e._query),tb(n,e._query).then(n=>new c_(t,r,e,n))}(this._delegate),t.then(e=>new tI(this.firestore,new c_(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=W_(e),n=Y_(e,e=>new tI(this.firestore,new c_(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return D_(this._delegate,t,n)}withConverter(e){return new X_(this.firestore,this._delegate.withConverter(e?H_.getInstance(this.firestore,e):null))}}class eI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new J_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new X_(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new J_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new eI(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new J_(this._firestore,n))})}isEqual(e){return h_(this._delegate,e._delegate)}}class nI extends X_{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new G_(this.firestore,e):null}doc(e){try{return new G_(this.firestore,void 0===e?mb(this._delegate):mb(this._delegate,e))}catch(t){throw K_(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=ub(e.firestore,Ib),r=mb(e),i=S_(e.converter,t);return R_(n,[Ub(Fb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zd.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new G_(this.firestore,e))}isEqual(e){return yb(this._delegate,e._delegate)}withConverter(e){return new nI(this.firestore,this._delegate.withConverter(e?H_.getInstance(this.firestore,e):null))}}function rI(e){return ub(e,db)}class iI{constructor(...e){this._delegate=new kb(...e)}static documentId(){return new iI(Hl.keyField().canonicalString())}isEqual(e){return(e=(0,Hi.m9)(e))instanceof kb&&this._delegate._internalPath.isEqual(e._internalPath)}}class sI{constructor(e){this._delegate=e}static serverTimestamp(){const e=new qb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new sI(e)}static delete(){const e=new Vb("deleteField");return e._methodName="FieldValue.delete",new sI(e)}static arrayUnion(...e){const t=function(...e){return new Bb("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new sI(t)}static arrayRemove(...e){const t=function(...e){return new $b("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new sI(t)}static increment(e){const t=function(e){return new Zb("increment",e)}(e);return t._methodName="FieldValue.increment",new sI(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oI={Firestore:B_,GeoPoint:Nb,Timestamp:Ul,Blob:V_,Transaction:Z_,WriteBatch:z_,DocumentReference:G_,DocumentSnapshot:Q_,Query:X_,QueryDocumentSnapshot:J_,QuerySnapshot:tI,CollectionReference:nI,FieldPath:iI,FieldValue:sI,setLogLevel:function(e){!function(e){dl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var aI,uI;function cI(e,t){return function(e,t=Mi.z){return new Oe.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function lI(e,t){return cI(e,t).pipe((0,$e.U)(e=>({payload:e,type:"query"})))}function hI(e,t){return lI(e,t).pipe(Je(void 0),Ws(),(0,$e.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function dI(e,t,n){return hI(e,n).pipe(Xe((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return fI(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return fI(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return fI(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),e=>e.lift(new Js(void 0,void 0)),(0,$e.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function fI(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function pI(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}uI=(e,t)=>new B_(e,t,new q_),(aI=to.Z).INTERNAL.registerComponent(new zi.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return uI(t,n)},"PUBLIC").setServiceProps(Object.assign({},oI))),aI.registerVersion("@firebase/firestore-compat","0.1.17");class gI{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=hI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,$e.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(Je(void 0),Ws(),nt(([e,t])=>t.length>0||!e),(0,$e.U)(([e,t])=>t),Pi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xe((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=pI(e);return dI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pi.iC)}valueChanges(e={}){return lI(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),Pi.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Pi.iC)}add(e){return this.ref.add(e)}doc(e){return new mI(this.ref.doc(e),this.afs)}}class mI{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=II(n,t);return new gI(r,i,this.afs)}snapshotChanges(){return cI(this.ref,this.afs.schedulers.outsideAngular).pipe(Je(void 0),Ws(),(0,$e.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"})).pipe(Pi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,$e.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,be.D)(this.ref.get(e)).pipe(Pi.iC)}}class yI{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hI(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),nt(e=>e.length>0),Pi.iC):hI(this.query,this.afs.schedulers.outsideAngular).pipe(Pi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xe((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=pI(e);return dI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pi.iC)}valueChanges(e={}){return lI(this.query,this.afs.schedulers.outsideAngular).pipe((0,$e.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),Pi.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Pi.iC)}}const vI=new r.OlP("angularfire2.enableFirestorePersistence"),wI=new r.OlP("angularfire2.firestore.persistenceSettings"),bI=new r.OlP("angularfire2.firestore.settings"),_I=new r.OlP("angularfire2.firestore.use-emulator");function II(e,t=(e=>e)){return{query:t(e),ref:e}}let TI=(()=>{class e{constructor(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){this.schedulers=o;const y=(0,Li.on)(e,s,t),v=u;c&&Hs(y,s,l,d,f,p,h,g),[this.firestore,this.persistenceEnabled$]=(0,Li.cc)(`${y.name}.firestore`,"AngularFirestore",y.name,()=>{const e=s.runOutsideAngular(()=>y.firestore());if(r&&e.settings(r),v&&e.useEmulator(...v),n&&!j(i)){const t=()=>{try{return(0,be.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,_e.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,_e.of)(!1)]},[r,v,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=II(n,t),s=this.schedulers.ngZone.run(()=>r);return new gI(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new yI(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new mI(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Li.Dh),r.LFG(Li.xv,8),r.LFG(vI,8),r.LFG(bI,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Pi.HU),r.LFG(wI,8),r.LFG(_I,8),r.LFG(Gs,8),r.LFG(js,8),r.LFG(qs,8),r.LFG(Bs,8),r.LFG($s,8),r.LFG(Zs,8),r.LFG(zs,8),r.LFG(Vs,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();var EI=n(8277);class SI extends EI.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}var CI=n(1098);class kI extends CI.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const AI=new kI(SI);class xI{constructor(e){this.notifier=e}call(e,t){const n=new NI(e),r=(0,Ze.ft)(this.notifier,new Ze.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class NI extends Ze.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const OI=["container"],DI=new r.OlP("LottieOptions");let RI=(()=>{class e{constructor(e,t){this.ngZone=e,this.options=t,this.player$=function(e,t){const n=e();return(n instanceof Promise?(0,be.D)(n).pipe((0,$e.U)(e=>e.default||e)):(0,_e.of)(n)).pipe((0,It.b)(e=>e.useWebWorker(t)),Oi({bufferSize:1,refCount:!0}))}(this.options.player,this.options.useWebWorker).pipe((0,Ci.QV)(AI))}loadAnimation(e){return this.player$.pipe((0,$e.U)(t=>this.createAnimationItem(t,e)))}resolveOptions(e,t){return Object.assign({container:t,renderer:"svg",loop:!0,autoplay:!0},e)}createAnimationItem(e,t){return this.ngZone.runOutsideAngular(()=>e.loadAnimation(t))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b),r.LFG(DI))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),PI=(()=>{class e{constructor(e,t,n){this.ngZone=e,this.platformId=t,this.animationLoader=n,this.options=null,this.containerClass=null,this.styles=null,this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.destroy$=new Ie.xQ,this.loadAnimation$=new Ie.xQ,this.animationItem$=new Ee(null),this.setupLoadAnimationListener()}ngOnDestroy(){this.destroy$.next(),this.destroyAnimation()}loadAnimation(e,t){this.loadAnimation$.next([e,t])}getAnimationItem(){return qe(()=>this.animationItem$).pipe(nt(e=>null!==e))}awaitAnimationItemAndStartListening(e){return this.getAnimationItem().pipe(ze(t=>new Oe.y(n=>{this.ngZone.runOutsideAngular(()=>{t.addEventListener(e,e=>{this.ngZone.runOutsideAngular(()=>{n.next(e)})})})})))}setupLoadAnimationListener(){var e;this.loadAnimation$.pipe(nt(([e])=>V(this.platformId)&&void 0!==e.options),ze(([e,t])=>(this.destroyAnimation(),this.animationLoader.loadAnimation(this.animationLoader.resolveOptions(e.options.currentValue,t)))),(e=this.destroy$,t=>t.lift(new xI(e)))).subscribe(e=>{this.animationItem$.next(e)})}destroyAnimation(){const e=this.animationItem$.getValue();null!==e&&(e.destroy(),this.animationItem$.next(null))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.R0b),r.Y36(r.Lbi),r.Y36(RI))},e.\u0275dir=r.lG2({type:e,selectors:[["","lottie",""]],inputs:{options:"options",containerClass:"containerClass",styles:"styles"},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}}),e})(),LI=(()=>{class e extends PI{constructor(e,t,n){super(e,t,n),this.width=null,this.height=null,this.container=null}ngOnChanges(e){super.loadAnimation(e,this.container.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.R0b),r.Y36(r.Lbi),r.Y36(RI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-lottie"]],viewQuery:function(e,t){if(1&e&&r.Gf(OI,7),2&e){let e;r.iGM(e=r.CRH())&&(t.container=e.first)}},inputs:{width:"width",height:"height"},features:[r.qOj,r.TTD],decls:2,vars:6,consts:[[3,"ngStyle","ngClass"],["container",""]],template:function(e,t){1&e&&r._UZ(0,"div",0,1),2&e&&(r.Udp("width",t.width||"100%")("height",t.height||"100%"),r.Q6J("ngStyle",t.styles)("ngClass",t.containerClass))},directives:[D,A],encapsulation:2,changeDetection:0}),e})(),MI=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[RI,{provide:DI,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[U]]}),e})();function FI(e,t){if(1&e&&(r.TgZ(0,"p"),r._uU(1),r.qZA()),2&e){const e=t.ngIf;r.xp6(1),r.Oqu(e.uid)}}const UI=[{path:"",component:(()=>{class e{constructor(e,t){this.auth=e,this.firestore=t,this.options={path:"https://assets8.lottiefiles.com/packages/lf20_o6hQ8m.json"}}ngOnInit(){}login(){var e=this;return(0,Ti.Z)(function*(){yield e.auth.signInWithPopup(new Ei.Z.auth.GoogleAuthProvider),yield e.auth.user.subscribe(t=>{t&&(e.userCol=e.firestore.collection("users"),e.userCol.doc(t.uid).set({uid:t.uid,budget:0,monthlyEstimate:0}))})})()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Gs),r.Y36(TI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-home"]],decls:14,vars:4,consts:[[1,"container"],[1,"row"],[1,"col-12","text-center"],[1,"p-5"],[1,"col-12","col-lg-6","m-auto"],[1,"rounded","d-block","m-auto","img-fluid",3,"options"],[1,"btn","btn-outline-primary",3,"click"],["src","/assets/google.png","alt","google logo",1,"google-logo"],[4,"ngIf"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h1",3),r._uU(4,"Together for a healty environment."),r.qZA(),r.qZA(),r.qZA(),r.TgZ(5,"div",1),r.TgZ(6,"div",4),r._UZ(7,"ng-lottie",5),r.qZA(),r.TgZ(8,"div",4),r.TgZ(9,"button",6),r.NdJ("click",function(){return t.login()}),r._UZ(10,"img",7),r._uU(11," Log in with google "),r.qZA(),r.YNc(12,FI,2,1,"p",8),r.ALo(13,"async"),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(7),r.Q6J("options",t.options),r.xp6(5),r.Q6J("ngIf",r.lcZ(13,2,t.auth.user)))},directives:[LI,x],pipes:[F],styles:[".center[_ngcontent-%COMP%]{margin:auto}.google-logo[_ngcontent-%COMP%]{width:20px}"]}),e})()},{path:"setup",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-setup"]],decls:2,vars:0,template:function(e,t){1&e&&(r.TgZ(0,"p"),r._uU(1,"setup page"),r.qZA())},styles:[""]}),e})()}];let VI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[pi.forRoot(UI)],pi]}),e})();function jI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",13),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).logout()}),r.TgZ(1,"u"),r._uU(2,"LOGOUT"),r.qZA(),r.qZA()}}function qI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"div",7),r.TgZ(2,"a",8),r.NdJ("click",function(){return r.CHM(e),r.oxw().toggleNav()}),r._uU(3,"\xd7"),r.qZA(),r.TgZ(4,"ul",9),r.TgZ(5,"li",10),r.TgZ(6,"a",11),r._uU(7,"HOME"),r.qZA(),r.qZA(),r.TgZ(8,"li",10),r.TgZ(9,"a",11),r._uU(10,"OVERVIEW"),r.qZA(),r.qZA(),r.TgZ(11,"li",10),r.TgZ(12,"a",11),r._uU(13,"MY PROFILE"),r.qZA(),r.qZA(),r.TgZ(14,"li",10),r.YNc(15,jI,3,0,"a",12),r.ALo(16,"async"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(15),r.Q6J("ngIf",r.lcZ(16,1,e.auth.user))}}let BI=(()=>{class e{constructor(e,t){this.auth=e,this.router=t,this.showNav=!1}ngOnInit(){}toggleNav(){this.showNav=!this.showNav}logout(){var e=this;return(0,Ti.Z)(function*(){e.auth.signOut(),window.location.href="/"})()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Gs),r.Y36(ri))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-navbar"]],decls:8,vars:1,consts:[[1,"navbar","navbar-light","bg-primary","px-3"],["href","#",1,"navbar-brand"],[1,"text-light","mb-0"],["href","#",1,"hamburger","text-light",3,"click"],[1,"fa-solid","fa-bars","fa-2x"],["class","menu",4,"ngIf"],[1,"menu"],[1,"container"],["id","button","href","#",1,"closeBtn",3,"click"],[1,"nav"],[1,"nav-item"],["href","#",1,"nav-link"],["class","nav-link","href","#",3,"click",4,"ngIf"],["href","#",1,"nav-link",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"nav",0),r.TgZ(1,"a",1),r.TgZ(2,"h2",2),r.TgZ(3,"b"),r._uU(4,"KARBAN"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(5,"a",3),r.NdJ("click",function(){return t.toggleNav()}),r._UZ(6,"i",4),r.qZA(),r.YNc(7,qI,17,3,"div",5),r.qZA()),2&e&&(r.xp6(7),r.Q6J("ngIf",t.showNav))},directives:[x],pipes:[F],styles:[".menu[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%]{height:100vh;width:100vw;left:0;top:0;position:fixed;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1;overflow-x:hidden;transition:.5s;background-color:#212121;max-width:100vw}.nav[_ngcontent-%COMP%]{list-style-type:none}.nav-item[_ngcontent-%COMP%]{margin:10px;text-align:center}.nav-link[_ngcontent-%COMP%]{font-size:38px;padding:10px;display:block;color:#fff;font-family:Dosis,sans-serif;text-decoration:none;transition:.3s}.closeBtn[_ngcontent-%COMP%]:hover, .nav-link[_ngcontent-%COMP%]:hover{opacity:.5;transform:scale(1.2)}.closeBtn[_ngcontent-%COMP%]{position:absolute;top:0;right:45px;font-size:5rem;color:#fff;text-decoration:none;font-family:Dosis,sans-serif;transition:.3s}"]}),e})(),$I=(()=>{class e{constructor(){this.title="pwaMetavision"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(r._UZ(0,"app-navbar"),r._UZ(1,"router-outlet"))},directives:[BI,ii],styles:[""]}),e})();var ZI=n(1225),zI=n(5024);function HI(e,t,n,r){return(0,zI.m)(n)&&(r=n,n=void 0),r?HI(e,t,n).pipe((0,$e.U)(e=>(0,Ce.k)(e)?r(...e):r(e))):new Oe.y(r=>{GI(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function GI(e,t,n,r,i){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),s=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)GI(e[s],t,n,r,i)}r.add(s)}var KI=n(6054);const WI=new Oe.y(KI.Z);var YI=n(6598),QI=n(3103);class JI{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new XI(e,this.delay,this.scheduler))}}class XI extends ke.L{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(XI.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new eT(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(QI.P.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(QI.P.createComplete()),this.unsubscribe()}}class eT{constructor(e,t){this.time=e,this.notification=t}}const tT="Service workers are disabled or not supported by this browser";class nT{constructor(e){if(this.serviceWorker=e,e){const t=HI(e,"controllerchange").pipe((0,$e.U)(()=>e.controller)),n=Ve(qe(()=>(0,_e.of)(e.controller)),t);this.worker=n.pipe(nt(e=>!!e)),this.registration=this.worker.pipe(ze(()=>e.getRegistration()));const r=HI(e,"message").pipe((0,$e.U)(e=>e.data)).pipe(nt(e=>e&&e.type)).pipe((0,YI.O)(new Ie.xQ));r.connect(),this.events=r}else this.worker=this.events=this.registration=qe(()=>(0,ZI._)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(e,t){return this.worker.pipe(We(1),(0,It.b)(n=>{n.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithStatus(e,t,n){const r=this.waitForStatus(n),i=this.postMessage(e,t);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){return this.events.pipe(nt(t=>t.type===e))}nextEventOfType(e){return this.eventsOfType(e).pipe(We(1))}waitForStatus(e){return this.eventsOfType("STATUS").pipe(nt(t=>t.nonce===e),We(1),(0,$e.U)(e=>{if(!e.status)throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let rT=(()=>{class e{constructor(e){if(this.sw=e,this.subscriptionChanges=new Ie.xQ,!e.isEnabled)return this.messages=WI,this.notificationClicks=WI,void(this.subscription=WI);this.messages=this.sw.eventsOfType("PUSH").pipe((0,$e.U)(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,$e.U)(e=>e.data)),this.pushManager=this.sw.registration.pipe((0,$e.U)(e=>e.pushManager));const t=this.pushManager.pipe(ze(e=>e.getSubscription()));this.subscription=(0,Si.T)(t,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(tT));const t={userVisibleOnly:!0};let n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return t.applicationServerKey=r,this.pushManager.pipe(ze(e=>e.subscribe(t)),We(1)).toPromise().then(e=>(this.subscriptionChanges.next(e),e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(We(1),ze(e=>{if(null===e)throw new Error("Not subscribed to push notifications.");return e.unsubscribe().then(e=>{if(!e)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(tT))}decodeBase64(e){return atob(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nT))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),iT=(()=>{class e{constructor(e){if(this.sw=e,!e.isEnabled)return this.available=WI,this.activated=WI,void(this.unrecoverable=WI);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(tT));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(tT));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nT))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class sT{}const oT=new r.OlP("NGSW_REGISTER_SCRIPT");function aT(e,t,n,i){return()=>{if(!V(i)||!("serviceWorker"in navigator)||!1===n.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)s=n.registrationStrategy();else{const[t,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(t){case"registerImmediately":s=(0,_e.of)(null);break;case"registerWithDelay":s=uT(+r[0]||0);break;case"registerWhenStable":s=r[0]?(0,Si.T)(cT(e),uT(+r[0])):cT(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(r.R0b).runOutsideAngular(()=>s.pipe(We(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(e=>console.error("Service worker registration failed with:",e))))}}function uT(e){return(0,_e.of)(null).pipe(function(e,t=Mi.P){var n;const r=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new JI(r,t))}(e))}function cT(e){return e.get(r.z2F).isStable.pipe(nt(e=>e))}function lT(e,t){return new nT(V(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}let hT=(()=>{class e{static register(t,n={}){return{ngModule:e,providers:[{provide:oT,useValue:t},{provide:sT,useValue:n},{provide:nT,useFactory:lT,deps:[sT,r.Lbi]},{provide:r.ip1,useFactory:aT,deps:[r.zs3,oT,sT,r.Lbi],multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[rT,iT]}),e})();const dT={apiKey:"AIzaSyB-S-0qFJaJ3qxGVW_gg4KKAccMICm3n5E",authDomain:"gcloud-hackathon-metavision.firebaseapp.com",projectId:"gcloud-hackathon-metavision",storageBucket:"gcloud-hackathon-metavision.appspot.com",messagingSenderId:"351202796875",appId:"1:351202796875:web:fb82f580b151d54f40f4ce",measurementId:"G-NJ7SL8XPTE"};function fT(){return n.e(911).then(n.t.bind(n,4911,23))}let pT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[$I]}),e.\u0275inj=r.cJS({providers:[],imports:[[we,VI,MI.forRoot({player:fT}),hT.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),Li.hO.initializeApp(dT),Ks]]}),e})();(0,r.G48)(),ye().bootstrapModule(pT).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>i})}},e=>{"use strict";e(e.s=6067)}]);